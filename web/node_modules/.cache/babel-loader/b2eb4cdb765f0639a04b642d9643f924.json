{"ast":null,"code":"import _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport { browserHistory } from 'react-router';\nimport querystring from 'query-string';\nimport store from '../store';\nimport { setToken, removeToken, getToken } from '../utils/token';\nexport function getEmail(data) {\n  localStorage.setItem('email', data);\n  return function (dispatch) {\n    dispatch({\n      type: 'USER_EMAIL',\n      payload: data\n    });\n  };\n}\nexport function checkVerificationCode(data) {\n  return function (dispatch) {\n    dispatch({\n      type: 'CHECK_VERIFICATION_CODE_PENDING'\n    });\n    axios.get(\"/verify?\".concat(querystring.stringify(data))).then(function (response) {\n      dispatch({\n        type: 'CHECK_VERIFICATION_CODE_FULFILLED',\n        payload: response.data\n      });\n    }).catch(function (error) {\n      dispatch({\n        type: 'CHECK_VERIFICATION_CODE_REJECTED',\n        payload: error.response.data\n      });\n    });\n  };\n}\nexport function verifyVerificationCode(data) {\n  return function (dispatch) {\n    dispatch({\n      type: 'VERIFY_VERIFICATION_CODE_PENDING'\n    });\n    axios.post('/verify', data).then(function (response) {\n      dispatch({\n        type: 'VERIFY_VERIFICATION_CODE_FULFILLED',\n        payload: response.data\n      });\n    }).catch(function (error) {\n      dispatch({\n        type: 'VERIFY_VERIFICATION_CODE_REJECTED',\n        payload: error.response.data\n      });\n    });\n  };\n}\nexport var performLogin = function performLogin(values) {\n  return axios.post('/login', values).then(function (res) {\n    if (res.data.token) {\n      setTokenInApp(res.data.token, true);\n      store.dispatch({\n        type: 'VERIFY_TOKEN_FULFILLED',\n        payload: res.data.token\n      });\n    }\n\n    return res;\n  });\n};\nexport var performSignup = function performSignup(values) {\n  return axios.post('/signup', values);\n};\n\nvar setTokenInApp = function setTokenInApp(token) {\n  var setInStore = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(token);\n\n  if (setInStore) {\n    setToken(token);\n  }\n};\n\nvar cleatTokenInApp = function cleatTokenInApp(router) {\n  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '/';\n  axios.defaults.headers.common['Authorization'] = {};\n  removeToken();\n  router.push(path);\n};\n\nexport function verifyToken(token) {\n  return function (dispatch) {\n    dispatch({\n      type: 'VERIFY_TOKEN_PENDING'\n    });\n    axios({\n      method: 'GET',\n      url: '/verify_token',\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    }).then(function (response) {\n      setTokenInApp(token);\n      dispatch({\n        type: 'VERIFY_TOKEN_FULFILLED',\n        payload: token\n      });\n    }).catch(function (error) {\n      var message = error.response ? error.response.data.message : 'Invalid token';\n      logout(message)(dispatch);\n      dispatch({\n        type: 'VERIFY_TOKEN_REJECTED'\n      });\n      cleatTokenInApp(browserHistory, '/login');\n    });\n  };\n}\nexport var logout = function logout() {\n  var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return function (dispatch) {\n    dispatch({\n      type: 'LOGOUT',\n      payload: {\n        message: message\n      }\n    });\n    cleatTokenInApp(browserHistory, message ? '/login' : '/');\n  };\n};\nexport var setLogoutMessage = function setLogoutMessage() {\n  var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    type: 'SET_LOGOUT_MESSAGE',\n    payload: {\n      message: message\n    }\n  };\n};\nexport function loadToken() {\n  var token = getToken();\n  return {\n    type: 'LOAD_TOKEN',\n    payload: token\n  };\n}\nexport var requestVerificationEmail = function requestVerificationEmail(data) {\n  return axios.get(\"/verify?\".concat(querystring.stringify(_objectSpread({}, data, {\n    resend: true\n  }))));\n};\nexport var requestResetPassword = function requestResetPassword(values) {\n  var qs = querystring.stringify(values);\n  return axios.get(\"/reset-password?\".concat(qs));\n};\nexport var resetPassword = function resetPassword(data) {\n  return axios.post('/reset-password', data);\n};","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/actions/authAction.js"],"names":["axios","browserHistory","querystring","store","setToken","removeToken","getToken","getEmail","data","localStorage","setItem","dispatch","type","payload","checkVerificationCode","get","stringify","then","response","catch","error","verifyVerificationCode","post","performLogin","values","res","token","setTokenInApp","performSignup","setInStore","defaults","headers","common","cleatTokenInApp","router","path","push","verifyToken","method","url","Authorization","message","logout","setLogoutMessage","loadToken","requestVerificationEmail","resend","requestResetPassword","qs","resetPassword"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { browserHistory } from 'react-router';\nimport querystring from 'query-string';\nimport store from '../store';\nimport { setToken, removeToken, getToken } from '../utils/token';\n\nexport function getEmail(data) {\n\tlocalStorage.setItem('email', data);\n\treturn (dispatch) => {\n\t\tdispatch({ type: 'USER_EMAIL', payload: data });\n\t};\n}\n\nexport function checkVerificationCode(data) {\n\treturn (dispatch) => {\n\t\tdispatch({ type: 'CHECK_VERIFICATION_CODE_PENDING' });\n\t\taxios\n\t\t\t.get(`/verify?${querystring.stringify(data)}`)\n\t\t\t.then((response) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'CHECK_VERIFICATION_CODE_FULFILLED',\n\t\t\t\t\tpayload: response.data\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'CHECK_VERIFICATION_CODE_REJECTED',\n\t\t\t\t\tpayload: error.response.data\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n\nexport function verifyVerificationCode(data) {\n\treturn (dispatch) => {\n\t\tdispatch({ type: 'VERIFY_VERIFICATION_CODE_PENDING' });\n\t\taxios\n\t\t\t.post('/verify', data)\n\t\t\t.then((response) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'VERIFY_VERIFICATION_CODE_FULFILLED',\n\t\t\t\t\tpayload: response.data\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'VERIFY_VERIFICATION_CODE_REJECTED',\n\t\t\t\t\tpayload: error.response.data\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n\nexport const performLogin = (values) =>\n\taxios.post('/login', values).then((res) => {\n\t\tif (res.data.token) {\n\t\t\tsetTokenInApp(res.data.token, true);\n\t\t\tstore.dispatch({\n\t\t\t\ttype: 'VERIFY_TOKEN_FULFILLED',\n\t\t\t\tpayload: res.data.token\n\t\t\t});\n\t\t}\n\t\treturn res;\n\t});\n\nexport const performSignup = (values) => axios.post('/signup', values);\n\nconst setTokenInApp = (token, setInStore = false) => {\n\taxios.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\tif (setInStore) {\n\t\tsetToken(token);\n\t}\n};\n\nconst cleatTokenInApp = (router, path = '/') => {\n\taxios.defaults.headers.common['Authorization'] = {};\n\tremoveToken();\n\trouter.push(path);\n};\n\nexport function verifyToken(token) {\n\treturn (dispatch) => {\n\t\tdispatch({ type: 'VERIFY_TOKEN_PENDING' });\n\t\taxios({\n\t\t\tmethod: 'GET',\n\t\t\turl: '/verify_token',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${token}`\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tsetTokenInApp(token);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'VERIFY_TOKEN_FULFILLED',\n\t\t\t\t\tpayload: token\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst message = error.response\n\t\t\t\t\t? error.response.data.message\n\t\t\t\t\t: 'Invalid token';\n\t\t\t\tlogout(message)(dispatch);\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'VERIFY_TOKEN_REJECTED'\n\t\t\t\t});\n\t\t\t\tcleatTokenInApp(browserHistory, '/login');\n\t\t\t});\n\t};\n}\n\nexport const logout = (message = '') => (dispatch) => {\n\tdispatch({\n\t\ttype: 'LOGOUT',\n\t\tpayload: {\n\t\t\tmessage\n\t\t}\n\t});\n\tcleatTokenInApp(browserHistory, message ? '/login' : '/');\n};\n\nexport const setLogoutMessage = (message = '') => ({\n\ttype: 'SET_LOGOUT_MESSAGE',\n\tpayload: {\n\t\tmessage\n\t}\n});\n\nexport function loadToken() {\n\tlet token = getToken();\n\treturn {\n\t\ttype: 'LOAD_TOKEN',\n\t\tpayload: token\n\t};\n}\n\nexport const requestVerificationEmail = (data) =>\n\taxios.get(`/verify?${querystring.stringify({ ...data, resend: true })}`);\n\nexport const requestResetPassword = (values) => {\n\tconst qs = querystring.stringify(values);\n\treturn axios.get(`/reset-password?${qs}`);\n};\n\nexport const resetPassword = (data) => axios.post('/reset-password', data);\n"]},"metadata":{},"sourceType":"module"}