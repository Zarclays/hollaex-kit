{"ast":null,"code":"import _toConsumableArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _ from 'lodash';\nvar INITIAL_STATE = {\n  fetched: false,\n  fetching: false,\n  error: null,\n  activeOrders: []\n};\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    //Webscoket redux manipulations on orders\n    case 'SET_USER_ORDERS':\n      return _objectSpread({}, state, {\n        activeOrders: action.payload.reverse()\n      });\n\n    case 'ADD_ORDER':\n      var newOrder = _objectSpread({}, action.payload.order);\n\n      if (!newOrder.created_at) {\n        newOrder.created_at = new Date();\n      }\n\n      return _objectSpread({}, state, {\n        activeOrders: [newOrder].concat(state.activeOrders)\n      });\n\n    case 'UPDATE_ORDER':\n      {\n        var order = action.payload.order;\n        var indexOfOrder = state.activeOrders.findIndex(function (activeOrder) {\n          return activeOrder.id === order.id;\n        });\n\n        if (indexOfOrder > -1) {\n          var _ref;\n\n          var activeOrders = (_ref = []).concat.apply(_ref, _toConsumableArray(state.activeOrders));\n\n          activeOrders[indexOfOrder] = _objectSpread({}, activeOrders[indexOfOrder], order);\n          return _objectSpread({}, state, {\n            activeOrders: activeOrders\n          });\n        } // do nothing\n\n\n        break;\n      }\n\n    case 'REMOVE_ORDER':\n      {\n        var ids = action.payload.ids;\n\n        var _activeOrders = state.activeOrders.filter(function (order) {\n          return ids.indexOf(order.id) === -1;\n        });\n\n        return _objectSpread({}, state, {\n          activeOrders: _activeOrders\n        });\n      }\n    // CANCEL_ORDER\n\n    case 'CANCEL_ORDER_PENDING':\n      return _objectSpread({}, state, {\n        fetching: true,\n        fetched: false,\n        error: null\n      });\n\n    case 'CANCEL_ORDER_REJECTED':\n      return _objectSpread({}, state, {\n        fetching: false,\n        error: action.payload.data\n      });\n\n    case 'CANCEL_ORDER_FULFILLED':\n      {\n        var id = action.payload.data.id;\n\n        var data = _.filter(state.activeOrders, function (order) {\n          if (order.id !== id) {\n            return order;\n          }\n        });\n\n        return _objectSpread({}, state, {\n          fetching: false,\n          activeOrders: data\n        });\n      }\n    // CANCEL_ALL_ORDERS\n\n    case 'CANCEL_ALL_ORDERS_PENDING':\n      return _objectSpread({}, state, {\n        fetching: true,\n        fetched: false,\n        error: null\n      });\n\n    case 'CANCEL_ALL_ORDERS_REJECTED':\n      return _objectSpread({}, state, {\n        fetching: false,\n        error: action.payload.data\n      });\n\n    case 'CANCEL_ALL_ORDERS_FULFILLED':\n      {\n        var deletedOrders = action.payload.data.map(function (_ref2) {\n          var id = _ref2.id;\n          return id;\n        });\n\n        var _activeOrders2 = state.activeOrders.filter(function (_ref3) {\n          var id = _ref3.id;\n          return deletedOrders.indexOf(id) === -1;\n        });\n\n        return _objectSpread({}, state, {\n          fetching: false,\n          activeOrders: _activeOrders2\n        });\n      }\n\n    case 'LOGOUT':\n      return INITIAL_STATE;\n\n    default:\n      return state;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/reducers/orderReducer.js"],"names":["_","INITIAL_STATE","fetched","fetching","error","activeOrders","reducer","state","action","type","payload","reverse","newOrder","order","created_at","Date","concat","indexOfOrder","findIndex","activeOrder","id","ids","filter","indexOf","data","deletedOrders","map"],"mappings":"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","sourcesContent":["import _ from 'lodash';\n\nconst INITIAL_STATE = {\n\tfetched: false,\n\tfetching: false,\n\terror: null,\n\tactiveOrders: []\n};\n\nexport default function reducer(state = INITIAL_STATE, action) {\n\tswitch (action.type) {\n\t\t//Webscoket redux manipulations on orders\n\t\tcase 'SET_USER_ORDERS':\n\t\t\treturn { ...state, activeOrders: action.payload.reverse() };\n\t\tcase 'ADD_ORDER':\n\t\t\tconst newOrder = { ...action.payload.order };\n\t\t\tif (!newOrder.created_at) {\n\t\t\t\tnewOrder.created_at = new Date();\n\t\t\t}\n\t\t\treturn { ...state, activeOrders: [newOrder].concat(state.activeOrders) };\n\n\t\tcase 'UPDATE_ORDER': {\n\t\t\tlet { order } = action.payload;\n\t\t\tconst indexOfOrder = state.activeOrders.findIndex(\n\t\t\t\t(activeOrder) => activeOrder.id === order.id\n\t\t\t);\n\t\t\tif (indexOfOrder > -1) {\n\t\t\t\tlet activeOrders = [].concat(...state.activeOrders);\n\t\t\t\tactiveOrders[indexOfOrder] = {\n\t\t\t\t\t...activeOrders[indexOfOrder],\n\t\t\t\t\t...order\n\t\t\t\t};\n\t\t\t\treturn { ...state, activeOrders };\n\t\t\t}\n\t\t\t// do nothing\n\t\t\tbreak;\n\t\t}\n\n\t\tcase 'REMOVE_ORDER': {\n\t\t\tlet { ids } = action.payload;\n\t\t\tconst activeOrders = state.activeOrders.filter(\n\t\t\t\t(order) => ids.indexOf(order.id) === -1\n\t\t\t);\n\t\t\treturn { ...state, activeOrders };\n\t\t}\n\n\t\t// CANCEL_ORDER\n\t\tcase 'CANCEL_ORDER_PENDING':\n\t\t\treturn { ...state, fetching: true, fetched: false, error: null };\n\t\tcase 'CANCEL_ORDER_REJECTED':\n\t\t\treturn { ...state, fetching: false, error: action.payload.data };\n\t\tcase 'CANCEL_ORDER_FULFILLED': {\n\t\t\tconst id = action.payload.data.id;\n\t\t\tconst data = _.filter(state.activeOrders, (order) => {\n\t\t\t\tif (order.id !== id) {\n\t\t\t\t\treturn order;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: false,\n\t\t\t\tactiveOrders: data\n\t\t\t};\n\t\t}\n\t\t// CANCEL_ALL_ORDERS\n\t\tcase 'CANCEL_ALL_ORDERS_PENDING':\n\t\t\treturn { ...state, fetching: true, fetched: false, error: null };\n\t\tcase 'CANCEL_ALL_ORDERS_REJECTED':\n\t\t\treturn { ...state, fetching: false, error: action.payload.data };\n\t\tcase 'CANCEL_ALL_ORDERS_FULFILLED': {\n\t\t\tconst deletedOrders = action.payload.data.map(({ id }) => id);\n\t\t\tconst activeOrders = state.activeOrders.filter(({ id }) => {\n\t\t\t\treturn deletedOrders.indexOf(id) === -1;\n\t\t\t});\n\t\t\treturn { ...state, fetching: false, activeOrders };\n\t\t}\n\t\tcase 'LOGOUT':\n\t\t\treturn INITIAL_STATE;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n\treturn state;\n}\n"]},"metadata":{},"sourceType":"module"}