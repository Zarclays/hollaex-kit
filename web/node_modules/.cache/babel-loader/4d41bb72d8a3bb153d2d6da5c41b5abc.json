{"ast":null,"code":"import _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport { decodeToken } from '../utils/token';\nimport { USER_TYPES } from '../actions/appActions';\nvar VERIFICATION = {\n  data: {},\n  fetching: false,\n  fetched: false,\n  hasValidData: false,\n  error: ''\n};\nvar INITIAL_STATE = {\n  token: null,\n  verifyingToken: false,\n  fetching: false,\n  fetched: false,\n  error: '',\n  requestResetPasswordPending: false,\n  requestResetPasswordComplete: false,\n  resetPasswordPending: false,\n  resetPasswordComplete: false,\n  verification: VERIFICATION,\n  logoutMessage: '',\n  userType: USER_TYPES.USER_TYPE_NORMAL\n};\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_STATE;\n\n  var _ref = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref.type,\n      payload = _ref.payload;\n\n  switch (type) {\n    //EMAIL\n    case 'USER_EMAIL':\n      return _objectSpread({}, state, {\n        fetching: false,\n        fetched: true,\n        userEmail: payload\n      });\n\n    case 'CHECK_VERIFICATION_CODE_PENDING':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetching: true\n        })\n      });\n\n    case 'CHECK_VERIFICATION_CODE_FULFILLED':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetching: true,\n          fetched: true,\n          data: payload,\n          hasValidData: true\n        })\n      });\n\n    case 'CHECK_VERIFICATION_CODE_REJECTED':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetching: false,\n          fetched: true,\n          error: payload.message\n        })\n      });\n\n    case 'VERIFY_VERIFICATION_CODE_PENDING':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetching: true\n        })\n      });\n\n    case 'VERIFY_VERIFICATION_CODE_FULFILLED':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetched: true\n        })\n      });\n\n    case 'VERIFY_VERIFICATION_CODE_REJECTED':\n      return _objectSpread({}, state, {\n        verification: _objectSpread({}, VERIFICATION, {\n          fetched: true,\n          error: payload.message\n        })\n      });\n    // Verify token\n\n    case 'VERIFY_TOKEN_PENDING':\n      return _objectSpread({}, state, {\n        fetching: true,\n        verifyingToken: true\n      });\n\n    case 'VERIFY_TOKEN_REJECTED':\n      return _objectSpread({}, state, {\n        fetching: false,\n        verifyingToken: false\n      });\n\n    case 'VERIFY_TOKEN_FULFILLED':\n      var decodedToken = decodeToken(payload);\n      var userType = decodedToken && decodedToken.scopes && decodedToken.scopes.includes(USER_TYPES.USER_TYPE_ADMIN) ? USER_TYPES.USER_TYPE_ADMIN : USER_TYPES.USER_TYPE_NORMAL;\n      return _objectSpread({}, state, {\n        fetching: false,\n        verifyingToken: false,\n        fetched: true,\n        token: payload,\n        userType: userType\n      });\n\n    case 'LOAD_TOKEN':\n      return _objectSpread({}, state, {\n        token: payload\n      });\n\n    case 'SET_LOGOUT_MESSAGE':\n      return _objectSpread({}, state, {\n        logoutMessage: payload.message\n      });\n\n    case 'LOGOUT':\n      return _objectSpread({}, INITIAL_STATE, {\n        logoutMessage: payload.message\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/reducers/authReducer.js"],"names":["decodeToken","USER_TYPES","VERIFICATION","data","fetching","fetched","hasValidData","error","INITIAL_STATE","token","verifyingToken","requestResetPasswordPending","requestResetPasswordComplete","resetPasswordPending","resetPasswordComplete","verification","logoutMessage","userType","USER_TYPE_NORMAL","reducer","state","type","payload","userEmail","message","decodedToken","scopes","includes","USER_TYPE_ADMIN"],"mappings":";AAAA,SAASA,WAAT,QAA4B,gBAA5B;AACA,SAASC,UAAT,QAA2B,uBAA3B;AAEA,IAAMC,YAAY,GAAG;AACpBC,EAAAA,IAAI,EAAE,EADc;AAEpBC,EAAAA,QAAQ,EAAE,KAFU;AAGpBC,EAAAA,OAAO,EAAE,KAHW;AAIpBC,EAAAA,YAAY,EAAE,KAJM;AAKpBC,EAAAA,KAAK,EAAE;AALa,CAArB;AAQA,IAAMC,aAAa,GAAG;AACrBC,EAAAA,KAAK,EAAE,IADc;AAErBC,EAAAA,cAAc,EAAE,KAFK;AAGrBN,EAAAA,QAAQ,EAAE,KAHW;AAIrBC,EAAAA,OAAO,EAAE,KAJY;AAKrBE,EAAAA,KAAK,EAAE,EALc;AAMrBI,EAAAA,2BAA2B,EAAE,KANR;AAOrBC,EAAAA,4BAA4B,EAAE,KAPT;AAQrBC,EAAAA,oBAAoB,EAAE,KARD;AASrBC,EAAAA,qBAAqB,EAAE,KATF;AAUrBC,EAAAA,YAAY,EAAEb,YAVO;AAWrBc,EAAAA,aAAa,EAAE,EAXM;AAYrBC,EAAAA,QAAQ,EAAEhB,UAAU,CAACiB;AAZA,CAAtB;AAeA,eAAe,SAASC,OAAT,GAA2D;AAAA,MAA1CC,KAA0C,uEAAlCZ,aAAkC;;AAAA;AAAA,MAAjBa,IAAiB,QAAjBA,IAAiB;AAAA,MAAXC,OAAW,QAAXA,OAAW;;AACzE,UAAQD,IAAR;AACC;AACA,SAAK,YAAL;AACC,+BACID,KADJ;AAEChB,QAAAA,QAAQ,EAAE,KAFX;AAGCC,QAAAA,OAAO,EAAE,IAHV;AAICkB,QAAAA,SAAS,EAAED;AAJZ;;AAMD,SAAK,iCAAL;AACC,+BACIF,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXE,UAAAA,QAAQ,EAAE;AAFC;AAFb;;AAOD,SAAK,mCAAL;AACC,+BACIgB,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXE,UAAAA,QAAQ,EAAE,IAFC;AAGXC,UAAAA,OAAO,EAAE,IAHE;AAIXF,UAAAA,IAAI,EAAEmB,OAJK;AAKXhB,UAAAA,YAAY,EAAE;AALH;AAFb;;AAUD,SAAK,kCAAL;AACC,+BACIc,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXE,UAAAA,QAAQ,EAAE,KAFC;AAGXC,UAAAA,OAAO,EAAE,IAHE;AAIXE,UAAAA,KAAK,EAAEe,OAAO,CAACE;AAJJ;AAFb;;AASD,SAAK,kCAAL;AACC,+BACIJ,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXE,UAAAA,QAAQ,EAAE;AAFC;AAFb;;AAOD,SAAK,oCAAL;AACC,+BACIgB,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXG,UAAAA,OAAO,EAAE;AAFE;AAFb;;AAOD,SAAK,mCAAL;AACC,+BACIe,KADJ;AAECL,QAAAA,YAAY,oBACRb,YADQ;AAEXG,UAAAA,OAAO,EAAE,IAFE;AAGXE,UAAAA,KAAK,EAAEe,OAAO,CAACE;AAHJ;AAFb;AASD;;AACA,SAAK,sBAAL;AACC,+BACIJ,KADJ;AAEChB,QAAAA,QAAQ,EAAE,IAFX;AAGCM,QAAAA,cAAc,EAAE;AAHjB;;AAKD,SAAK,uBAAL;AACC,+BACIU,KADJ;AAEChB,QAAAA,QAAQ,EAAE,KAFX;AAGCM,QAAAA,cAAc,EAAE;AAHjB;;AAKD,SAAK,wBAAL;AACC,UAAMe,YAAY,GAAGzB,WAAW,CAACsB,OAAD,CAAhC;AACA,UAAML,QAAQ,GACbQ,YAAY,IACZA,YAAY,CAACC,MADb,IAEAD,YAAY,CAACC,MAAb,CAAoBC,QAApB,CAA6B1B,UAAU,CAAC2B,eAAxC,CAFA,GAGG3B,UAAU,CAAC2B,eAHd,GAIG3B,UAAU,CAACiB,gBALf;AAMA,+BACIE,KADJ;AAEChB,QAAAA,QAAQ,EAAE,KAFX;AAGCM,QAAAA,cAAc,EAAE,KAHjB;AAICL,QAAAA,OAAO,EAAE,IAJV;AAKCI,QAAAA,KAAK,EAAEa,OALR;AAMCL,QAAAA,QAAQ,EAARA;AAND;;AAQD,SAAK,YAAL;AACC,+BACIG,KADJ;AAECX,QAAAA,KAAK,EAAEa;AAFR;;AAKD,SAAK,oBAAL;AACC,+BACIF,KADJ;AAECJ,QAAAA,aAAa,EAAEM,OAAO,CAACE;AAFxB;;AAID,SAAK,QAAL;AACC,+BACIhB,aADJ;AAECQ,QAAAA,aAAa,EAAEM,OAAO,CAACE;AAFxB;;AAID;AACC,aAAOJ,KAAP;AA9GF;AAgHA","sourcesContent":["import { decodeToken } from '../utils/token';\nimport { USER_TYPES } from '../actions/appActions';\n\nconst VERIFICATION = {\n\tdata: {},\n\tfetching: false,\n\tfetched: false,\n\thasValidData: false,\n\terror: ''\n};\n\nconst INITIAL_STATE = {\n\ttoken: null,\n\tverifyingToken: false,\n\tfetching: false,\n\tfetched: false,\n\terror: '',\n\trequestResetPasswordPending: false,\n\trequestResetPasswordComplete: false,\n\tresetPasswordPending: false,\n\tresetPasswordComplete: false,\n\tverification: VERIFICATION,\n\tlogoutMessage: '',\n\tuserType: USER_TYPES.USER_TYPE_NORMAL\n};\n\nexport default function reducer(state = INITIAL_STATE, { type, payload }) {\n\tswitch (type) {\n\t\t//EMAIL\n\t\tcase 'USER_EMAIL':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: false,\n\t\t\t\tfetched: true,\n\t\t\t\tuserEmail: payload\n\t\t\t};\n\t\tcase 'CHECK_VERIFICATION_CODE_PENDING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetching: true\n\t\t\t\t}\n\t\t\t};\n\t\tcase 'CHECK_VERIFICATION_CODE_FULFILLED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetching: true,\n\t\t\t\t\tfetched: true,\n\t\t\t\t\tdata: payload,\n\t\t\t\t\thasValidData: true\n\t\t\t\t}\n\t\t\t};\n\t\tcase 'CHECK_VERIFICATION_CODE_REJECTED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetching: false,\n\t\t\t\t\tfetched: true,\n\t\t\t\t\terror: payload.message\n\t\t\t\t}\n\t\t\t};\n\t\tcase 'VERIFY_VERIFICATION_CODE_PENDING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetching: true\n\t\t\t\t}\n\t\t\t};\n\t\tcase 'VERIFY_VERIFICATION_CODE_FULFILLED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetched: true\n\t\t\t\t}\n\t\t\t};\n\t\tcase 'VERIFY_VERIFICATION_CODE_REJECTED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tverification: {\n\t\t\t\t\t...VERIFICATION,\n\t\t\t\t\tfetched: true,\n\t\t\t\t\terror: payload.message\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Verify token\n\t\tcase 'VERIFY_TOKEN_PENDING':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: true,\n\t\t\t\tverifyingToken: true\n\t\t\t};\n\t\tcase 'VERIFY_TOKEN_REJECTED':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: false,\n\t\t\t\tverifyingToken: false\n\t\t\t};\n\t\tcase 'VERIFY_TOKEN_FULFILLED':\n\t\t\tconst decodedToken = decodeToken(payload);\n\t\t\tconst userType =\n\t\t\t\tdecodedToken &&\n\t\t\t\tdecodedToken.scopes &&\n\t\t\t\tdecodedToken.scopes.includes(USER_TYPES.USER_TYPE_ADMIN)\n\t\t\t\t\t? USER_TYPES.USER_TYPE_ADMIN\n\t\t\t\t\t: USER_TYPES.USER_TYPE_NORMAL;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfetching: false,\n\t\t\t\tverifyingToken: false,\n\t\t\t\tfetched: true,\n\t\t\t\ttoken: payload,\n\t\t\t\tuserType\n\t\t\t};\n\t\tcase 'LOAD_TOKEN':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttoken: payload\n\t\t\t};\n\n\t\tcase 'SET_LOGOUT_MESSAGE':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tlogoutMessage: payload.message\n\t\t\t};\n\t\tcase 'LOGOUT':\n\t\t\treturn {\n\t\t\t\t...INITIAL_STATE,\n\t\t\t\tlogoutMessage: payload.message\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}