{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/components/Countdown/index.js\";\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\nimport { playBackgroundAudioNotification } from '../../utils/utils';\nimport STRINGS from '../../config/localizedStrings';\nimport { Button, Loader } from '../';\nvar INIT_STATE = {\n  countdown: -1,\n  end: undefined,\n  interval: undefined\n};\n\nvar Countdown =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Countdown, _Component);\n\n  function Countdown() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Countdown);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Countdown)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = INIT_STATE;\n\n    _this.onInit = function (expirationTime) {\n      playBackgroundAudioNotification('review_quick_trade_order');\n      var end = moment.unix(expirationTime).subtract(5, 'seconds');\n\n      _this.onTick(end);\n\n      var interval = setInterval(function () {\n        _this.onTick(_this.state.end);\n      }, 500);\n\n      _this.setState({\n        interval: interval,\n        end: end\n      });\n    };\n\n    _this.onTick = function (end) {\n      var countdown = end.diff(moment(), 'seconds');\n\n      if (countdown <= 0) {\n        playBackgroundAudioNotification('time_out_quick_trade');\n\n        _this.onStop();\n      } else {\n        _this.setState({\n          countdown: countdown\n        });\n      }\n    };\n\n    _this.onStop = function () {\n      clearInterval(_this.state.interval);\n\n      _this.setState({\n        countdown: 0\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Countdown, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.onInit(this.props.end);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.onStop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var countdown = this.state.countdown;\n\n      if (countdown === -1) {\n        return React.createElement(Loader, {\n          relative: true,\n          background: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        });\n      }\n\n      var _this$props = this.props,\n          buttonDisabled = _this$props.buttonDisabled,\n          buttonLabel = _this$props.buttonLabel,\n          onClickButton = _this$props.onClickButton,\n          children = _this$props.children,\n          className = _this$props.className,\n          timerClassName = _this$props.timerClassName,\n          renderCountdown = _this$props.renderCountdown,\n          renderTimeout = _this$props.renderTimeout;\n      var isFinished = countdown === 0;\n      return React.createElement(\"div\", {\n        className: classnames('countdown-wrapper', className),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, children && React.createElement(\"div\", {\n        className: \"countdown-children-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, children), countdown === 0 ? React.createElement(\"div\", {\n        className: \"countdown-expiration-message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, renderTimeout ? renderTimeout() : STRINGS.COUNTDOWN_ERROR_MESSAGE) : React.createElement(\"div\", {\n        className: classnames('countdown-timer', timerClassName, {\n          invalid: isFinished\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, renderCountdown ? renderCountdown(countdown) : countdown), React.createElement(Button, {\n        label: buttonLabel,\n        disabled: isFinished || buttonDisabled,\n        onClick: onClickButton,\n        className: \"countdown-button\",\n        type: \"button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Countdown;\n}(Component);\n\nexport default Countdown;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/components/Countdown/index.js"],"names":["React","Component","classnames","moment","playBackgroundAudioNotification","STRINGS","Button","Loader","INIT_STATE","countdown","end","undefined","interval","Countdown","state","onInit","expirationTime","unix","subtract","onTick","setInterval","setState","diff","onStop","clearInterval","props","buttonDisabled","buttonLabel","onClickButton","children","className","timerClassName","renderCountdown","renderTimeout","isFinished","COUNTDOWN_ERROR_MESSAGE","invalid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport moment from 'moment';\n\nimport { playBackgroundAudioNotification } from '../../utils/utils';\nimport STRINGS from '../../config/localizedStrings';\n\nimport { Button, Loader } from '../';\n\nconst INIT_STATE = {\n\tcountdown: -1,\n\tend: undefined,\n\tinterval: undefined\n};\n\nclass Countdown extends Component {\n\tstate = INIT_STATE;\n\n\tcomponentWillMount() {\n\t\tthis.onInit(this.props.end);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.onStop();\n\t}\n\n\tonInit = (expirationTime) => {\n\t\tplayBackgroundAudioNotification('review_quick_trade_order')\n\t\tconst end = moment.unix(expirationTime).subtract(5, 'seconds');\n\t\tthis.onTick(end);\n\t\tconst interval = setInterval(() => {\n\t\t\tthis.onTick(this.state.end);\n\t\t}, 500);\n\t\tthis.setState({ interval, end });\n\t};\n\n\tonTick = (end) => {\n\t\tconst countdown = end.diff(moment(), 'seconds');\n\t\tif (countdown <= 0) {\n\t\t\tplayBackgroundAudioNotification('time_out_quick_trade')\n\t\t\tthis.onStop();\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tcountdown\n\t\t\t});\n\t\t}\n\t};\n\n\tonStop = () => {\n\t\tclearInterval(this.state.interval);\n\t\tthis.setState({ countdown: 0 });\n\t};\n\n\trender() {\n\t\tconst { countdown } = this.state;\n\t\tif (countdown === -1) {\n\t\t\treturn <Loader relative={true} background={false} />;\n\t\t}\n\n\t\tconst {\n\t\t\tbuttonDisabled,\n\t\t\tbuttonLabel,\n\t\t\tonClickButton,\n\t\t\tchildren,\n\t\t\tclassName,\n\t\t\ttimerClassName,\n\t\t\trenderCountdown,\n\t\t\trenderTimeout\n\t\t} = this.props;\n\n\t\tconst isFinished = countdown === 0;\n\n\t\treturn (\n\t\t\t<div className={classnames('countdown-wrapper', className)}>\n\t\t\t\t{children && (\n\t\t\t\t\t<div className=\"countdown-children-wrapper\">{children}</div>\n\t\t\t\t)}\n\t\t\t\t{countdown === 0 ? (\n\t\t\t\t\t<div className=\"countdown-expiration-message\">\n\t\t\t\t\t\t{renderTimeout ? renderTimeout() : STRINGS.COUNTDOWN_ERROR_MESSAGE}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames('countdown-timer', timerClassName, {\n\t\t\t\t\t\t\tinvalid: isFinished\n\t\t\t\t\t\t})}\n\t\t\t\t\t>\n\t\t\t\t\t\t{renderCountdown ? renderCountdown(countdown) : countdown}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<Button\n\t\t\t\t\tlabel={buttonLabel}\n\t\t\t\t\tdisabled={isFinished || buttonDisabled}\n\t\t\t\t\tonClick={onClickButton}\n\t\t\t\t\tclassName=\"countdown-button\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Countdown;\n"]},"metadata":{},"sourceType":"module"}