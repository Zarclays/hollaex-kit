{"ast":null,"code":"import _defineProperty from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Admin/UserFees/index.js\";\nimport React, { Component } from 'react';\nimport { Table, Spin, Tabs, notification } from 'antd';\nimport ChangeFees from './changeFees';\nimport { requestFees, feeUpdate } from './actions';\nimport { CSVLink } from 'react-csv'; // import {SELECT_KEYS} from \"../Deposits/utils\";\n\nvar TabPane = Tabs.TabPane;\n\nvar openNotification = function openNotification() {\n  notification.open({\n    message: 'Successfully updated' // description: 'This is the content of the notification. This is the content of the notification. This is the content of the notification.',\n\n  });\n};\n\nvar UserFees =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserFees, _Component);\n\n  function UserFees() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserFees);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserFees)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      fetched: false,\n      loading: false,\n      error: '',\n      verification_level: null,\n      fee_type: '',\n      temporalData: [],\n      headers: [],\n      newTab: [],\n      selectedIndex: 0,\n      data: [],\n      activeKey: 0\n    };\n\n    _this.requestFees = function () {\n      _this.setState({\n        loading: true,\n        error: ''\n      });\n\n      requestFees().then(function (data) {\n        var newTab = [];\n        var sortedData = data.data.sort(function (a, b) {\n          return a.id > b.id;\n        });\n\n        _this.renderData(sortedData[_this.state.selectedIndex]);\n\n        sortedData.forEach(function (_ref) {\n          var name = _ref.name;\n          newTab.push(name);\n        });\n\n        _this.setState({\n          newTab: newTab,\n          data: sortedData,\n          loading: false,\n          fetched: true\n        });\n      }).catch(function (error) {\n        var message = error.message;\n\n        _this.setState({\n          loading: false,\n          error: message\n        });\n      });\n    };\n\n    _this.renderData = function (data) {\n      var headers = [];\n      var keys = [];\n      var tableKeys = [];\n      var temporalData = {};\n      keys.push('verification_level');\n      var name = data.name,\n          maker_fees = data.maker_fees,\n          taker_fees = data.taker_fees;\n      temporalData[name] = {\n        name: name,\n        taker_fees: taker_fees,\n        maker_fees: maker_fees\n      };\n      headers.push(name.toUpperCase());\n      keys.push(\"\".concat(name, \"_maker_fee\"));\n      headers.push(name.toUpperCase());\n      keys.push(\"\".concat(name, \"_taker_fee\"));\n      Object.entries(maker_fees).forEach(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            level = _ref3[0],\n            value = _ref3[1];\n\n        if (!temporalData[level]) {\n          temporalData[level] = {\n            verification_level: parseInt(level, 10)\n          };\n        }\n\n        temporalData[level][\"\".concat(name, \"_maker_fee\")] = value;\n      });\n      Object.entries(taker_fees).forEach(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n            level = _ref5[0],\n            value = _ref5[1];\n\n        if (!temporalData[level]) {\n          temporalData[level] = {\n            verification_level: parseInt(level, 10)\n          };\n        }\n\n        temporalData[level][\"\".concat(name, \"_taker_fee\")] = value;\n      });\n      keys.forEach(function (key) {\n        tableKeys.push({\n          label: key,\n          dataIndex: key,\n          key: key\n        });\n      });\n\n      _this.setState({\n        temporalData: Object.values(temporalData),\n        headers: Object.entries(keys).map(function (_ref6) {\n          var _ref7 = _slicedToArray(_ref6, 2),\n              key = _ref7[0],\n              name = _ref7[1];\n\n          return name === 'verification_level' ? {\n            title: 'verification levels',\n            dataIndex: name,\n            key: name + key\n          } : key === '1' ? {\n            title: 'maker fees',\n            dataIndex: name,\n            key: name + key\n          } : {\n            title: 'taker fees',\n            dataIndex: name,\n            key: name + key\n          };\n        }),\n        tableData: Object.values(temporalData),\n        tableKeys: tableKeys\n      });\n    };\n\n    _this.changeIndex = function (activeKey) {\n      _this.setState({\n        selectedIndex: activeKey\n      }, function () {\n        _this.renderData(_this.state.data[_this.state.selectedIndex]);\n      });\n    };\n\n    _this.onLvlSelect = function (value) {\n      _this.setState({\n        verification_level: value\n      });\n    };\n\n    _this.onFeeSelect = function (value) {\n      _this.setState({\n        fee_type: value\n      });\n    };\n\n    _this.onSearch = function (value) {\n      var _this$state = _this.state,\n          newTab = _this$state.newTab,\n          activeKey = _this$state.activeKey,\n          fee_type = _this$state.fee_type,\n          verification_level = _this$state.verification_level;\n      feeUpdate(newTab[activeKey], _defineProperty({}, fee_type, _defineProperty({}, verification_level, Number(value)))).then(function (res) {\n        _this.requestFees();\n      }).then(openNotification()).catch(function (err) {});\n    };\n\n    return _this;\n  }\n\n  _createClass(UserFees, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.requestFees();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          loading = _this$state2.loading,\n          error = _this$state2.error,\n          activeKey = _this$state2.activeKey;\n      return React.createElement(\"div\", {\n        className: \"app_container-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, loading ? React.createElement(Spin, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, error && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"-\", error, \"-\"), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"USER FEES\"), React.createElement(Tabs, {\n        onChange: function onChange(activeKey) {\n          _this2.setState({\n            activeKey: activeKey\n          });\n\n          _this2.changeIndex(activeKey);\n        },\n        activeKey: String(activeKey),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, this.state.newTab.map(function (tab, index) {\n        return React.createElement(TabPane, {\n          tab: tab.toUpperCase(),\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(CSVLink, {\n          filename: 'daily-max-limits.csv',\n          data: _this2.state.tableData,\n          headers: _this2.state.tableKeys,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, \"Download table\"), React.createElement(Table, {\n          columns: _this2.state.headers,\n          dataSource: _this2.state.temporalData,\n          rowKey: function rowKey(data) {\n            return data.id;\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, \"CHANGE USER FEES\"), React.createElement(ChangeFees, {\n          onLvlSelect: _this2.onLvlSelect,\n          onFeeSelect: _this2.onFeeSelect,\n          onSearch: _this2.onSearch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }));\n      }))));\n    }\n  }]);\n\n  return UserFees;\n}(Component);\n\nexport default UserFees;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Admin/UserFees/index.js"],"names":["React","Component","Table","Spin","Tabs","notification","ChangeFees","requestFees","feeUpdate","CSVLink","TabPane","openNotification","open","message","UserFees","state","fetched","loading","error","verification_level","fee_type","temporalData","headers","newTab","selectedIndex","data","activeKey","setState","then","sortedData","sort","a","b","id","renderData","forEach","name","push","catch","keys","tableKeys","maker_fees","taker_fees","toUpperCase","Object","entries","level","value","parseInt","key","label","dataIndex","values","map","title","tableData","changeIndex","onLvlSelect","onFeeSelect","onSearch","Number","res","err","String","tab","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Table, Spin, Tabs, notification } from 'antd';\nimport ChangeFees from './changeFees';\nimport { requestFees, feeUpdate } from './actions';\nimport { CSVLink } from 'react-csv';\n\n// import {SELECT_KEYS} from \"../Deposits/utils\";\n\nconst TabPane = Tabs.TabPane;\n\nconst openNotification = () => {\n\tnotification.open({\n\t\tmessage: 'Successfully updated'\n\t\t// description: 'This is the content of the notification. This is the content of the notification. This is the content of the notification.',\n\t});\n};\n\nclass UserFees extends Component {\n\tstate = {\n\t\tfetched: false,\n\t\tloading: false,\n\t\terror: '',\n\t\tverification_level: null,\n\t\tfee_type: '',\n\t\ttemporalData: [],\n\t\theaders: [],\n\t\tnewTab: [],\n\t\tselectedIndex: 0,\n\t\tdata: [],\n\t\tactiveKey: 0\n\t};\n\n\tcomponentWillMount() {\n\t\tthis.requestFees();\n\t}\n\n\trequestFees = () => {\n\t\tthis.setState({\n\t\t\tloading: true,\n\t\t\terror: ''\n\t\t});\n\n\t\trequestFees()\n\t\t\t.then((data) => {\n\t\t\t\tconst newTab = [];\n\t\t\t\tconst sortedData = data.data.sort((a, b) => a.id > b.id);\n\n\t\t\t\tthis.renderData(sortedData[this.state.selectedIndex]);\n\n\t\t\t\tsortedData.forEach(({ name }) => {\n\t\t\t\t\tnewTab.push(name);\n\t\t\t\t});\n\n\t\t\t\tthis.setState({\n\t\t\t\t\tnewTab,\n\t\t\t\t\tdata: sortedData,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tfetched: true\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst message = error.message;\n\t\t\t\tthis.setState({\n\t\t\t\t\tloading: false,\n\t\t\t\t\terror: message\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\trenderData = (data) => {\n\t\tconst headers = [];\n\t\tconst keys = [];\n\t\tconst tableKeys = [];\n\t\tconst temporalData = {};\n\n\t\tkeys.push('verification_level');\n\n\t\tconst { name, maker_fees, taker_fees } = data;\n\t\ttemporalData[name] = {\n\t\t\tname,\n\t\t\ttaker_fees,\n\t\t\tmaker_fees\n\t\t};\n\t\theaders.push(name.toUpperCase());\n\t\tkeys.push(`${name}_maker_fee`);\n\t\theaders.push(name.toUpperCase());\n\t\tkeys.push(`${name}_taker_fee`);\n\n\t\tObject.entries(maker_fees).forEach(([level, value]) => {\n\t\t\tif (!temporalData[level]) {\n\t\t\t\ttemporalData[level] = {\n\t\t\t\t\tverification_level: parseInt(level, 10)\n\t\t\t\t};\n\t\t\t}\n\t\t\ttemporalData[level][`${name}_maker_fee`] = value;\n\t\t});\n\t\tObject.entries(taker_fees).forEach(([level, value]) => {\n\t\t\tif (!temporalData[level]) {\n\t\t\t\ttemporalData[level] = {\n\t\t\t\t\tverification_level: parseInt(level, 10)\n\t\t\t\t};\n\t\t\t}\n\t\t\ttemporalData[level][`${name}_taker_fee`] = value;\n\t\t});\n\n\t\tkeys.forEach((key) => {\n\t\t\ttableKeys.push({\n\t\t\t\tlabel: key,\n\t\t\t\tdataIndex: key,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t});\n\t\tthis.setState({\n\t\t\ttemporalData: Object.values(temporalData),\n\t\t\theaders: Object.entries(keys).map(([key, name]) => {\n\t\t\t\treturn name === 'verification_level'\n\t\t\t\t\t? {\n\t\t\t\t\t\t\ttitle: 'verification levels',\n\t\t\t\t\t\t\tdataIndex: name,\n\t\t\t\t\t\t\tkey: name + key\n\t\t\t\t\t  }\n\t\t\t\t\t: key === '1'\n\t\t\t\t\t? { title: 'maker fees', dataIndex: name, key: name + key }\n\t\t\t\t\t: { title: 'taker fees', dataIndex: name, key: name + key };\n\t\t\t}),\n\t\t\ttableData: Object.values(temporalData),\n\t\t\ttableKeys\n\t\t});\n\t};\n\n\tchangeIndex = (activeKey) => {\n\t\tthis.setState({ selectedIndex: activeKey }, () => {\n\t\t\tthis.renderData(this.state.data[this.state.selectedIndex]);\n\t\t});\n\t};\n\n\tonLvlSelect = (value) => {\n\t\tthis.setState({ verification_level: value });\n\t};\n\n\tonFeeSelect = (value) => {\n\t\tthis.setState({ fee_type: value });\n\t};\n\n\tonSearch = (value) => {\n\t\tconst { newTab, activeKey, fee_type, verification_level } = this.state;\n\n\t\tfeeUpdate(newTab[activeKey], {\n\t\t\t[fee_type]: { [verification_level]: Number(value) }\n\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tthis.requestFees();\n\t\t\t})\n\t\t\t.then(openNotification())\n\t\t\t.catch((err) => {});\n\t};\n\n\trender() {\n\t\tconst { loading, error, activeKey } = this.state;\n\t\treturn (\n\t\t\t<div className=\"app_container-content\">\n\t\t\t\t{loading ? (\n\t\t\t\t\t<Spin size=\"large\" />\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{error && <p>-{error}-</p>}\n\t\t\t\t\t\t<h1>USER FEES</h1>\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tonChange={(activeKey) => {\n\t\t\t\t\t\t\t\tthis.setState({ activeKey });\n\t\t\t\t\t\t\t\tthis.changeIndex(activeKey);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tactiveKey={String(activeKey)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.state.newTab.map((tab, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<TabPane tab={tab.toUpperCase()} key={index}>\n\t\t\t\t\t\t\t\t\t\t<CSVLink\n\t\t\t\t\t\t\t\t\t\t\tfilename={'daily-max-limits.csv'}\n\t\t\t\t\t\t\t\t\t\t\tdata={this.state.tableData}\n\t\t\t\t\t\t\t\t\t\t\theaders={this.state.tableKeys}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tDownload table\n\t\t\t\t\t\t\t\t\t\t</CSVLink>\n\t\t\t\t\t\t\t\t\t\t<Table\n\t\t\t\t\t\t\t\t\t\t\tcolumns={this.state.headers}\n\t\t\t\t\t\t\t\t\t\t\tdataSource={this.state.temporalData}\n\t\t\t\t\t\t\t\t\t\t\trowKey={(data) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn data.id;\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<h2>CHANGE USER FEES</h2>\n\t\t\t\t\t\t\t\t\t\t<ChangeFees\n\t\t\t\t\t\t\t\t\t\t\tonLvlSelect={this.onLvlSelect}\n\t\t\t\t\t\t\t\t\t\t\tonFeeSelect={this.onFeeSelect}\n\t\t\t\t\t\t\t\t\t\t\tonSearch={this.onSearch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</TabPane>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UserFees;\n"]},"metadata":{},"sourceType":"module"}