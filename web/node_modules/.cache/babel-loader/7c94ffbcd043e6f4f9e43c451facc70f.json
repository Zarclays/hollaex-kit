{"ast":null,"code":"var _ = require('underscore');\n\nmodule.exports = init;\n\nfunction init(o) {\n  return {\n    countries: search.bind(null, o.countries),\n    currencies: search.bind(null, o.currencies),\n    languages: search.bind(null, o.languages)\n  };\n}\n\nfunction search(data, query) {\n  var q = _.pairs(query);\n\n  return data.filter(function (d) {\n    return q.filter(function (v) {\n      var prop = d[v[0]];\n      if (_.isArray(prop)) return prop.indexOf(v[1]) >= 0;\n      return prop == v[1];\n    }).length == q.length;\n  });\n}","map":null,"metadata":{},"sourceType":"script"}