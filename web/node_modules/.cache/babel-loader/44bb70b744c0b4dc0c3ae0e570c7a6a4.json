{"ast":null,"code":"import _toConsumableArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Signup/index.js\";\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { isMobile } from 'react-device-detect';\nimport { SubmissionError, change } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport { performSignup } from '../../actions/authAction';\nimport SignupForm, { generateFormFields, FORM_NAME } from './SignupForm';\nimport SignupSuccess from './SignupSuccess';\nimport { ContactForm } from '../';\nimport { IconTitle, Dialog, MobileBarBack } from '../../components';\nimport { HOLLAEX_LOGO, FLEX_CENTER_CLASSES, ICONS } from '../../config/constants';\nimport STRINGS from '../../config/localizedStrings';\n\nvar BottomLinks = function BottomLinks() {\n  return React.createElement(\"div\", {\n    className: classnames('f-1', 'link_wrapper', 'multi_links'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, STRINGS.SIGN_UP.HAVE_ACCOUNT, React.createElement(Link, {\n    to: \"/login\",\n    className: \"blue-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, STRINGS.SIGN_UP.GOTO_LOGIN)), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28\n    },\n    __self: this\n  }, STRINGS.SIGN_UP.NO_EMAIL, React.createElement(Link, {\n    to: \"/verify\",\n    className: \"blue-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, STRINGS.SIGN_UP.REQUEST_EMAIL)));\n};\n\nvar Signup =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Signup, _Component);\n\n  function Signup() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Signup);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Signup)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      success: false,\n      showContactForm: false\n    };\n\n    _this.getReferralCode = function () {\n      var affiliation_code = '';\n\n      if (_this.props.location && _this.props.location.query && _this.props.location.query.affiliation_code) {\n        affiliation_code = _this.props.location.query.affiliation_code;\n      } else if (window.location && window.location.search && window.location.search.includes('affiliation_code')) {\n        affiliation_code = window.location.search.split('?affiliation_code=')[1];\n      }\n\n      return affiliation_code;\n    };\n\n    _this.onSubmitSignup = function (values) {\n      var affiliation_code = _this.getReferralCode();\n\n      if (affiliation_code) {\n        values.referral = affiliation_code;\n      }\n\n      return performSignup(values).then(function (res) {\n        _this.setState({\n          success: true\n        });\n      }).catch(function (error) {\n        var errors = {};\n\n        _this.props.change(FORM_NAME, 'captcha', '');\n\n        if (error.response.status === 409) {\n          errors.email = STRINGS.VALIDATIONS.USER_EXIST;\n        } else if (error.response) {\n          var _error$response$data$ = error.response.data.message,\n              message = _error$response$data$ === void 0 ? '' : _error$response$data$;\n\n          if (message.toLowerCase().indexOf('password') > -1) {\n            // TODO set error in constants for language\n            errors.password = STRINGS.VALIDATIONS.INVALID_PASSWORD;\n          } else {\n            errors._error = message || error.message;\n          }\n        } else {\n          errors._error = error.message;\n        }\n\n        throw new SubmissionError(errors);\n      });\n    };\n\n    _this.onOpenDialog = function () {\n      _this.setState({\n        showContactForm: true\n      });\n    };\n\n    _this.onCloseDialog = function () {\n      _this.setState({\n        showContactForm: false\n      });\n    };\n\n    _this.onGoBack = function () {\n      _this.props.router.push(\"/login\");\n    };\n\n    _this.onBackActiveEmail = function () {\n      _this.setState({\n        success: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Signup, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          languageClasses = _this$props.languageClasses,\n          activeTheme = _this$props.activeTheme;\n      var _this$state = this.state,\n          success = _this$state.success,\n          showContactForm = _this$state.showContactForm;\n\n      if (success) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, isMobile && React.createElement(MobileBarBack, {\n          onBackClick: this.onBackActiveEmail,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), React.createElement(SignupSuccess, {\n          activeTheme: activeTheme,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }));\n      }\n\n      var formFields = generateFormFields(STRINGS, activeTheme);\n      return React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'f-1'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, isMobile && !showContactForm && React.createElement(MobileBarBack, {\n        onBackClick: this.onGoBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'auth_wrapper', 'w-100'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(IconTitle, {\n        iconPath: HOLLAEX_LOGO,\n        text: STRINGS.SIGNUP_TEXT,\n        textType: \"title\",\n        underline: true,\n        useSvg: true,\n        className: \"w-100 exir-logo\",\n        subtitle: STRINGS.formatString(STRINGS.SIGN_UP.SIGNUP_TO, STRINGS.APP_TITLE),\n        actionProps: {\n          text: STRINGS.HELP_TEXT,\n          iconPath: ICONS.BLUE_QUESTION,\n          onClick: this.onOpenDialog,\n          useSvg: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'auth_form-wrapper', 'w-100'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(SignupForm, {\n        onSubmit: this.onSubmitSignup,\n        formFields: formFields,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), isMobile && React.createElement(BottomLinks, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }))), !isMobile && React.createElement(BottomLinks, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(Dialog, {\n        isOpen: showContactForm,\n        label: \"contact-modal\",\n        onCloseDialog: this.onCloseDialog,\n        shouldCloseOnOverlayClick: false,\n        style: {\n          'z-index': 100\n        },\n        className: classnames(languageClasses),\n        showCloseText: false,\n        theme: activeTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(ContactForm, {\n        onSubmitSuccess: this.onCloseDialog,\n        onClose: this.onCloseDialog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Signup;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    activeTheme: store.app.theme\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    change: bindActionCreators(change, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Signup/index.js"],"names":["React","Component","classnames","Link","connect","isMobile","SubmissionError","change","bindActionCreators","performSignup","SignupForm","generateFormFields","FORM_NAME","SignupSuccess","ContactForm","IconTitle","Dialog","MobileBarBack","HOLLAEX_LOGO","FLEX_CENTER_CLASSES","ICONS","STRINGS","BottomLinks","SIGN_UP","HAVE_ACCOUNT","GOTO_LOGIN","NO_EMAIL","REQUEST_EMAIL","Signup","state","success","showContactForm","getReferralCode","affiliation_code","props","location","query","window","search","includes","split","onSubmitSignup","values","referral","then","res","setState","catch","error","errors","response","status","email","VALIDATIONS","USER_EXIST","data","message","toLowerCase","indexOf","password","INVALID_PASSWORD","_error","onOpenDialog","onCloseDialog","onGoBack","router","push","onBackActiveEmail","languageClasses","activeTheme","formFields","SIGNUP_TEXT","formatString","SIGNUP_TO","APP_TITLE","text","HELP_TEXT","iconPath","BLUE_QUESTION","onClick","useSvg","mapStateToProps","store","app","theme","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\nimport { connect } from 'react-redux';\nimport { isMobile } from 'react-device-detect';\nimport { SubmissionError, change } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport { performSignup } from '../../actions/authAction';\nimport SignupForm, { generateFormFields, FORM_NAME } from './SignupForm';\nimport SignupSuccess from './SignupSuccess';\nimport { ContactForm } from '../';\nimport { IconTitle, Dialog, MobileBarBack } from '../../components';\nimport {\n\tHOLLAEX_LOGO,\n\tFLEX_CENTER_CLASSES,\n\tICONS\n} from '../../config/constants';\nimport STRINGS from '../../config/localizedStrings';\n\nconst BottomLinks = () => (\n\t<div className={classnames('f-1', 'link_wrapper', 'multi_links')}>\n\t\t<div>\n\t\t\t{STRINGS.SIGN_UP.HAVE_ACCOUNT}\n\t\t\t<Link to=\"/login\" className=\"blue-link\">\n\t\t\t\t{STRINGS.SIGN_UP.GOTO_LOGIN}\n\t\t\t</Link>\n\t\t</div>\n\t\t<div>\n\t\t\t{STRINGS.SIGN_UP.NO_EMAIL}\n\t\t\t<Link to=\"/verify\" className=\"blue-link\">\n\t\t\t\t{STRINGS.SIGN_UP.REQUEST_EMAIL}\n\t\t\t</Link>\n\t\t</div>\n\t</div>\n);\n\nclass Signup extends Component {\n\tstate = {\n\t\tsuccess: false,\n\t\tshowContactForm: false\n\t};\n\n\tgetReferralCode = () => {\n\t\tlet affiliation_code = '';\n\t\tif (this.props.location\n\t\t\t&& this.props.location.query\n\t\t\t&& this.props.location.query.affiliation_code) {\n\t\t\taffiliation_code = this.props.location.query.affiliation_code;\n\t\t} else if (window.location\n\t\t\t&& window.location.search\n\t\t\t&& window.location.search.includes('affiliation_code')) {\n\t\t\taffiliation_code = window.location.search.split('?affiliation_code=')[1];\n\t\t}\n\t\treturn affiliation_code;\n\t}\n\n\tonSubmitSignup = (values) => {\n\t\tconst affiliation_code = this.getReferralCode();\n\t\tif (affiliation_code) {\n\t\t\tvalues.referral = affiliation_code;\n\t\t}\n\t\treturn performSignup(values)\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ success: true });\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst errors = {};\n\t\t\t\tthis.props.change(FORM_NAME, 'captcha', '');\n\t\t\t\tif (error.response.status === 409) {\n\t\t\t\t\terrors.email = STRINGS.VALIDATIONS.USER_EXIST;\n\t\t\t\t} else if (error.response) {\n\t\t\t\t\tconst { message = '' } = error.response.data;\n\t\t\t\t\tif (message.toLowerCase().indexOf('password') > -1) {\n\t\t\t\t\t\t// TODO set error in constants for language\n\t\t\t\t\t\terrors.password = STRINGS.VALIDATIONS.INVALID_PASSWORD;\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors._error = message || error.message;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\terrors._error = error.message;\n\t\t\t\t}\n\t\t\t\tthrow new SubmissionError(errors);\n\t\t\t});\n\t};\n\n\tonOpenDialog = () => {\n\t\tthis.setState({ showContactForm: true });\n\t};\n\n\tonCloseDialog = () => {\n\t\tthis.setState({ showContactForm: false });\n\t};\n\n\tonGoBack = () => {\n\t\tthis.props.router.push(`/login`);\n\t};\n\n\tonBackActiveEmail = () => {\n\t\t\t\tthis.setState({ success: false });\n\t};\n\n\trender() {\n\t\tconst { languageClasses, activeTheme } = this.props;\n\t\tconst { success, showContactForm } = this.state;\n\n\t\tif (success) {\n\t\t\treturn <div>\n\t\t\t{isMobile  && <MobileBarBack onBackClick={this.onBackActiveEmail} />}\n\t\t\t<SignupSuccess activeTheme={activeTheme} /></div>\n\t\t}\n\n\t\tconst formFields = generateFormFields(STRINGS, activeTheme);\n\n\t\treturn (\n\t\t\t<div className={classnames(...FLEX_CENTER_CLASSES, 'flex-column', 'f-1')}>\n\t\t\t\t{isMobile && !showContactForm && <MobileBarBack onBackClick={this.onGoBack} />}\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t...FLEX_CENTER_CLASSES,\n\t\t\t\t\t\t'flex-column',\n\t\t\t\t\t\t'auth_wrapper',\n\t\t\t\t\t\t'w-100'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<IconTitle\n\t\t\t\t\t\ticonPath={HOLLAEX_LOGO}\n\t\t\t\t\t\ttext={STRINGS.SIGNUP_TEXT}\n\t\t\t\t\t\ttextType=\"title\"\n\t\t\t\t\t\tunderline={true}\n\t\t\t\t\t\tuseSvg={true}\n\t\t\t\t\t\tclassName=\"w-100 exir-logo\"\n\t\t\t\t\t\tsubtitle={STRINGS.formatString(\n\t\t\t\t\t\t\tSTRINGS.SIGN_UP.SIGNUP_TO,\n\t\t\t\t\t\t\tSTRINGS.APP_TITLE\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tactionProps={{\n\t\t\t\t\t\t\ttext: STRINGS.HELP_TEXT,\n\t\t\t\t\t\t\ticonPath: ICONS.BLUE_QUESTION,\n\t\t\t\t\t\t\tonClick: this.onOpenDialog,\n\t\t\t\t\t\t\tuseSvg: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t...FLEX_CENTER_CLASSES,\n\t\t\t\t\t\t\t'flex-column',\n\t\t\t\t\t\t\t'auth_form-wrapper',\n\t\t\t\t\t\t\t'w-100'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SignupForm\n\t\t\t\t\t\t\tonSubmit={this.onSubmitSignup}\n\t\t\t\t\t\t\tformFields={formFields}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{isMobile && <BottomLinks />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{!isMobile && <BottomLinks />}\n\t\t\t\t<Dialog\n\t\t\t\t\tisOpen={showContactForm}\n\t\t\t\t\tlabel=\"contact-modal\"\n\t\t\t\t\tonCloseDialog={this.onCloseDialog}\n\t\t\t\t\tshouldCloseOnOverlayClick={false}\n\t\t\t\t\tstyle={{ 'z-index': 100 }}\n\t\t\t\t\tclassName={classnames(languageClasses)}\n\t\t\t\t\tshowCloseText={false}\n\t\t\t\t\ttheme={activeTheme}\n\t\t\t\t>\n\t\t\t\t\t<ContactForm\n\t\t\t\t\t\tonSubmitSuccess={this.onCloseDialog}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (store) => ({\n\tactiveTheme: store.app.theme\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\tchange: bindActionCreators(change, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signup);\n"]},"metadata":{},"sourceType":"module"}