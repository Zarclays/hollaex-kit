{"ast":null,"code":"import _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/components/Chart/Charts/DonutChart.js\";\nimport React, { Component, Fragment } from 'react';\nimport { pie, arc } from 'd3-shape';\nimport { Link } from 'react-router';\nimport classnames from 'classnames';\nimport STRINGS from '../../../config/localizedStrings';\nimport { BASE_CURRENCY } from '../../../config/constants';\nvar colors_currencies = {\n  eur: '#00a651',\n  btc: '#f7941e',\n  bch: '#9ec51e',\n  eth: '#2e3192',\n  ltc: '#58595b',\n  noData: '#cccbcb'\n};\n\nfunction translate(x, y) {\n  return \"translate(\".concat(x, \", \").concat(y, \")\");\n} // function rotate (d) {\n//     return `rotate(${180 / Math.PI * (d.startAngle + d.endAngle) / 2 + 45})`;\n// };\n\n\nvar DonutChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DonutChart, _Component);\n\n  function DonutChart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DonutChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DonutChart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      width: 0,\n      height: 0,\n      isData: true,\n      hoverId: '',\n      higherId: ''\n    };\n\n    _this.checkData = function () {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var largerValue = 0;\n      var largerId = '';\n      data.forEach(function (value) {\n        if (parseFloat(value.balancePercentage) > largerValue) {\n          largerId = value.symbol;\n          largerValue = parseFloat(value.balancePercentage);\n        }\n      });\n\n      _this.setState({\n        higherId: largerId,\n        hoverId: largerId\n      });\n\n      var checkFilter = data.filter(function (value) {\n        return value.balance > 0;\n      });\n      return !!checkFilter.length;\n    };\n\n    _this.handleHover = function (symbol) {\n      _this.setState({\n        hoverId: symbol\n      });\n    };\n\n    _this.handleOut = function () {\n      _this.setState({\n        hoverId: _this.state.higherId\n      });\n    };\n\n    _this.renderSlice = function (value, i, width, height) {\n      var data = value.data;\n      var minViewportSize = Math.min(width, height);\n      var activeSlice = _this.state.hoverId === data.symbol;\n      var radius = _this.state.isData ? minViewportSize * 0.9 / 3.2 : minViewportSize * 0.9 / 2;\n      var innerRadius = radius * 0.6;\n      var outerRadius = radius;\n      var labelRadious = radius + 30;\n      var cornerRadius = 0;\n\n      if (activeSlice) {\n        innerRadius += 5;\n        outerRadius += 5;\n        labelRadious += 5;\n      }\n\n      var arcj = arc().innerRadius(innerRadius).outerRadius(outerRadius).cornerRadius(cornerRadius);\n      var centriod = arcj.centroid(value),\n          x = centriod[0],\n          y = centriod[1],\n          // pythagorean theorem for hypotenuse\n      hypotenuse = Math.sqrt(x * x + y * y);\n      var valX = x / hypotenuse * labelRadious;\n      var valY = y / hypotenuse * labelRadious;\n\n      if (!_this.state.isData) {\n        return React.createElement(\"g\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }, React.createElement(\"path\", {\n          d: arcj(value),\n          fill: colors_currencies.noData,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183\n          },\n          __self: this\n        }), React.createElement(\"text\", {\n          transform: translate(0, -10),\n          dy: \".35em\",\n          className: \"donut-label-no-price\",\n          textAnchor: \"middle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(\"tspan\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, STRINGS.ZERO_ASSET)), React.createElement(\"text\", {\n          transform: translate(0, 10),\n          dy: \".35em\",\n          className: \"donut-label-no-price\",\n          textAnchor: \"middle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/wallet\",\n          className: \"deposite-asset\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, STRINGS.DEPOSIT_ASSETS.toUpperCase())));\n      } else if (data.balance > 0) {\n        var _ref = _this.props.coins[data.symbol || BASE_CURRENCY] || {},\n            _ref$symbol = _ref.symbol,\n            symbol = _ref$symbol === void 0 ? '' : _ref$symbol;\n\n        return React.createElement(\"g\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, React.createElement(\"path\", {\n          d: arcj(value),\n          className: classnames(\"chart_\".concat(data.symbol), {\n            slice_active: activeSlice\n          }),\n          onMouseOver: function onMouseOver() {\n            return _this.handleHover(data.symbol);\n          },\n          onMouseOut: _this.handleOut,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }), activeSlice ? React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, React.createElement(\"text\", {\n          transform: translate(valX, valY),\n          dy: \"20px\",\n          textAnchor: \"middle\",\n          className: \"donut-label-percentage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, data.balancePercentage), React.createElement(\"text\", {\n          transform: translate(valX, valY - 12),\n          dy: \"20px\",\n          textAnchor: \"middle\",\n          className: \"donut-label-pair\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226\n          },\n          __self: this\n        }, symbol.toUpperCase())) : null);\n      } else {\n        return null;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(DonutChart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var donutContainer = document.getElementById('donut-container');\n      var rect = donutContainer.getBoundingClientRect();\n      var checkFilter = this.checkData(this.props.chartData);\n      this.setState({\n        width: rect.width,\n        height: rect.height,\n        isData: checkFilter\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (JSON.stringify(this.props.chartData) !== JSON.stringify(nextProps.chartData)) {\n        this.setState({\n          isData: this.checkData(nextProps.chartData)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          width = _this$state.width,\n          height = _this$state.height,\n          isData = _this$state.isData;\n      var data = isData ? this.props.chartData : [{\n        balance: 100\n      }];\n      var pieJ = pie().value(function (d) {\n        return d.balance;\n      });\n      var pieData = [];\n      pieJ(data).map(function (pieValue, i) {\n        if (pieValue.value !== 0) {\n          pieData.push(pieValue);\n        }\n\n        return null;\n      });\n\n      var pieMax = _toConsumableArray(pieData.sort(function (a, b) {\n        return b.data.balance - a.data.balance;\n      }));\n\n      var pieMin = pieMax.splice(pieMax.length / 2, pieMax.length);\n      pieMin = pieMin.sort(function (a, b) {\n        return a.data.balance - b.data.balance;\n      });\n      var temp = pieMax.length > pieMin.length ? pieMax : pieMin;\n      var sortedData = [];\n      var count = -1;\n      var nextStartAngle = 0;\n      temp.map(function (value, index) {\n        if (pieMax[index]) {\n          count += 1;\n          var maxData = pieMax[index];\n          var tempData = pieData.filter(function (val) {\n            return val.index === count;\n          })[0];\n          var diffangle = maxData.endAngle - maxData.startAngle;\n          sortedData = [].concat(_toConsumableArray(sortedData), [_objectSpread({}, tempData, {\n            startAngle: nextStartAngle,\n            endAngle: nextStartAngle + diffangle,\n            data: maxData.data,\n            value: maxData.value\n          })]);\n          nextStartAngle += diffangle;\n        }\n\n        if (pieMin[index]) {\n          count += 1;\n          var minData = pieMin[index];\n          var _tempData = pieData.filter(function (val) {\n            return val.index === count;\n          })[0];\n\n          var _diffangle = minData.endAngle - minData.startAngle;\n\n          sortedData = [].concat(_toConsumableArray(sortedData), [_objectSpread({}, _tempData, {\n            startAngle: nextStartAngle,\n            endAngle: nextStartAngle + _diffangle,\n            data: minData.data,\n            value: minData.value\n          })]);\n          nextStartAngle += _diffangle;\n        }\n\n        return '';\n      });\n      var x = width / 2;\n      var y = height / 2 - 15;\n      return React.createElement(\"div\", {\n        id: \"donut-container\",\n        className: \"w-100 h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        width: \"100%\",\n        height: \"100%\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"g\", {\n        transform: translate(x, y),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, sortedData.map(function (value, i) {\n        return _this2.renderSlice(value, i, width, height);\n      }))));\n    }\n  }]);\n\n  return DonutChart;\n}(Component);\n\nexport default DonutChart;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/components/Chart/Charts/DonutChart.js"],"names":["React","Component","Fragment","pie","arc","Link","classnames","STRINGS","BASE_CURRENCY","colors_currencies","eur","btc","bch","eth","ltc","noData","translate","x","y","DonutChart","state","width","height","isData","hoverId","higherId","checkData","data","largerValue","largerId","forEach","value","parseFloat","balancePercentage","symbol","setState","checkFilter","filter","balance","length","handleHover","handleOut","renderSlice","i","minViewportSize","Math","min","activeSlice","radius","innerRadius","outerRadius","labelRadious","cornerRadius","arcj","centriod","centroid","hypotenuse","sqrt","valX","valY","ZERO_ASSET","DEPOSIT_ASSETS","toUpperCase","props","coins","slice_active","donutContainer","document","getElementById","rect","getBoundingClientRect","chartData","nextProps","JSON","stringify","pieJ","d","pieData","map","pieValue","push","pieMax","sort","a","b","pieMin","splice","temp","sortedData","count","nextStartAngle","index","maxData","tempData","val","diffangle","endAngle","startAngle","minData"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { pie, arc } from 'd3-shape';\nimport { Link } from 'react-router';\nimport classnames from 'classnames';\n\nimport STRINGS from '../../../config/localizedStrings';\nimport { BASE_CURRENCY } from '../../../config/constants';\n\nconst colors_currencies = {\n\teur: '#00a651',\n\tbtc: '#f7941e',\n\tbch: '#9ec51e',\n\teth: '#2e3192',\n\tltc: '#58595b',\n\tnoData: '#cccbcb'\n};\n\nfunction translate(x, y) {\n\treturn `translate(${x}, ${y})`;\n}\n\n// function rotate (d) {\n//     return `rotate(${180 / Math.PI * (d.startAngle + d.endAngle) / 2 + 45})`;\n// };\n\nclass DonutChart extends Component {\n\tstate = {\n\t\twidth: 0,\n\t\theight: 0,\n\t\tisData: true,\n\t\thoverId: '',\n\t\thigherId: ''\n\t};\n\n\tcomponentDidMount() {\n\t\tconst donutContainer = document.getElementById('donut-container');\n\t\tconst rect = donutContainer.getBoundingClientRect();\n\t\tconst checkFilter = this.checkData(this.props.chartData);\n\t\tthis.setState({\n\t\t\twidth: rect.width,\n\t\t\theight: rect.height,\n\t\t\tisData: checkFilter\n\t\t});\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tJSON.stringify(this.props.chartData) !==\n\t\t\tJSON.stringify(nextProps.chartData)\n\t\t) {\n\t\t\tthis.setState({ isData: this.checkData(nextProps.chartData) });\n\t\t}\n\t}\n\n\tcheckData = (data = []) => {\n\t\tlet largerValue = 0;\n\t\tlet largerId = '';\n\t\tdata.forEach((value) => {\n\t\t\tif (parseFloat(value.balancePercentage) > largerValue) {\n\t\t\t\tlargerId = value.symbol;\n\t\t\t\tlargerValue = parseFloat(value.balancePercentage);\n\t\t\t}\n\t\t});\n\t\tthis.setState({ higherId: largerId, hoverId: largerId });\n\n\t\tconst checkFilter = data.filter((value) => value.balance > 0);\n\t\treturn !!checkFilter.length;\n\t};\n\n\thandleHover = (symbol) => {\n\t\tthis.setState({ hoverId: symbol });\n\t};\n\n\thandleOut = () => {\n\t\tthis.setState({ hoverId: this.state.higherId });\n\t};\n\n\trender() {\n\t\tconst { width, height, isData } = this.state;\n\t\tconst data = isData ? this.props.chartData : [{ balance: 100 }];\n\t\tlet pieJ = pie().value(function(d) {\n\t\t\treturn d.balance;\n\t\t});\n\t\tconst pieData = [];\n\t\tpieJ(data).map((pieValue, i) => {\n\t\t\tif (pieValue.value !== 0) {\n\t\t\t\tpieData.push(pieValue);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t\tconst pieMax = [\n\t\t\t...pieData.sort((a, b) => b.data.balance - a.data.balance)\n\t\t];\n\t\tlet pieMin = pieMax.splice(pieMax.length / 2, pieMax.length);\n\t\tpieMin = pieMin.sort((a, b) => a.data.balance - b.data.balance);\n\t\tlet temp = pieMax.length > pieMin.length ? pieMax : pieMin;\n\t\tlet sortedData = [];\n\t\tlet count = -1;\n\t\tlet nextStartAngle = 0;\n\t\ttemp.map((value, index) => {\n\t\t\tif (pieMax[index]) {\n\t\t\t\tcount += 1;\n\t\t\t\tlet maxData = pieMax[index];\n\t\t\t\tlet tempData = pieData.filter((val) => val.index === count)[0];\n\t\t\t\tlet diffangle = maxData.endAngle - maxData.startAngle;\n\t\t\t\tsortedData = [\n\t\t\t\t\t...sortedData,\n\t\t\t\t\t{\n\t\t\t\t\t\t...tempData,\n\t\t\t\t\t\tstartAngle: nextStartAngle,\n\t\t\t\t\t\tendAngle: nextStartAngle + diffangle,\n\t\t\t\t\t\tdata: maxData.data,\n\t\t\t\t\t\tvalue: maxData.value\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tnextStartAngle += diffangle;\n\t\t\t}\n\t\t\tif (pieMin[index]) {\n\t\t\t\tcount += 1;\n\t\t\t\tlet minData = pieMin[index];\n\t\t\t\tlet tempData = pieData.filter((val) => val.index === count)[0];\n\t\t\t\tlet diffangle = minData.endAngle - minData.startAngle;\n\t\t\t\tsortedData = [\n\t\t\t\t\t...sortedData,\n\t\t\t\t\t{\n\t\t\t\t\t\t...tempData,\n\t\t\t\t\t\tstartAngle: nextStartAngle,\n\t\t\t\t\t\tendAngle: nextStartAngle + diffangle,\n\t\t\t\t\t\tdata: minData.data,\n\t\t\t\t\t\tvalue: minData.value\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t\tnextStartAngle += diffangle;\n\t\t\t}\n\t\t\treturn '';\n\t\t});\n\t\tlet x = width / 2;\n\t\tlet y = height / 2 - 15;\n\n\t\treturn (\n\t\t\t<div id=\"donut-container\" className=\"w-100 h-100\">\n\t\t\t\t<svg width=\"100%\" height=\"100%\">\n\t\t\t\t\t<g transform={translate(x, y)}>\n\t\t\t\t\t\t{sortedData.map((value, i) => {\n\t\t\t\t\t\t\treturn this.renderSlice(value, i, width, height);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSlice = (value, i, width, height) => {\n\t\tlet data = value.data;\n\t\tlet minViewportSize = Math.min(width, height);\n\t\tlet activeSlice = this.state.hoverId === data.symbol;\n\t\tlet radius = this.state.isData\n\t\t\t? (minViewportSize * 0.9) / 3.2\n\t\t\t: (minViewportSize * 0.9) / 2;\n\t\tlet innerRadius = radius * 0.6;\n\t\tlet outerRadius = radius;\n\t\tlet labelRadious = radius + 30;\n\t\tlet cornerRadius = 0;\n\t\tif (activeSlice) {\n\t\t\tinnerRadius += 5;\n\t\t\touterRadius += 5;\n\t\t\tlabelRadious += 5;\n\t\t }\n\t\tlet arcj = arc()\n\t\t\t.innerRadius(innerRadius)\n\t\t\t.outerRadius(outerRadius)\n\t\t\t.cornerRadius(cornerRadius);\n\t\tlet centriod = arcj.centroid(value),\n\t\t\tx = centriod[0],\n\t\t\ty = centriod[1],\n\t\t\t// pythagorean theorem for hypotenuse\n\t\t\thypotenuse = Math.sqrt(x * x + y * y);\n\t\tlet valX = (x / hypotenuse) * labelRadious;\n\t\tlet valY = (y / hypotenuse) * labelRadious;\n\t\tif (!this.state.isData) {\n\t\t\treturn (\n\t\t\t\t<g key={i}>\n\t\t\t\t\t<path d={arcj(value)} fill={colors_currencies.noData} />\n\t\t\t\t\t<text\n\t\t\t\t\t\ttransform={translate(0, -10)}\n\t\t\t\t\t\tdy=\".35em\"\n\t\t\t\t\t\tclassName=\"donut-label-no-price\"\n\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<tspan>{STRINGS.ZERO_ASSET}</tspan>\n\t\t\t\t\t</text>\n\t\t\t\t\t<text\n\t\t\t\t\t\ttransform={translate(0, 10)}\n\t\t\t\t\t\tdy=\".35em\"\n\t\t\t\t\t\tclassName=\"donut-label-no-price\"\n\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Link to=\"/wallet\" className=\"deposite-asset\">\n\t\t\t\t\t\t\t{STRINGS.DEPOSIT_ASSETS.toUpperCase()}\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t);\n\t\t} else if (data.balance > 0) {\n\t\t\tconst { symbol = '' } = this.props.coins[data.symbol || BASE_CURRENCY] || {};\n\t\t\treturn (\n\t\t\t\t<g key={i}>\n\t\t\t\t\t<path\n\t\t\t\t\t\td={arcj(value)}\n\t\t\t\t\t\tclassName={classnames(`chart_${data.symbol}`, {\n\t\t\t\t\t\t\tslice_active: activeSlice\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonMouseOver={() => this.handleHover(data.symbol)}\n\t\t\t\t\t\tonMouseOut={this.handleOut}\n\t\t\t\t\t/>\n\t\t\t\t\t{activeSlice ? (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\ttransform={translate(valX, valY)}\n\t\t\t\t\t\t\t\tdy=\"20px\"\n\t\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\t\tclassName=\"donut-label-percentage\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{data.balancePercentage}\n\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\ttransform={translate(valX, valY - 12)}\n\t\t\t\t\t\t\t\tdy=\"20px\"\n\t\t\t\t\t\t\t\ttextAnchor=\"middle\"\n\t\t\t\t\t\t\t\tclassName=\"donut-label-pair\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{symbol.toUpperCase()}\n\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) : null}\n\t\t\t\t</g>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\nexport default DonutChart;\n"]},"metadata":{},"sourceType":"module"}