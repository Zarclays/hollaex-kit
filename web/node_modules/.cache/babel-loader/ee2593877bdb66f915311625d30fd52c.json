{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Account/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { isMobile } from 'react-device-detect';\nimport { CheckTitle, MobileBarTabs, Loader } from '../../components';\nimport { ICONS } from '../../config/constants';\nimport { UserSecurity, UserSettings, Summary, Verification } from '../';\nimport STRINGS from '../../config/localizedStrings';\nimport { openContactForm } from '../../actions/appActions';\n\nvar getInitialTab = function getInitialTab(_ref) {\n  var name = _ref.name,\n      path = _ref.path;\n  var activeTab = -1;\n  var activeDevelopers = false;\n\n  if (path === 'account') {\n    activeTab = 0;\n  } else if (path === 'summary') {\n    activeTab = 0;\n  } else if (path === 'security') {\n    activeTab = 1;\n  } else if (path === 'developers') {\n    activeTab = 1;\n    activeDevelopers = true;\n  } else if (path === 'verification') {\n    activeTab = 2;\n  } else if (path === 'settings') {\n    activeTab = 3;\n    activeDevelopers = true;\n  } else if (path === 'account/settings/username') {\n    activeTab = 3;\n    activeDevelopers = true;\n  }\n\n  return {\n    activeTab: activeTab,\n    activeDevelopers: activeDevelopers\n  };\n};\n\nvar Account =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Account, _Component);\n\n  function Account() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Account);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Account)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      activeTab: -1,\n      tabs: []\n    };\n\n    _this.hasUserVerificationNotifications = function (verification_level) {\n      var bank_account = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var id_data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (verification_level >= 2 && bank_account.verified && id_data.status === 3) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.updateTabs = function (_ref2) {\n      var verification_level = _ref2.verification_level,\n          otp_enabled = _ref2.otp_enabled,\n          bank_account = _ref2.bank_account,\n          id_data = _ref2.id_data,\n          full_name = _ref2.full_name,\n          phone_number = _ref2.phone_number,\n          route = _ref2.route,\n          location = _ref2.location;\n      var updateActiveTab = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var activeTab = _this.state.activeTab > -1 ? _this.state.activeTab : 0;\n      var activeDevelopers = false;\n\n      if (updateActiveTab || _this.state.activeTab === -1) {\n        var initialValues = getInitialTab(route);\n        activeTab = initialValues.activeTab;\n        activeDevelopers = initialValues.activeDevelopers;\n      }\n\n      var verificationPending = false;\n\n      if (verification_level < 1 && !full_name) {\n        verificationPending = true;\n      } else if (id_data.status === 0 || id_data.status === 2) {\n        verificationPending = true;\n      } else if (!phone_number) {\n        verificationPending = true;\n      } else if (!bank_account.filter(function (acc) {\n        return acc.status === 0 || acc.status === 2;\n      }).length) {\n        verificationPending = true;\n      }\n\n      var tabs = [{\n        title: isMobile ? STRINGS.SUMMARY.TITLE : React.createElement(CheckTitle, {\n          title: STRINGS.SUMMARY.TITLE,\n          icon: ICONS.TAB_SUMMARY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }),\n        content: React.createElement(Summary, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        })\n      }, {\n        title: isMobile ? STRINGS.ACCOUNTS.TAB_SECURITY : React.createElement(CheckTitle, {\n          title: STRINGS.ACCOUNTS.TAB_SECURITY,\n          icon: ICONS.SECURITY_GREY,\n          notifications: !otp_enabled ? '!' : '',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }),\n        notifications: !otp_enabled ? '!' : '',\n        content: React.createElement(UserSecurity, {\n          openApiKey: activeDevelopers,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        })\n      }, {\n        title: isMobile ? STRINGS.ACCOUNTS.TAB_VERIFICATION : React.createElement(CheckTitle, {\n          title: STRINGS.ACCOUNTS.TAB_VERIFICATION,\n          icon: ICONS.TAB_SUMMARY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }),\n        notifications: verificationPending ? '!' : '',\n        content: React.createElement(Verification, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        })\n      }, {\n        title: isMobile ? STRINGS.ACCOUNTS.TAB_SETTINGS : React.createElement(CheckTitle, {\n          title: STRINGS.ACCOUNTS.TAB_SETTINGS,\n          icon: ICONS.GEAR_GREY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }),\n        content: React.createElement(UserSettings, {\n          location: location,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        })\n      }];\n\n      _this.setState({\n        tabs: tabs,\n        activeTab: activeTab\n      });\n    };\n\n    _this.setActiveTab = function (activeTab) {\n      _this.setState({\n        activeTab: activeTab\n      });\n    };\n\n    _this.renderContent = function (tabs, activeTab) {\n      return tabs[activeTab].content;\n    };\n\n    _this.openContactForm = function (data) {\n      _this.props.openContactForm(data);\n    };\n\n    _this.goToVerification = function () {\n      return _this.props.router.push('/verification');\n    };\n\n    return _this;\n  }\n\n  _createClass(Account, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.id) {\n        this.updateTabs(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.id !== this.props.id || nextProps.verification_level !== this.props.verification_level || nextProps.otp_enabled !== this.props.otp_enabled || nextProps.activeLanguage !== this.props.activeLanguage) {\n        this.updateTabs(nextProps, false);\n      } else if (nextProps.route.path !== this.props.route.path) {\n        this.updateTabs(nextProps, true);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var id = this.props.id;\n      var _this$state = this.state,\n          activeTab = _this$state.activeTab,\n          tabs = _this$state.tabs;\n\n      if (!id || activeTab === -1) {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        });\n      }\n\n      return isMobile ? React.createElement(\"div\", {\n        className: \"apply_rtl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(MobileBarTabs, {\n        tabs: tabs,\n        activeTab: activeTab,\n        setActiveTab: this.setActiveTab,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"presentation_container apply_rtl content-with-bar overflow-y\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"inner_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, activeTab > -1 && this.renderContent(tabs, activeTab)))) : React.createElement(\"div\", {\n        className: \"presentation_container apply_rtl\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"inner_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, activeTab > -1 && this.renderContent(tabs, activeTab)));\n    }\n  }]);\n\n  return Account;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    user: state.user,\n    verification_level: state.user.verification_level,\n    otp_enabled: state.user.otp_enabled || false,\n    id: state.user.id,\n    bank_account: state.user.userData.bank_account,\n    id_data: state.user.userData.id_data,\n    phone_number: state.user.userData.phone_number,\n    full_name: state.user.userData.full_name,\n    activeLanguage: state.app.language\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    openContactForm: bindActionCreators(openContactForm, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Account/index.js"],"names":["React","Component","connect","bindActionCreators","isMobile","CheckTitle","MobileBarTabs","Loader","ICONS","UserSecurity","UserSettings","Summary","Verification","STRINGS","openContactForm","getInitialTab","name","path","activeTab","activeDevelopers","Account","state","tabs","hasUserVerificationNotifications","verification_level","bank_account","id_data","verified","status","updateTabs","otp_enabled","full_name","phone_number","route","location","updateActiveTab","initialValues","verificationPending","filter","acc","length","title","SUMMARY","TITLE","TAB_SUMMARY","content","ACCOUNTS","TAB_SECURITY","SECURITY_GREY","notifications","TAB_VERIFICATION","TAB_SETTINGS","GEAR_GREY","setState","setActiveTab","renderContent","data","props","goToVerification","router","push","id","nextProps","activeLanguage","mapStateToProps","user","userData","app","language","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { isMobile } from 'react-device-detect';\n\nimport { CheckTitle, MobileBarTabs, Loader } from '../../components';\nimport { ICONS } from '../../config/constants';\nimport { UserSecurity, UserSettings, Summary, Verification } from '../';\nimport STRINGS from '../../config/localizedStrings';\nimport { openContactForm } from '../../actions/appActions';\n\nconst getInitialTab = ({ name, path }) => {\n\tlet activeTab = -1;\n\tlet activeDevelopers = false;\n\tif (path === 'account') {\n\t\tactiveTab = 0;\n\t} else if (path === 'summary') {\n\t\tactiveTab = 0;\n\t} else if (path === 'security') {\n\t\tactiveTab = 1;\n\t} else if (path === 'developers') {\n\t\tactiveTab = 1;\n\t\tactiveDevelopers = true;\n\t} else if (path === 'verification') {\n\t\tactiveTab = 2;\n\t} else if (path === 'settings') {\n\t\tactiveTab = 3;\n\t\tactiveDevelopers = true;\n\t} else if (path === 'account/settings/username') {\n\t\tactiveTab = 3;\n\t\tactiveDevelopers = true;\n\t}\n\treturn {\n\t\tactiveTab,\n\t\tactiveDevelopers\n\t};\n};\n\nclass Account extends Component {\n\tstate = {\n\t\tactiveTab: -1,\n\t\ttabs: []\n\t};\n\n\tcomponentDidMount() {\n\t\tif (this.props.id) {\n\t\t\tthis.updateTabs(this.props);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tnextProps.id !== this.props.id ||\n\t\t\tnextProps.verification_level !== this.props.verification_level ||\n\t\t\tnextProps.otp_enabled !== this.props.otp_enabled ||\n\t\t\tnextProps.activeLanguage !== this.props.activeLanguage\n\t\t) {\n\t\t\tthis.updateTabs(nextProps, false);\n\t\t} else if (nextProps.route.path !== this.props.route.path) {\n\t\t\tthis.updateTabs(nextProps, true);\n\t\t} \n\t}\n\n\thasUserVerificationNotifications = (\n\t\tverification_level,\n\t\tbank_account = {},\n\t\tid_data = {}\n\t) => {\n\t\tif (verification_level >= 2 && bank_account.verified && id_data.status === 3) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tupdateTabs = (\n\t\t{ verification_level, otp_enabled, bank_account, id_data, full_name, phone_number, route, location },\n\t\tupdateActiveTab = false\n\t) => {\n\t\tlet activeTab = this.state.activeTab > -1 ? this.state.activeTab : 0;\n\t\tlet activeDevelopers = false;\n\n\t\tif (updateActiveTab || this.state.activeTab === -1) {\n\t\t\tconst initialValues = getInitialTab(route);\n\t\t\tactiveTab = initialValues.activeTab;\n\t\t\tactiveDevelopers = initialValues.activeDevelopers;\n\t\t}\n\t\tlet verificationPending = false;\n\t\tif (verification_level < 1 && !full_name) {\n\t\t\tverificationPending = true;\n\t\t} else if (id_data.status === 0 || id_data.status === 2) {\n\t\t\tverificationPending = true;\n\t\t} else if (!phone_number) {\n\t\t\tverificationPending = true;\n\t\t} else if (!bank_account.filter(acc => acc.status === 0 || acc.status === 2).length) {\n\t\t\tverificationPending = true;\n\t\t}\n\n\t\tconst tabs = [\n\t\t\t{\n\t\t\t\ttitle: isMobile ? (\n\t\t\t\t\tSTRINGS.SUMMARY.TITLE\n\t\t\t\t) : (\n\t\t\t\t\t\t<CheckTitle\n\t\t\t\t\t\t\ttitle={STRINGS.SUMMARY.TITLE}\n\t\t\t\t\t\t\ticon={ICONS.TAB_SUMMARY}\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\tcontent: <Summary />\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: isMobile ? (\n\t\t\t\t\tSTRINGS.ACCOUNTS.TAB_SECURITY\n\t\t\t\t) : (\n\t\t\t\t\t<CheckTitle\n\t\t\t\t\t\ttitle={STRINGS.ACCOUNTS.TAB_SECURITY}\n\t\t\t\t\t\ticon={ICONS.SECURITY_GREY}\n\t\t\t\t\t\tnotifications={!otp_enabled ? '!' : ''}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tnotifications: !otp_enabled ? '!' : '',\n\t\t\t\tcontent: <UserSecurity openApiKey={activeDevelopers} />\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: isMobile ? (\n\t\t\t\t\tSTRINGS.ACCOUNTS.TAB_VERIFICATION\n\t\t\t\t) : (\n\t\t\t\t\t\t<CheckTitle\n\t\t\t\t\t\t\ttitle={STRINGS.ACCOUNTS.TAB_VERIFICATION}\n\t\t\t\t\t\t\ticon={ICONS.TAB_SUMMARY}\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\tnotifications: verificationPending ? '!' : '',\n\t\t\t\tcontent: <Verification />\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: isMobile ? (\n\t\t\t\t\tSTRINGS.ACCOUNTS.TAB_SETTINGS\n\t\t\t\t) : (\n\t\t\t\t\t<CheckTitle\n\t\t\t\t\t\ttitle={STRINGS.ACCOUNTS.TAB_SETTINGS}\n\t\t\t\t\t\ticon={ICONS.GEAR_GREY}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tcontent: <UserSettings location={location} />\n\t\t\t}\n\t\t];\n\t\tthis.setState({ tabs, activeTab });\n\t};\n\n\tsetActiveTab = (activeTab) => {\n\t\tthis.setState({ activeTab });\n\t};\n\n\trenderContent = (tabs, activeTab) => tabs[activeTab].content;\n\n\topenContactForm = (data) => {\n\t\tthis.props.openContactForm(data);\n\t};\n\tgoToVerification = () => this.props.router.push('/verification');\n\n\trender() {\n\t\tconst { id } = this.props;\n\t\tconst { activeTab, tabs } = this.state;\n\n\t\tif (!id || activeTab === -1) {\n\t\t\treturn <Loader />;\n\t\t}\n\n\t\treturn isMobile ? (\n\t\t\t<div className=\"apply_rtl\">\n\t\t\t\t<MobileBarTabs\n\t\t\t\t\ttabs={tabs}\n\t\t\t\t\tactiveTab={activeTab}\n\t\t\t\t\tsetActiveTab={this.setActiveTab}\n\t\t\t\t/>\n\t\t\t\t<div className=\"presentation_container apply_rtl content-with-bar overflow-y\">\n\t\t\t\t\t<div className=\"inner_container\">\n\t\t\t\t\t\t{activeTab > -1 && this.renderContent(tabs, activeTab)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t<div className=\"presentation_container apply_rtl\">\n\t\t\t\t{/* <TabController\n\t\t\t\t\tactiveTab={activeTab}\n\t\t\t\t\tsetActiveTab={this.setActiveTab}\n\t\t\t\t\ttabs={tabs}\n\t\t\t\t\ttitle={STRINGS.ACCOUNTS.TITLE}\n\t\t\t\t\ttitleIcon={ICONS.ACCOUNT_LINE}\n\t\t\t\t\tclassName=\"account-tab\"\n\t\t\t\t/> */}\n\t\t\t\t<div className=\"inner_container\">\n\t\t\t\t\t{activeTab > -1 && this.renderContent(tabs, activeTab)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => ({\n\tuser: state.user,\n\tverification_level: state.user.verification_level,\n\totp_enabled: state.user.otp_enabled || false,\n\tid: state.user.id,\n\tbank_account: state.user.userData.bank_account,\n\tid_data: state.user.userData.id_data,\n\tphone_number: state.user.userData.phone_number,\n\tfull_name: state.user.userData.full_name,\n\tactiveLanguage: state.app.language\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\topenContactForm: bindActionCreators(openContactForm, dispatch)\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Account);\n"]},"metadata":{},"sourceType":"module"}