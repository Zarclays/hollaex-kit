{"ast":null,"code":"import _defineProperty from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/UserProfile/index.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { ICONS } from '../../config/constants';\nimport { Accordion, Loader, Button } from '../../components';\nimport Form from './Form';\nimport { generateFormValues as generateMobileFormValues } from './MobileFormValues';\nimport { prepareInitialValues, generateFormValues as generateDataFormValues } from './IdentificationFormValues';\nimport { InformationSection } from './InformationSection';\nimport { LevelSection } from './LevelSection';\nimport { logout } from '../../actions/authAction';\nimport STRINGS from '../../config/localizedStrings';\nimport { isMobile } from 'react-device-detect';\nvar MobileForm = Form('MobileForm');\nvar InformationForm = Form('InformationForm');\n\nvar UserProfile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserProfile, _Component);\n\n  function UserProfile() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserProfile);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserProfile)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      sections: [],\n      dataFormValues: {},\n      mobileFormValues: {}\n    };\n\n    _this.generateNotification = function () {\n      var verified = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var provided = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var verifyText = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      return {\n        text: verified ? STRINGS.USER_VERIFICATION.COMPLETED : provided ? STRINGS.USER_VERIFICATION.PENDING_VERIFICATION : verifyText,\n        status: verified ? 'success' : provided ? 'information' : 'warning',\n        iconPath: verified ? ICONS.GREEN_CHECK : provided ? ICONS.BLUE_TIMER : ICONS.RED_ARROW,\n        allowClick: false\n      };\n    };\n\n    _this.calculateFormValues = function (language, verification_level, email, userData, limits, fees) {\n      var dataFormValues = generateDataFormValues(language, userData.nationality);\n      var mobileFormValues = generateMobileFormValues();\n\n      _this.setState({\n        dataFormValues: dataFormValues,\n        mobileFormValues: mobileFormValues\n      }, function () {\n        _this.calculateSections(verification_level, email, userData, limits, fees);\n      });\n    };\n\n    _this.renderGoToVerification = function () {\n      return React.createElement(InformationSection, {\n        onChangeText: STRINGS.USER_VERIFICATION.GOTO_VERIFICATION,\n        onChangeValue: _this.goToVerification,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      });\n    };\n\n    _this.calculateSections = function (verification_level, email, userData, limits, fees) {\n      var _this$state = _this.state,\n          dataFormValues = _this$state.dataFormValues,\n          mobileFormValues = _this$state.mobileFormValues;\n      var phone_number = userData.phone_number,\n          full_name = userData.full_name,\n          _userData$id_data = userData.id_data,\n          id_data = _userData$id_data === void 0 ? {} : _userData$id_data;\n      var sections = [{\n        title: STRINGS.USER_VERIFICATION.TITLE_EMAIL,\n        subtitle: email,\n        content: React.createElement(LevelSection, {\n          limits: limits,\n          verification_level: verification_level,\n          fees: fees,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(InformationSection, {\n          onChangeValue: _this.onOpenContactFormSelected('category', 'level'),\n          onChangeText: STRINGS.UPGRADE_LEVEL,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        })),\n        isOpen: true,\n        notification: _this.generateNotification(true, true, STRINGS.USER_VERIFICATION.VERIFY_EMAIL)\n      }, {\n        title: STRINGS.USER_VERIFICATION.TITLE_MOBILE_PHONE,\n        subtitle: phone_number,\n        content: phone_number ? React.createElement(MobileForm, {\n          initialValues: userData,\n          formValues: mobileFormValues,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(InformationSection, {\n          onChangeValue: _this.onOpenContactForm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        })) : _this.renderGoToVerification(),\n        notification: _this.generateNotification(!!phone_number, !!phone_number, STRINGS.USER_VERIFICATION.VERIFY_MOBILE_PHONE)\n      }, {\n        title: STRINGS.USER_VERIFICATION.TITLE_PERSONAL_INFORMATION,\n        subtitle: full_name,\n        content: full_name ? React.createElement(InformationForm, {\n          initialValues: prepareInitialValues(userData),\n          formValues: dataFormValues,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(InformationSection, {\n          text: verification_level === 1 ? STRINGS.USER_VERIFICATION.PENDING_VERIFICATION_PERSONAL_INFORMATION : '',\n          onChangeValue: _this.onOpenContactForm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        })) : _this.renderGoToVerification(),\n        notification: _this.generateNotification(verification_level > 1, !!full_name, STRINGS.USER_VERIFICATION.VERIFY_USER_DOCUMENTATION)\n      }, {\n        title: STRINGS.USER_VERIFICATION.TITLE_ID_DOCUMENTS,\n        content: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, id_data.provided ? React.createElement(InformationSection, {\n          text: id_data.type ? '' : STRINGS.USER_VERIFICATION.PENDING_VERIFICATION_DOCUMENTS,\n          onChangeValue: _this.onOpenContactForm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }) : _this.renderGoToVerification()),\n        disabled: id_data.verified,\n        notification: _this.generateNotification(id_data.verified, id_data.provided, STRINGS.USER_VERIFICATION.VERIFY_ID_DOCUMENTS)\n      }];\n\n      _this.setState({\n        sections: sections\n      });\n    };\n\n    _this.goToVerification = function () {\n      if (_this.props.goToVerification) {\n        _this.props.goToVerification();\n      }\n    };\n\n    _this.onOpenContactForm = function () {\n      if (_this.props.openContactForm) {\n        _this.props.openContactForm();\n      }\n    };\n\n    _this.onOpenContactFormSelected = function () {\n      var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      return function () {\n        if (_this.props.openContactForm) {\n          _this.props.openContactForm(_defineProperty({}, key, value));\n        }\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(UserProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.calculateFormValues(this.props.activeLanguage, this.props.verification_level, this.props.email, this.props.userData, this.props.limits, this.props.fees);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.activeLanguage !== this.props.activeLanguage) {\n        this.calculateFormValues(nextProps.activeLanguage, nextProps.verification_level, nextProps.email, nextProps.userData, nextProps.limits, nextProps.fees);\n        this.calculateSections(nextProps.verification_level, nextProps.email, nextProps.userData, nextProps.limits, nextProps.fees);\n      } else if (nextProps.verification_level !== this.props.verification_level || nextProps.userData.timestamp !== this.props.userData.timestamp || nextProps.limits.fetched !== this.props.limits.fetched || nextProps.fees.fetched !== this.props.fees.fetched) {\n        this.calculateSections(nextProps.verification_level, nextProps.email, nextProps.userData, nextProps.limits, nextProps.fees);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.props.id) {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239\n          },\n          __self: this\n        });\n      }\n\n      var sections = this.state.sections;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(Accordion, {\n        sections: sections,\n        allowMultiOpen: true,\n        wrapperId: \"app_container-main\",\n        doScroll: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }), isMobile && React.createElement(Button, {\n        label: STRINGS.LOGOUT,\n        onClick: function onClick() {\n          return _this2.props.logout();\n        },\n        className: \"mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UserProfile;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logout: bindActionCreators(logout, dispatch)\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    id: state.user.id,\n    verification_level: state.user.verification_level,\n    userData: state.user.userData,\n    email: state.user.email,\n    limits: state.user.limits,\n    fees: state.user.feeValues,\n    activeLanguage: state.app.language\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserProfile);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/UserProfile/index.js"],"names":["React","Component","connect","bindActionCreators","ICONS","Accordion","Loader","Button","Form","generateFormValues","generateMobileFormValues","prepareInitialValues","generateDataFormValues","InformationSection","LevelSection","logout","STRINGS","isMobile","MobileForm","InformationForm","UserProfile","state","sections","dataFormValues","mobileFormValues","generateNotification","verified","provided","verifyText","text","USER_VERIFICATION","COMPLETED","PENDING_VERIFICATION","status","iconPath","GREEN_CHECK","BLUE_TIMER","RED_ARROW","allowClick","calculateFormValues","language","verification_level","email","userData","limits","fees","nationality","setState","calculateSections","renderGoToVerification","GOTO_VERIFICATION","goToVerification","phone_number","full_name","id_data","title","TITLE_EMAIL","subtitle","content","onOpenContactFormSelected","UPGRADE_LEVEL","isOpen","notification","VERIFY_EMAIL","TITLE_MOBILE_PHONE","onOpenContactForm","VERIFY_MOBILE_PHONE","TITLE_PERSONAL_INFORMATION","PENDING_VERIFICATION_PERSONAL_INFORMATION","VERIFY_USER_DOCUMENTATION","TITLE_ID_DOCUMENTS","type","PENDING_VERIFICATION_DOCUMENTS","disabled","VERIFY_ID_DOCUMENTS","props","openContactForm","key","value","activeLanguage","nextProps","timestamp","fetched","id","LOGOUT","mapDispatchToProps","dispatch","mapStateToProps","user","feeValues","app"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { ICONS } from '../../config/constants';\nimport { Accordion, Loader, Button } from '../../components';\nimport Form from './Form';\nimport { generateFormValues as generateMobileFormValues } from './MobileFormValues';\nimport {\n\tprepareInitialValues,\n\tgenerateFormValues as generateDataFormValues\n} from './IdentificationFormValues';\nimport { InformationSection } from './InformationSection';\nimport { LevelSection } from './LevelSection';\nimport { logout } from '../../actions/authAction';\nimport STRINGS from '../../config/localizedStrings';\nimport { isMobile } from 'react-device-detect';\n\nconst MobileForm = Form('MobileForm');\nconst InformationForm = Form('InformationForm');\n\nclass UserProfile extends Component {\n\tstate = {\n\t\tsections: [],\n\t\tdataFormValues: {},\n\t\tmobileFormValues: {}\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.calculateFormValues(\n\t\t\tthis.props.activeLanguage,\n\t\t\tthis.props.verification_level,\n\t\t\tthis.props.email,\n\t\t\tthis.props.userData,\n\t\t\tthis.props.limits,\n\t\t\tthis.props.fees\n\t\t);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.activeLanguage !== this.props.activeLanguage) {\n\t\t\tthis.calculateFormValues(\n\t\t\t\tnextProps.activeLanguage,\n\t\t\t\tnextProps.verification_level,\n\t\t\t\tnextProps.email,\n\t\t\t\tnextProps.userData,\n\t\t\t\tnextProps.limits,\n\t\t\t\tnextProps.fees\n\t\t\t);\n\t\t\tthis.calculateSections(\n\t\t\t\tnextProps.verification_level,\n\t\t\t\tnextProps.email,\n\t\t\t\tnextProps.userData,\n\t\t\t\tnextProps.limits,\n\t\t\t\tnextProps.fees\n\t\t\t);\n\t\t} else if (\n\t\t\tnextProps.verification_level !== this.props.verification_level ||\n\t\t\tnextProps.userData.timestamp !== this.props.userData.timestamp ||\n\t\t\tnextProps.limits.fetched !== this.props.limits.fetched ||\n\t\t\tnextProps.fees.fetched !== this.props.fees.fetched\n\t\t) {\n\t\t\tthis.calculateSections(\n\t\t\t\tnextProps.verification_level,\n\t\t\t\tnextProps.email,\n\t\t\t\tnextProps.userData,\n\t\t\t\tnextProps.limits,\n\t\t\t\tnextProps.fees\n\t\t\t);\n\t\t}\n\t}\n\n\tgenerateNotification = (\n\t\tverified = false,\n\t\tprovided = false,\n\t\tverifyText = ''\n\t) => {\n\t\treturn {\n\t\t\ttext: verified\n\t\t\t\t? STRINGS.USER_VERIFICATION.COMPLETED\n\t\t\t\t: provided\n\t\t\t\t\t? STRINGS.USER_VERIFICATION.PENDING_VERIFICATION\n\t\t\t\t\t: verifyText,\n\t\t\tstatus: verified ? 'success' : provided ? 'information' : 'warning',\n\t\t\ticonPath: verified\n\t\t\t\t? ICONS.GREEN_CHECK\n\t\t\t\t: provided ? ICONS.BLUE_TIMER : ICONS.RED_ARROW,\n\t\t\tallowClick: false\n\t\t};\n\t};\n\n\tcalculateFormValues = (\n\t\tlanguage,\n\t\tverification_level,\n\t\temail,\n\t\tuserData,\n\t\tlimits,\n\t\tfees\n\t) => {\n\t\tconst dataFormValues = generateDataFormValues(\n\t\t\tlanguage,\n\t\t\tuserData.nationality\n\t\t);\n\t\tconst mobileFormValues = generateMobileFormValues();\n\t\tthis.setState({ dataFormValues, mobileFormValues }, () => {\n\t\t\tthis.calculateSections(verification_level, email, userData, limits, fees);\n\t\t});\n\t};\n\n\trenderGoToVerification = () => (\n\t\t<InformationSection\n\t\t\tonChangeText={STRINGS.USER_VERIFICATION.GOTO_VERIFICATION}\n\t\t\tonChangeValue={this.goToVerification}\n\t\t/>\n\t);\n\n\tcalculateSections = (verification_level, email, userData, limits, fees) => {\n\t\tconst { dataFormValues, mobileFormValues } = this.state;\n\t\tconst { phone_number, full_name, id_data = {} } = userData;\n\n\t\tconst sections = [\n\t\t\t{\n\t\t\t\ttitle: STRINGS.USER_VERIFICATION.TITLE_EMAIL,\n\t\t\t\tsubtitle: email,\n\t\t\t\tcontent: (\n\t\t\t\t\t<LevelSection\n\t\t\t\t\t\tlimits={limits}\n\t\t\t\t\t\tverification_level={verification_level}\n\t\t\t\t\t\tfees={fees}\n\t\t\t\t\t>\n\t\t\t\t\t\t<InformationSection\n\t\t\t\t\t\t\tonChangeValue={this.onOpenContactFormSelected(\n\t\t\t\t\t\t\t\t'category',\n\t\t\t\t\t\t\t\t'level'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonChangeText={STRINGS.UPGRADE_LEVEL}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LevelSection>\n\t\t\t\t),\n\t\t\t\tisOpen: true,\n\t\t\t\tnotification: this.generateNotification(\n\t\t\t\t\ttrue,\n\t\t\t\t\ttrue,\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.VERIFY_EMAIL\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: STRINGS.USER_VERIFICATION.TITLE_MOBILE_PHONE,\n\t\t\t\tsubtitle: phone_number,\n\t\t\t\tcontent: phone_number ? (\n\t\t\t\t\t<MobileForm initialValues={userData} formValues={mobileFormValues}>\n\t\t\t\t\t\t<InformationSection onChangeValue={this.onOpenContactForm} />\n\t\t\t\t\t</MobileForm>\n\t\t\t\t) : (\n\t\t\t\t\tthis.renderGoToVerification()\n\t\t\t\t),\n\t\t\t\tnotification: this.generateNotification(\n\t\t\t\t\t!!phone_number,\n\t\t\t\t\t!!phone_number,\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.VERIFY_MOBILE_PHONE\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: STRINGS.USER_VERIFICATION.TITLE_PERSONAL_INFORMATION,\n\t\t\t\tsubtitle: full_name,\n\t\t\t\tcontent: full_name ? (\n\t\t\t\t\t<InformationForm\n\t\t\t\t\t\tinitialValues={prepareInitialValues(userData)}\n\t\t\t\t\t\tformValues={dataFormValues}\n\t\t\t\t\t>\n\t\t\t\t\t\t<InformationSection\n\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\tverification_level === 1\n\t\t\t\t\t\t\t\t\t? STRINGS.USER_VERIFICATION\n\t\t\t\t\t\t\t\t\t\t\t.PENDING_VERIFICATION_PERSONAL_INFORMATION\n\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonChangeValue={this.onOpenContactForm}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InformationForm>\n\t\t\t\t) : (\n\t\t\t\t\tthis.renderGoToVerification()\n\t\t\t\t),\n\t\t\t\tnotification: this.generateNotification(\n\t\t\t\t\tverification_level > 1,\n\t\t\t\t\t!!full_name,\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.VERIFY_USER_DOCUMENTATION\n\t\t\t\t)\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: STRINGS.USER_VERIFICATION.TITLE_ID_DOCUMENTS,\n\t\t\t\tcontent: (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{id_data.provided ? (\n\t\t\t\t\t\t\t<InformationSection\n\t\t\t\t\t\t\t\ttext={\n\t\t\t\t\t\t\t\t\tid_data.type\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: STRINGS.USER_VERIFICATION.PENDING_VERIFICATION_DOCUMENTS\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChangeValue={this.onOpenContactForm}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tthis.renderGoToVerification()\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t\tdisabled: id_data.verified,\n\t\t\t\tnotification: this.generateNotification(\n\t\t\t\t\tid_data.verified,\n\t\t\t\t\tid_data.provided,\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.VERIFY_ID_DOCUMENTS\n\t\t\t\t)\n\t\t\t}\n\t\t];\n\n\t\tthis.setState({ sections });\n\t};\n\n\tgoToVerification = () => {\n\t\tif (this.props.goToVerification) {\n\t\t\tthis.props.goToVerification();\n\t\t}\n\t};\n\n\tonOpenContactForm = () => {\n\t\tif (this.props.openContactForm) {\n\t\t\tthis.props.openContactForm();\n\t\t}\n\t};\n\n\tonOpenContactFormSelected = (key = '', value = '') => () => {\n\t\tif (this.props.openContactForm) {\n\t\t\tthis.props.openContactForm({ [key]: value });\n\t\t}\n\t};\n\n\trender() {\n\t\tif (!this.props.id) {\n\t\t\treturn <Loader />;\n\t\t}\n\t\tconst { sections } = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Accordion\n\t\t\t\t\tsections={sections}\n\t\t\t\t\tallowMultiOpen={true}\n\t\t\t\t\twrapperId=\"app_container-main\"\n\t\t\t\t\tdoScroll={false}\n\t\t\t\t/>\n\t\t\t\t{isMobile && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tlabel={STRINGS.LOGOUT}\n\t\t\t\t\t\tonClick={() => this.props.logout()}\n\t\t\t\t\t\tclassName=\"mt-4\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n\tlogout: bindActionCreators(logout, dispatch)\n});\n\nconst mapStateToProps = (state) => ({\n\tid: state.user.id,\n\tverification_level: state.user.verification_level,\n\tuserData: state.user.userData,\n\temail: state.user.email,\n\tlimits: state.user.limits,\n\tfees: state.user.feeValues,\n\tactiveLanguage: state.app.language\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserProfile);\n"]},"metadata":{},"sourceType":"module"}