{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/UserSecurity/ApiKeyModal.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { OtpForm, Loader, Notification } from '../../components';\nimport { NOTIFICATIONS } from '../../actions/appActions';\nimport STRINGS from '../../config/localizedStrings';\nimport { ICONS } from '../../config/constants';\nimport { PopupInfo, TokenCreatedInfo } from './DeveloperSection';\nimport { formValueSelector } from 'redux-form';\nimport { TokenForm, generateFormValues, FORM_NAME } from './ApiKeyForm';\nimport { tokenKeyValidation } from '../../components/Form/validations';\nexport var TYPE_REVOKE = 'TYPE_REVOKE';\nexport var TYPE_GENERATE = 'TYPE_GENERATE';\n\nvar ApiKeyModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ApiKeyModal, _Component);\n\n  function ApiKeyModal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ApiKeyModal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ApiKeyModal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      dialogOtpOpen: false,\n      loading: false,\n      tokenName: '',\n      tokenKey: ''\n    };\n\n    _this.setTokenKey = function (tokenKey) {\n      _this.setState({\n        tokenKey: tokenKey\n      });\n    };\n\n    _this.setTokenName = function (tokenName) {\n      _this.setState({\n        tokenName: tokenName\n      });\n    };\n\n    _this.onClickNext = function () {\n      _this.setState({\n        dialogOtpOpen: true\n      });\n    };\n\n    _this.onSubmit = function (values) {\n      _this.setState({\n        loading: true\n      });\n\n      var otp_code = values.otp_code;\n      var tokenName = _this.state.tokenName;\n      var submit = _this.props.notificationType === TYPE_REVOKE ? _this.props.onRevoke : _this.props.onGenerate;\n      return submit(otp_code, tokenName).then(function (tokenKey) {\n        _this.setState({\n          tokenKey: tokenKey,\n          dialogOtpOpen: false,\n          loading: false\n        });\n      });\n    };\n\n    _this.onCloseDialog = function () {\n      _this.props.onCloseDialog();\n    };\n\n    return _this;\n  }\n\n  _createClass(ApiKeyModal, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!this.state.dialogOtpOpen && nextProps.tokenName !== this.props.tokenName) {\n        this.setTokenName(nextProps.tokenName);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          dialogOtpOpen = _this$state.dialogOtpOpen,\n          loading = _this$state.loading,\n          tokenName = _this$state.tokenName,\n          tokenKey = _this$state.tokenKey;\n      var _this$props = this.props,\n          notificationType = _this$props.notificationType,\n          openContactForm = _this$props.openContactForm,\n          activeTheme = _this$props.activeTheme;\n\n      if (dialogOtpOpen) {\n        return React.createElement(OtpForm, {\n          onSubmit: this.onSubmit,\n          onClickHelp: openContactForm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        });\n      } else if (loading) {\n        return React.createElement(Loader, {\n          relative: true,\n          background: false,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        });\n      } else if (tokenKey) {\n        return React.createElement(Notification, {\n          icon: ICONS[\"TOKEN_CREATED\".concat(activeTheme === 'dark' ? '_DARK' : '')],\n          onClose: this.onCloseDialog,\n          type: NOTIFICATIONS.CREATED_API_KEY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(TokenCreatedInfo, {\n          token: tokenKey,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }));\n      } else {\n        var icon = notificationType === TYPE_REVOKE ? ICONS.TOKEN_TRASHED : ICONS[\"TOKEN_GENERATE\".concat(activeTheme === 'dark' ? '_DARK' : '')];\n        var nextLabel = notificationType === TYPE_REVOKE ? STRINGS.DEVELOPERS_TOKENS_POPUP.DELETE : STRINGS.DEVELOPERS_TOKENS_POPUP.GENERATE;\n        return React.createElement(Notification, {\n          icon: icon,\n          onBack: this.onCloseDialog,\n          onNext: this.onClickNext,\n          nextLabel: nextLabel,\n          disabledNext: notificationType === TYPE_GENERATE && !!tokenKeyValidation(tokenName),\n          type: NOTIFICATIONS.GENERATE_API_KEY,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(PopupInfo, {\n          type: notificationType === TYPE_REVOKE ? 'DELETE' : 'GENERATE',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }), React.createElement(TokenForm, {\n          formFields: generateFormValues(notificationType),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return ApiKeyModal;\n}(Component);\n\nvar selector = formValueSelector(FORM_NAME);\n\nvar mapStateToForm = function mapStateToForm(state) {\n  return {\n    tokenName: selector(state, 'name'),\n    activeTheme: state.app.theme\n  };\n};\n\nexport default connect(mapStateToForm)(ApiKeyModal);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/UserSecurity/ApiKeyModal.js"],"names":["React","Component","connect","OtpForm","Loader","Notification","NOTIFICATIONS","STRINGS","ICONS","PopupInfo","TokenCreatedInfo","formValueSelector","TokenForm","generateFormValues","FORM_NAME","tokenKeyValidation","TYPE_REVOKE","TYPE_GENERATE","ApiKeyModal","state","dialogOtpOpen","loading","tokenName","tokenKey","setTokenKey","setState","setTokenName","onClickNext","onSubmit","values","otp_code","submit","props","notificationType","onRevoke","onGenerate","then","onCloseDialog","nextProps","openContactForm","activeTheme","CREATED_API_KEY","icon","TOKEN_TRASHED","nextLabel","DEVELOPERS_TOKENS_POPUP","DELETE","GENERATE","GENERATE_API_KEY","selector","mapStateToForm","app","theme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { OtpForm, Loader, Notification } from '../../components';\nimport { NOTIFICATIONS } from '../../actions/appActions';\nimport STRINGS from '../../config/localizedStrings';\nimport { ICONS } from '../../config/constants';\nimport { PopupInfo, TokenCreatedInfo } from './DeveloperSection';\nimport { formValueSelector } from 'redux-form';\nimport { TokenForm, generateFormValues, FORM_NAME } from './ApiKeyForm';\nimport { tokenKeyValidation } from '../../components/Form/validations';\n\nexport const TYPE_REVOKE = 'TYPE_REVOKE';\nexport const TYPE_GENERATE = 'TYPE_GENERATE';\n\nclass ApiKeyModal extends Component {\n\tstate = {\n\t\tdialogOtpOpen: false,\n\t\tloading: false,\n\t\ttokenName: '',\n\t\ttokenKey: ''\n\t};\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\t!this.state.dialogOtpOpen &&\n\t\t\tnextProps.tokenName !== this.props.tokenName\n\t\t) {\n\t\t\tthis.setTokenName(nextProps.tokenName);\n\t\t}\n\t}\n\n\tsetTokenKey = (tokenKey) => {\n\t\tthis.setState({ tokenKey });\n\t};\n\tsetTokenName = (tokenName) => {\n\t\tthis.setState({ tokenName });\n\t};\n\tonClickNext = () => {\n\t\tthis.setState({ dialogOtpOpen: true });\n\t};\n\n\tonSubmit = (values) => {\n\t\tthis.setState({ loading: true });\n\t\tconst { otp_code } = values;\n\t\tconst { tokenName } = this.state;\n\t\tlet submit =\n\t\t\tthis.props.notificationType === TYPE_REVOKE\n\t\t\t\t? this.props.onRevoke\n\t\t\t\t: this.props.onGenerate;\n\t\treturn submit(otp_code, tokenName).then((tokenKey) => {\n\t\t\tthis.setState({ tokenKey, dialogOtpOpen: false, loading: false });\n\t\t});\n\t};\n\n\tonCloseDialog = () => {\n\t\tthis.props.onCloseDialog();\n\t};\n\n\trender() {\n\t\tconst { dialogOtpOpen, loading, tokenName, tokenKey } = this.state;\n\t\tconst { notificationType, openContactForm, activeTheme } = this.props;\n \t\tif (dialogOtpOpen) {\n\t\t\treturn <OtpForm onSubmit={this.onSubmit} onClickHelp={openContactForm} />;\n\t\t} else if (loading) {\n\t\t\treturn <Loader relative={true} background={false} />;\n\t\t} else if (tokenKey) { \n\t\t\treturn (\n\t\t\t\t<Notification\n\t\t\t\t\ticon={ICONS[`TOKEN_CREATED${activeTheme === 'dark' ? '_DARK' : ''}`]}\n\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\ttype={NOTIFICATIONS.CREATED_API_KEY}\n\t\t\t\t>\n\t\t\t\t\t<TokenCreatedInfo token={tokenKey} />\n\t\t\t\t</Notification>\n\t\t\t);\n \t\t} else {\n\t\t\tconst icon =\n\t\t\t\tnotificationType === TYPE_REVOKE\n\t\t\t\t\t? ICONS.TOKEN_TRASHED\n\t\t\t\t\t: ICONS[`TOKEN_GENERATE${activeTheme === 'dark' ? '_DARK' : ''}`];\n\t\t\tconst nextLabel =\n\t\t\t\tnotificationType === TYPE_REVOKE\n\t\t\t\t\t? STRINGS.DEVELOPERS_TOKENS_POPUP.DELETE\n\t\t\t\t\t: STRINGS.DEVELOPERS_TOKENS_POPUP.GENERATE;\n\t\t\treturn (\n\t\t\t\t<Notification\n\t\t\t\t\ticon={icon}\n\t\t\t\t\tonBack={this.onCloseDialog}\n\t\t\t\t\tonNext={this.onClickNext}\n\t\t\t\t\tnextLabel={nextLabel}\n\t\t\t\t\tdisabledNext={\n\t\t\t\t\t\tnotificationType === TYPE_GENERATE &&\n\t\t\t\t\t\t!!tokenKeyValidation(tokenName)\n\t\t\t\t\t}\n\t\t\t\t\ttype={NOTIFICATIONS.GENERATE_API_KEY}\n\t\t\t\t>\n\t\t\t\t\t<PopupInfo\n\t\t\t\t\t\ttype={notificationType === TYPE_REVOKE ? 'DELETE' : 'GENERATE'}\n\t\t\t\t\t/>\n\t\t\t\t\t<TokenForm formFields={generateFormValues(notificationType)} />\n\t\t\t\t</Notification>\n\t\t\t);\n\t\t} \n\t}\n}\n\nconst selector = formValueSelector(FORM_NAME);\nconst mapStateToForm = (state) => ({\n\ttokenName: selector(state, 'name'),\n\tactiveTheme: state.app.theme\n});\n\nexport default connect(mapStateToForm)(ApiKeyModal);\n"]},"metadata":{},"sourceType":"module"}