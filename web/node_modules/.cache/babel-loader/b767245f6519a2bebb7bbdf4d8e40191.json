{"ast":null,"code":"import _objectWithoutProperties from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/components/Sortable/index.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nvar VERTICAL = 'VERTICAL';\nvar HORIZONTAL = 'HORIZONTAL';\nvar draggingIndex = null;\n\nfunction SortableComposition(Component) {\n  var flowDirection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : VERTICAL;\n\n  var Sortable =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(Sortable, _React$Component);\n\n    function Sortable() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, Sortable);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Sortable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n      _this.sortEnd = function (e) {\n        e.preventDefault();\n        draggingIndex = null;\n      };\n\n      _this.swapArrayElements = function (items, indexFrom, indexTo) {\n        var item = items[indexTo];\n        items[indexTo] = items[indexFrom];\n        items[indexFrom] = item;\n        return items;\n      };\n\n      _this.isMouseBeyond = function (mousePos, elementPos) {\n        var breakPoint;\n        breakPoint = 0;\n        var mouseOverlap = mousePos - elementPos;\n        return mouseOverlap > breakPoint;\n      };\n\n      _this.sortStart = function (e) {\n        draggingIndex = e.currentTarget.dataset.id;\n        var dt = e.dataTransfer;\n\n        if (dt !== undefined) {\n          e.dataTransfer.setData('text', e.target.innerHTML);\n\n          if (dt.setDragImage && e.currentTarget.tagName.toLowerCase() === 'a') {\n            dt.setDragImage(e.target, 0, 0);\n          }\n        }\n      };\n\n      _this.dragOver = function (e) {\n        e.preventDefault(); // const { blockindex } = this.props;\n\n        var overEl = e.currentTarget;\n        var indexDragged = Number(overEl.dataset.id);\n        var indexFrom = Number(draggingIndex);\n        var positionX = e.clientX;\n        var positionY = e.clientY;\n        var topOffset = overEl.getBoundingClientRect().top;\n        var leftOffset = overEl.getBoundingClientRect().left;\n        var mouseBeyond;\n        var items = _this.props.items;\n\n        if (flowDirection === VERTICAL) {\n          mouseBeyond = _this.isMouseBeyond(positionY, topOffset);\n        }\n\n        if (flowDirection === HORIZONTAL) {\n          mouseBeyond = _this.isMouseBeyond(positionX, leftOffset);\n        }\n\n        if (indexDragged !== indexFrom && mouseBeyond //  &&\n        // (blockindex === false || (indexFrom !== blockindex && indexDragged !== blockindex))\n        ) {\n            items = _this.swapArrayElements(items, indexFrom, indexDragged);\n            draggingIndex = indexDragged;\n\n            _this.props.onSortItems(items);\n          }\n      };\n\n      return _this;\n    }\n\n    _createClass(Sortable, [{\n      key: \"render\",\n      value: function render() {\n        var newProps = Object.assign({}, this.props);\n        delete newProps.onSortItems;\n\n        var sortId = newProps.sortId,\n            props = _objectWithoutProperties(newProps, [\"sortId\"]);\n\n        return React.createElement(Component, Object.assign({\n          draggable: true,\n          onDragOver: this.dragOver,\n          onDragStart: this.sortStart,\n          onDragEnd: this.sortEnd,\n          onTouchStart: this.sortStart,\n          onTouchMove: this.dragOver,\n          onTouchEnd: this.sortEnd,\n          \"data-id\": sortId\n        }, props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }));\n      }\n    }]);\n\n    return Sortable;\n  }(React.Component);\n\n  Sortable.propTypes = {\n    items: PropTypes.array.isRequired,\n    onSortItems: PropTypes.func.isRequired,\n    sortId: PropTypes.number\n  };\n  return Sortable;\n}\n\nexport { SortableComposition as Sortable };","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/components/Sortable/index.js"],"names":["React","PropTypes","VERTICAL","HORIZONTAL","draggingIndex","SortableComposition","Component","flowDirection","Sortable","sortEnd","e","preventDefault","swapArrayElements","items","indexFrom","indexTo","item","isMouseBeyond","mousePos","elementPos","breakPoint","mouseOverlap","sortStart","currentTarget","dataset","id","dt","dataTransfer","undefined","setData","target","innerHTML","setDragImage","tagName","toLowerCase","dragOver","overEl","indexDragged","Number","positionX","clientX","positionY","clientY","topOffset","getBoundingClientRect","top","leftOffset","left","mouseBeyond","props","onSortItems","newProps","Object","assign","sortId","propTypes","array","isRequired","func","number"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst VERTICAL = 'VERTICAL';\nconst HORIZONTAL = 'HORIZONTAL';\n\nlet draggingIndex = null;\n\nfunction SortableComposition(Component, flowDirection = VERTICAL) {\n    class Sortable extends React.Component {\n        static propTypes = {\n            items: PropTypes.array.isRequired,\n            onSortItems: PropTypes.func.isRequired,\n            sortId: PropTypes.number\n        };\n\n        sortEnd = e => {\n            e.preventDefault();\n            draggingIndex = null;\n        };\n\n        swapArrayElements = (items, indexFrom, indexTo) => {\n            var item = items[indexTo];\n            items[indexTo] = items[indexFrom];\n            items[indexFrom] = item;\n            return items;\n        };\n\n        isMouseBeyond = (mousePos, elementPos) => {\n            var breakPoint;\n            breakPoint = 0;\n            var mouseOverlap = mousePos - elementPos;\n            return mouseOverlap > breakPoint;\n        };\n        sortStart = e => {\n            draggingIndex = e.currentTarget.dataset.id;\n            let dt = e.dataTransfer;\n            if (dt !== undefined) {\n                e.dataTransfer.setData('text', e.target.innerHTML);\n                if (dt.setDragImage && e.currentTarget.tagName.toLowerCase() === 'a') {\n                    dt.setDragImage(e.target, 0, 0);\n                }\n            }\n        };\n\n        dragOver = e => {\n            e.preventDefault();\n            // const { blockindex } = this.props;\n            const overEl = e.currentTarget;\n            const indexDragged = Number(overEl.dataset.id);\n            const indexFrom = Number(draggingIndex);\n            const positionX = e.clientX;\n            const positionY = e.clientY;\n            const topOffset = overEl.getBoundingClientRect().top;\n            const leftOffset = overEl.getBoundingClientRect().left;\n            let mouseBeyond;\n            let { items } = this.props;\n\n            if (flowDirection === VERTICAL) {\n                mouseBeyond = this.isMouseBeyond(positionY, topOffset);\n            }\n\n            if (flowDirection === HORIZONTAL) {\n                mouseBeyond = this.isMouseBeyond(positionX, leftOffset);\n            }\n            if (\n                indexDragged !== indexFrom &&\n                mouseBeyond\n                //  &&\n                // (blockindex === false || (indexFrom !== blockindex && indexDragged !== blockindex))\n            ) {\n                items = this.swapArrayElements(items, indexFrom, indexDragged);\n                draggingIndex = indexDragged;\n                this.props.onSortItems(items);\n            }\n        };\n\n        render() {\n            let newProps = Object.assign({}, this.props);\n            delete newProps.onSortItems;\n            const { sortId, ...props } = newProps;\n            return (\n                <Component\n                    draggable={true}\n                    onDragOver={this.dragOver}\n                    onDragStart={this.sortStart}\n                    onDragEnd={this.sortEnd}\n                    onTouchStart={this.sortStart}\n                    onTouchMove={this.dragOver}\n                    onTouchEnd={this.sortEnd}\n                    data-id={sortId}\n                    {...props}\n                />\n            );\n        }\n    }\n    return Sortable;\n}\nexport { SortableComposition as Sortable };"]},"metadata":{},"sourceType":"module"}