{"ast":null,"code":"import _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Admin/User/UserData.js\";\nimport React from 'react';\nimport { SubmissionError } from 'redux-form';\nimport { updateUserData } from './actions';\nimport { AdminHocForm } from '../../../components';\nvar Form = AdminHocForm('USER_DATA', 'user_data');\nvar AddressFields = {\n  country: {\n    type: 'text',\n    label: 'Country'\n  },\n  address: {\n    type: 'text',\n    label: 'Address'\n  },\n  postal_code: {\n    type: 'text',\n    label: 'Postal Code'\n  },\n  city: {\n    type: 'text',\n    label: 'City'\n  }\n};\nvar DataFields = {\n  email: {\n    type: 'text',\n    label: 'Email',\n    disabled: true\n  },\n  full_name: {\n    type: 'text',\n    label: 'Full Name'\n  },\n  gender: {\n    type: 'select',\n    label: 'Gender',\n    options: ['Man', 'Woman']\n  },\n  nationality: {\n    type: 'text',\n    label: 'nationality'\n  },\n  dob: {\n    type: 'date',\n    label: 'Date of birth'\n  },\n  phone_number: {\n    type: 'text',\n    label: 'Phone Number'\n  }\n};\n\nvar Fields = _objectSpread({}, DataFields, AddressFields);\n\nvar onSubmit = function onSubmit(onChangeSuccess) {\n  return function (values) {\n    var submitData = {\n      id: values.id,\n      address: {}\n    };\n    Object.keys(DataFields).forEach(function (key) {\n      if (key === 'gender') {\n        submitData[key] = values[key] === 'Woman';\n      } else {\n        submitData[key] = values[key];\n      }\n    });\n    Object.keys(AddressFields).forEach(function (key) {\n      submitData.address[key] = values[key];\n    });\n    return updateUserData(submitData).then(function (data) {\n      if (onChangeSuccess) {\n        onChangeSuccess(_objectSpread({}, values, submitData, data));\n      }\n    }).catch(function (err) {\n      throw new SubmissionError({\n        _error: err.data.message\n      });\n    });\n  };\n};\n\nvar generateInitialValues = function generateInitialValues(initialValues) {\n  var values = _objectSpread({}, initialValues, initialValues.address, {\n    gender: initialValues.gender ? 'Woman' : 'Man'\n  });\n\n  return values;\n};\n\nvar UserData = function UserData(_ref) {\n  var initialValues = _ref.initialValues,\n      _ref$readOnly = _ref.readOnly,\n      readOnly = _ref$readOnly === void 0 ? false : _ref$readOnly,\n      onChangeSuccess = _ref.onChangeSuccess;\n  return React.createElement(Form, {\n    onSubmit: onSubmit(onChangeSuccess),\n    buttonText: \"SAVE\",\n    fields: Fields,\n    initialValues: generateInitialValues(initialValues),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  });\n};\n\nexport default UserData;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Admin/User/UserData.js"],"names":["React","SubmissionError","updateUserData","AdminHocForm","Form","AddressFields","country","type","label","address","postal_code","city","DataFields","email","disabled","full_name","gender","options","nationality","dob","phone_number","Fields","onSubmit","onChangeSuccess","values","submitData","id","Object","keys","forEach","key","then","data","catch","err","_error","message","generateInitialValues","initialValues","UserData","readOnly"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { SubmissionError } from 'redux-form';\nimport { updateUserData } from './actions';\nimport { AdminHocForm } from '../../../components';\n\nconst Form = AdminHocForm('USER_DATA', 'user_data');\n\nconst AddressFields = {\n\tcountry: {\n\t\ttype: 'text',\n\t\tlabel: 'Country'\n\t},\n\taddress: {\n\t\ttype: 'text',\n\t\tlabel: 'Address'\n\t},\n\tpostal_code: {\n\t\ttype: 'text',\n\t\tlabel: 'Postal Code'\n\t},\n\tcity: {\n\t\ttype: 'text',\n\t\tlabel: 'City'\n\t}\n};\n\nconst DataFields = {\n\temail: {\n\t\ttype: 'text',\n\t\tlabel: 'Email',\n\t\tdisabled: true\n\t},\n\tfull_name: {\n\t\ttype: 'text',\n\t\tlabel: 'Full Name'\n\t},\n\tgender: {\n\t\ttype: 'select',\n\t\tlabel: 'Gender',\n\t\toptions: ['Man', 'Woman']\n\t},\n\tnationality: {\n\t\ttype: 'text',\n\t\tlabel: 'nationality'\n\t},\n\tdob: {\n\t\ttype: 'date',\n\t\tlabel: 'Date of birth'\n\t},\n\tphone_number: {\n\t\ttype: 'text',\n\t\tlabel: 'Phone Number'\n\t}\n};\n\nconst Fields = {\n\t...DataFields,\n\t...AddressFields\n};\n\nconst onSubmit = (onChangeSuccess) => (values) => {\n\tconst submitData = {\n\t\tid: values.id,\n\t\taddress: {}\n\t};\n\n\tObject.keys(DataFields).forEach((key) => {\n\t\tif (key === 'gender') {\n\t\t\tsubmitData[key] = values[key] === 'Woman';\n\t\t} else {\n\t\t\tsubmitData[key] = values[key];\n\t\t}\n\t});\n\tObject.keys(AddressFields).forEach((key) => {\n\t\tsubmitData.address[key] = values[key];\n\t});\n\treturn updateUserData(submitData)\n\t\t.then((data) => {\n\t\t\tif (onChangeSuccess) {\n\t\t\t\tonChangeSuccess({\n\t\t\t\t\t...values,\n\t\t\t\t\t...submitData,\n\t\t\t\t\t...data\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t\t.catch((err) => {\n\t\t\tthrow new SubmissionError({ _error: err.data.message });\n\t\t});\n};\n\nconst generateInitialValues = (initialValues) => {\n\tconst values = {\n\t\t...initialValues,\n\t\t...initialValues.address,\n\t\tgender: initialValues.gender ? 'Woman' : 'Man'\n\t};\n\treturn values;\n};\n\nconst UserData = ({ initialValues, readOnly = false, onChangeSuccess }) => (\n\t<Form\n\t\tonSubmit={onSubmit(onChangeSuccess)}\n\t\tbuttonText=\"SAVE\"\n\t\tfields={Fields}\n\t\tinitialValues={generateInitialValues(initialValues)}\n\t/>\n);\n\nexport default UserData;\n"]},"metadata":{},"sourceType":"module"}