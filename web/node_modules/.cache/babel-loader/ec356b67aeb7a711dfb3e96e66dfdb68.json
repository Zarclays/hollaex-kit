{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/components/Form/FormFields/DateField.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { SingleDatePicker, isInclusivelyAfterDay, isInclusivelyBeforeDay } from 'react-dates';\nimport FieldWrapper, { FieldContent } from './FieldWrapper';\nimport { DEFAULT_LANGUAGE } from '../../../config/constants';\nvar FIELDS = [{\n  key: 'year',\n  label: 'Year'\n}, {\n  key: 'month',\n  label: 'Month'\n}, {\n  key: 'day',\n  label: 'Day'\n}];\n\nvar DateField =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DateField, _Component);\n\n  function DateField() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, DateField);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(DateField)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      focused: false,\n      date: moment(),\n      display: {\n        year: '',\n        month: '',\n        day: ''\n      }\n    };\n\n    _this.setDisplay = function () {\n      var dateString = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_LANGUAGE;\n      var display = {};\n      var date;\n      date = moment(dateString);\n      display.year = date.year();\n      display.month = date.month() + 1;\n      display.day = date.date();\n\n      _this.setState({\n        date: date,\n        display: display\n      });\n    };\n\n    _this.onChangeInput = function (value) {\n      _this.onChangeInputValue(moment(value).valueOf());\n    };\n\n    _this.onChangeInputValue = function (unixtime) {\n      var _this$props = _this.props,\n          language = _this$props.language,\n          input = _this$props.input;\n      var date = moment(unixtime);\n\n      _this.setDisplay(date.valueOf(), language);\n\n      _this.onChangeOpen(false);\n\n      input.onChange(date.format());\n    };\n\n    _this.onToogleOpen = function (event) {\n      _this.onChangeOpen(!_this.state.focused);\n    };\n\n    _this.onFocusChange = function (_ref) {\n      var focused = _ref.focused;\n\n      _this.onChangeOpen(focused);\n    };\n\n    _this.onChangeOpen = function () {\n      var focused = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      _this.setState({\n        focused: focused\n      });\n    };\n\n    _this.renderValues = function (display, valid) {\n      return React.createElement(\"div\", {\n        className: \"datefield-values-wrapper\",\n        onClick: _this.onToogleOpen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, FIELDS.map(function (_ref2) {\n        var key = _ref2.key,\n            label = _ref2.label;\n        return React.createElement(FieldContent, {\n          contentClassName: \"pointer dropdown-triangle\",\n          valid: valid,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, display[key] || label);\n      }));\n    };\n\n    _this.isOutsideRange = function (startDate, endDate) {\n      return function (day) {\n        if (startDate && isInclusivelyBeforeDay(day, moment(startDate))) {\n          return true;\n        } else if (endDate && isInclusivelyAfterDay(day, moment(endDate))) {\n          return true;\n        }\n\n        return false;\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(DateField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.input.value) {\n        this.onChangeInput(this.props.input.value);\n        this.setDisplay(this.props.input.value, this.props.language);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.input.value !== this.props.input.value) {\n        this.onChangeInput(nextProps.input.value);\n      }\n\n      if (nextProps.language !== this.props.language) {\n        this.setDisplay(nextProps.input.value, nextProps.language);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          focused = _this$state.focused,\n          date = _this$state.date,\n          display = _this$state.display;\n      var _this$props2 = this.props,\n          invalid = _this$props2.meta.invalid,\n          startDate = _this$props2.startDate,\n          endDate = _this$props2.endDate; // const displayError = !active && touched && error;\n\n      return React.createElement(\"div\", {\n        className: \"datefield-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(FieldWrapper, Object.assign({}, this.props, {\n        onClick: this.onToogleOpen,\n        valid: !invalid,\n        hideUnderline: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), this.renderValues(display, invalid)), React.createElement(SingleDatePicker, {\n        date: date // momentPropTypes.momentObj or null\n        ,\n        onDateChange: this.onChangeInput // PropTypes.func.isRequired\n        ,\n        focused: focused // PropTypes.bool\n        ,\n        onFocusChange: this.onFocusChange // PropTypes.func.isRequired\n        ,\n        keepOpenOnDateSelect: false,\n        hideKeyboardShortcutsPanel: true,\n        withPortal: true,\n        numberOfMonths: 1,\n        isOutsideRange: this.isOutsideRange(startDate, endDate),\n        initialVisibleMonth: function initialVisibleMonth() {\n          return moment();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return DateField;\n}(Component);\n\nexport default DateField;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/components/Form/FormFields/DateField.js"],"names":["React","Component","moment","SingleDatePicker","isInclusivelyAfterDay","isInclusivelyBeforeDay","FieldWrapper","FieldContent","DEFAULT_LANGUAGE","FIELDS","key","label","DateField","state","focused","date","display","year","month","day","setDisplay","dateString","language","setState","onChangeInput","value","onChangeInputValue","valueOf","unixtime","props","input","onChangeOpen","onChange","format","onToogleOpen","event","onFocusChange","renderValues","valid","map","isOutsideRange","startDate","endDate","nextProps","invalid","meta"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport {\n\tSingleDatePicker,\n\tisInclusivelyAfterDay,\n\tisInclusivelyBeforeDay\n} from 'react-dates';\nimport FieldWrapper, { FieldContent } from './FieldWrapper';\nimport { DEFAULT_LANGUAGE } from '../../../config/constants';\n\nconst FIELDS = [\n\t{ key: 'year', label: 'Year' },\n\t{ key: 'month', label: 'Month' },\n\t{ key: 'day', label: 'Day' }\n];\n\nclass DateField extends Component {\n\tstate = {\n\t\tfocused: false,\n\t\tdate: moment(),\n\t\tdisplay: {\n\t\t\tyear: '',\n\t\t\tmonth: '',\n\t\t\tday: ''\n\t\t}\n\t};\n\n\tcomponentDidMount() {\n\t\tif (this.props.input.value) {\n\t\t\tthis.onChangeInput(this.props.input.value);\n\t\t\tthis.setDisplay(this.props.input.value, this.props.language);\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.input.value !== this.props.input.value) {\n\t\t\tthis.onChangeInput(nextProps.input.value);\n\t\t}\n\t\tif (nextProps.language !== this.props.language) {\n\t\t\tthis.setDisplay(nextProps.input.value, nextProps.language);\n\t\t}\n\t}\n\n\tsetDisplay = (dateString = '', language = DEFAULT_LANGUAGE) => {\n\t\tconst display = {};\n\t\tlet date;\n\t\tdate = moment(dateString);\n\t\tdisplay.year = date.year();\n\t\tdisplay.month = date.month() + 1;\n\t\tdisplay.day = date.date();\n\t\tthis.setState({ date, display });\n\t};\n\n\tonChangeInput = (value) => {\n\t\tthis.onChangeInputValue(moment(value).valueOf());\n\t};\n\n\tonChangeInputValue = (unixtime) => {\n\t\tconst { language, input } = this.props;\n\t\tconst date = moment(unixtime);\n\t\tthis.setDisplay(date.valueOf(), language);\n\t\tthis.onChangeOpen(false);\n\t\tinput.onChange(date.format());\n\t};\n\n\tonToogleOpen = (event) => {\n\t\tthis.onChangeOpen(!this.state.focused);\n\t};\n\n\tonFocusChange = ({ focused }) => {\n\t\tthis.onChangeOpen(focused);\n\t};\n\n\tonChangeOpen = (focused = false) => {\n\t\tthis.setState({ focused });\n\t};\n\n\trenderValues = (display, valid) => {\n\t\treturn (\n\t\t\t<div className=\"datefield-values-wrapper\" onClick={this.onToogleOpen}>\n\t\t\t\t{FIELDS.map(({ key, label }) => (\n\t\t\t\t\t<FieldContent\n\t\t\t\t\t\tcontentClassName=\"pointer dropdown-triangle\"\n\t\t\t\t\t\tvalid={valid}\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t>\n\t\t\t\t\t\t{display[key] || label}\n\t\t\t\t\t</FieldContent>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t);\n\t};\n\n\tisOutsideRange = (startDate, endDate) => (day) => {\n\t\tif (startDate && isInclusivelyBeforeDay(day, moment(startDate))) {\n\t\t\treturn true;\n\t\t} else if (endDate && isInclusivelyAfterDay(day, moment(endDate))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\trender() {\n\t\tconst { focused, date, display } = this.state;\n\t\tconst {\n\t\t\tmeta: {\n\t\t\t\t// active = false,\n\t\t\t\t// error,\n\t\t\t\t// touched = false,\n\t\t\t\tinvalid\n\t\t\t},\n\t\t\tstartDate,\n\t\t\tendDate\n\t\t} = this.props;\n\t\t// const displayError = !active && touched && error;\n\n\t\treturn (\n\t\t\t<div className=\"datefield-wrapper\">\n\t\t\t\t<FieldWrapper\n\t\t\t\t\t{...this.props}\n\t\t\t\t\tonClick={this.onToogleOpen}\n\t\t\t\t\tvalid={!invalid}\n\t\t\t\t\thideUnderline={true}\n\t\t\t\t>\n\t\t\t\t\t{this.renderValues(display, invalid)}\n\t\t\t\t</FieldWrapper>\n\t\t\t\t<SingleDatePicker\n\t\t\t\t\tdate={date} // momentPropTypes.momentObj or null\n\t\t\t\t\tonDateChange={this.onChangeInput} // PropTypes.func.isRequired\n\t\t\t\t\tfocused={focused} // PropTypes.bool\n\t\t\t\t\tonFocusChange={this.onFocusChange} // PropTypes.func.isRequired\n\t\t\t\t\tkeepOpenOnDateSelect={false}\n\t\t\t\t\thideKeyboardShortcutsPanel={true}\n\t\t\t\t\twithPortal={true}\n\t\t\t\t\tnumberOfMonths={1}\n\t\t\t\t\tisOutsideRange={this.isOutsideRange(startDate, endDate)}\n\t\t\t\t\tinitialVisibleMonth={() => moment()}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default DateField;\n"]},"metadata":{},"sourceType":"module"}