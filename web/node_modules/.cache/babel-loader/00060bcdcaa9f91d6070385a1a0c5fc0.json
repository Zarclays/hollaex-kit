{"ast":null,"code":"import _toConsumableArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Login/index.js\";\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { SubmissionError, change } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router';\nimport { isMobile } from 'react-device-detect';\nimport { performLogin, setLogoutMessage } from '../../actions/authAction';\nimport LoginForm, { FORM_NAME } from './LoginForm';\nimport { Dialog, OtpForm, IconTitle, Notification } from '../../components';\nimport { NOTIFICATIONS } from '../../actions/appActions';\nimport { errorHandler } from '../../components/OtpForm/utils';\nimport { HOLLAEX_LOGO, FLEX_CENTER_CLASSES, ICONS } from '../../config/constants';\nimport STRINGS from '../../config/localizedStrings';\n\nvar BottomLink = function BottomLink() {\n  return React.createElement(\"div\", {\n    className: classnames('f-1', 'link_wrapper'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  }, STRINGS.LOGIN.NO_ACCOUNT, React.createElement(Link, {\n    to: \"/signup\",\n    className: classnames('blue-link'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, STRINGS.LOGIN.CREATE_ACCOUNT));\n};\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      values: {},\n      otpDialogIsOpen: false,\n      logoutDialogIsOpen: false\n    };\n\n    _this.redirectToHome = function () {\n      _this.props.router.replace('/account');\n    };\n\n    _this.redirectToResetPassword = function () {\n      _this.props.router.replace('/reset-password');\n    };\n\n    _this.redirectToService = function (url) {\n      window.location.href = \"https://\".concat(url);\n    };\n\n    _this.getServiceParam = function () {\n      var service = '';\n\n      if (_this.props.location && _this.props.location.query && _this.props.location.query.service) {\n        service = _this.props.location.query.service;\n      } else if (window.location && window.location.search && window.location.search.includes('service')) {\n        service = window.location.search.split('?service=')[1];\n      }\n\n      return service;\n    };\n\n    _this.onSubmitLogin = function (values) {\n      var service = _this.getServiceParam();\n\n      if (service) {\n        values.service = service;\n      }\n\n      return performLogin(values).then(function (res) {\n        if (res.data && res.data.callbackUrl) _this.redirectToService(res.data.callbackUrl);else _this.redirectToHome();\n      }).catch(function (err) {\n        var _error = err.response && err.response.data ? err.response.data.message : err.message;\n\n        var error = {};\n\n        _this.props.change(FORM_NAME, 'captcha', '');\n\n        if (_error.toLowerCase().indexOf('otp') > -1) {\n          _this.setState({\n            values: values,\n            otpDialogIsOpen: true\n          });\n\n          error._error = STRINGS.VALIDATIONS.OTP_LOGIN;\n        } else {\n          if (_error === 'User is not activated') {\n            error._error = React.createElement(\"div\", {\n              style: {\n                color: 'black'\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112\n              },\n              __self: this\n            }, \"Account approval is required to access the demo exchange.\", React.createElement(\"br\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }), \"Please contact us at\", ' ', React.createElement(\"a\", {\n              style: {\n                color: 'blue'\n              },\n              href: \"mailto:support@bitholla.com?Subject=Approval%20request\",\n              target: \"_top\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 117\n              },\n              __self: this\n            }, \"support@bitholla.com\"), ' ', \"with your use case for approval access\");\n          } else {\n            error._error = _error;\n          }\n\n          throw new SubmissionError(error);\n        }\n      });\n    };\n\n    _this.onSubmitLoginOtp = function (values) {\n      return performLogin(Object.assign({\n        otp_code: values.otp_code\n      }, _this.state.values)).then(function (res) {\n        _this.setState({\n          otpDialogIsOpen: false\n        });\n\n        if (res.data && res.data.callbackUrl) _this.redirectToService(res.data.callbackUrl);else _this.redirectToHome();\n      }).catch(errorHandler);\n    };\n\n    _this.onCloseDialog = function () {\n      _this.setState({\n        otpDialogIsOpen: false\n      });\n    };\n\n    _this.onCloseLogoutDialog = function () {\n      _this.props.setLogoutMessage();\n\n      _this.setState({\n        logoutDialogIsOpen: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.logoutMessage) {\n        this.setState({\n          logoutDialogIsOpen: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.logoutMessage && nextProps.logoutMessage !== this.props.logoutMessage) {\n        this.setState({\n          logoutDialogIsOpen: true\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.setLogoutMessage();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          logoutMessage = _this$props.logoutMessage,\n          activeTheme = _this$props.activeTheme;\n      var _this$state = this.state,\n          otpDialogIsOpen = _this$state.otpDialogIsOpen,\n          logoutDialogIsOpen = _this$state.logoutDialogIsOpen;\n      return React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'f-1'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'auth_wrapper', 'w-100'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(IconTitle, {\n        iconPath: HOLLAEX_LOGO,\n        text: STRINGS.LOGIN_TEXT,\n        textType: \"title\",\n        underline: true,\n        useSvg: true,\n        className: \"w-100 exir-logo\",\n        subtitle: STRINGS.formatString(STRINGS.LOGIN.LOGIN_TO, STRINGS.APP_TITLE),\n        actionProps: {\n          text: STRINGS.LOGIN.CANT_LOGIN,\n          iconPath: ICONS.BLUE_ARROW_RIGHT,\n          onClick: this.redirectToResetPassword,\n          useSvg: true\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classnames.apply(void 0, _toConsumableArray(FLEX_CENTER_CLASSES).concat(['flex-column', 'auth_form-wrapper', 'w-100'])),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(LoginForm, {\n        onSubmit: this.onSubmitLogin,\n        theme: activeTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }), isMobile && React.createElement(BottomLink, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }))), !isMobile && React.createElement(BottomLink, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }), React.createElement(Dialog, {\n        isOpen: otpDialogIsOpen || logoutDialogIsOpen,\n        label: \"otp-modal\",\n        onCloseDialog: this.onCloseDialog,\n        shouldCloseOnOverlayClick: otpDialogIsOpen ? false : true,\n        showCloseText: otpDialogIsOpen ? true : false,\n        className: \"login-dialog\",\n        useFullScreen: isMobile,\n        showBar: otpDialogIsOpen,\n        theme: activeTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, otpDialogIsOpen && React.createElement(OtpForm, {\n        onSubmit: this.onSubmitLoginOtp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), logoutDialogIsOpen && React.createElement(Notification, {\n        type: NOTIFICATIONS.LOGOUT,\n        onClose: this.onCloseLogoutDialog,\n        data: {\n          message: logoutMessage\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    activeTheme: store.app.theme,\n    logoutMessage: store.auth.logoutMessage\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setLogoutMessage: bindActionCreators(setLogoutMessage, dispatch),\n    change: bindActionCreators(change, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Login/index.js"],"names":["React","Component","classnames","connect","SubmissionError","change","bindActionCreators","Link","isMobile","performLogin","setLogoutMessage","LoginForm","FORM_NAME","Dialog","OtpForm","IconTitle","Notification","NOTIFICATIONS","errorHandler","HOLLAEX_LOGO","FLEX_CENTER_CLASSES","ICONS","STRINGS","BottomLink","LOGIN","NO_ACCOUNT","CREATE_ACCOUNT","Login","state","values","otpDialogIsOpen","logoutDialogIsOpen","redirectToHome","props","router","replace","redirectToResetPassword","redirectToService","url","window","location","href","getServiceParam","service","query","search","includes","split","onSubmitLogin","then","res","data","callbackUrl","catch","err","_error","response","message","error","toLowerCase","indexOf","setState","VALIDATIONS","OTP_LOGIN","color","onSubmitLoginOtp","Object","assign","otp_code","onCloseDialog","onCloseLogoutDialog","logoutMessage","nextProps","activeTheme","LOGIN_TEXT","formatString","LOGIN_TO","APP_TITLE","text","CANT_LOGIN","iconPath","BLUE_ARROW_RIGHT","onClick","useSvg","LOGOUT","mapStateToProps","store","app","theme","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { SubmissionError, change } from 'redux-form';\nimport { bindActionCreators } from 'redux';\nimport { Link } from 'react-router';\nimport { isMobile } from 'react-device-detect';\n\nimport { performLogin, setLogoutMessage } from '../../actions/authAction';\nimport LoginForm, { FORM_NAME } from './LoginForm';\nimport { Dialog, OtpForm, IconTitle, Notification } from '../../components';\nimport { NOTIFICATIONS } from '../../actions/appActions';\nimport { errorHandler } from '../../components/OtpForm/utils';\nimport {\n\tHOLLAEX_LOGO,\n\tFLEX_CENTER_CLASSES,\n\tICONS\n} from '../../config/constants';\n\nimport STRINGS from '../../config/localizedStrings';\n\nconst BottomLink = () => (\n\t<div className={classnames('f-1', 'link_wrapper')}>\n\t\t{STRINGS.LOGIN.NO_ACCOUNT}\n\t\t<Link to=\"/signup\" className={classnames('blue-link')}>\n\t\t\t{STRINGS.LOGIN.CREATE_ACCOUNT}\n\t\t</Link>\n\t</div>\n);\n\nclass Login extends Component {\n\tstate = {\n\t\tvalues: {},\n\t\totpDialogIsOpen: false,\n\t\tlogoutDialogIsOpen: false\n\t};\n\n\tcomponentDidMount() {\n\t\tif (this.props.logoutMessage) {\n\t\t\tthis.setState({ logoutDialogIsOpen: true });\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tnextProps.logoutMessage &&\n\t\t\tnextProps.logoutMessage !== this.props.logoutMessage\n\t\t) {\n\t\t\tthis.setState({ logoutDialogIsOpen: true });\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.setLogoutMessage();\n\t}\n\n\tredirectToHome = () => {\n\t\tthis.props.router.replace('/account');\n\t};\n\n\tredirectToResetPassword = () => {\n\t\tthis.props.router.replace('/reset-password');\n\t};\n\n\tredirectToService = (url) => {\n\t\twindow.location.href = `https://${url}`;\n\t};\n\n\tgetServiceParam = () => {\n\t\tlet service = '';\n\t\tif (\n\t\t\tthis.props.location &&\n\t\t\tthis.props.location.query &&\n\t\t\tthis.props.location.query.service\n\t\t) {\n\t\t\tservice = this.props.location.query.service;\n\t\t} else if (\n\t\t\twindow.location &&\n\t\t\twindow.location.search &&\n\t\t\twindow.location.search.includes('service')\n\t\t) {\n\t\t\tservice = window.location.search.split('?service=')[1];\n\t\t}\n\t\treturn service;\n\t};\n\n\tonSubmitLogin = (values) => {\n\t\tconst service = this.getServiceParam();\n\t\tif (service) {\n\t\t\tvalues.service = service;\n\t\t}\n\t\treturn performLogin(values)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.data && res.data.callbackUrl)\n\t\t\t\t\tthis.redirectToService(res.data.callbackUrl);\n\t\t\t\telse this.redirectToHome();\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconst _error =\n\t\t\t\t\terr.response && err.response.data\n\t\t\t\t\t\t? err.response.data.message\n\t\t\t\t\t\t: err.message;\n\n\t\t\t\tlet error = {};\n\t\t\t\tthis.props.change(FORM_NAME, 'captcha', '');\n\n\t\t\t\tif (_error.toLowerCase().indexOf('otp') > -1) {\n\t\t\t\t\tthis.setState({ values, otpDialogIsOpen: true });\n\t\t\t\t\terror._error = STRINGS.VALIDATIONS.OTP_LOGIN;\n\t\t\t\t} else {\n\t\t\t\t\tif (_error === 'User is not activated') {\n\t\t\t\t\t\terror._error = (\n\t\t\t\t\t\t\t<div style={{ color: 'black' }}>\n\t\t\t\t\t\t\t\tAccount approval is required to access the demo\n\t\t\t\t\t\t\t\texchange.\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\tPlease contact us at{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tstyle={{ color: 'blue' }}\n\t\t\t\t\t\t\t\t\thref=\"mailto:support@bitholla.com?Subject=Approval%20request\"\n\t\t\t\t\t\t\t\t\ttarget=\"_top\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tsupport@bitholla.com\n\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\twith your use case for approval access\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror._error = _error;\n\t\t\t\t\t}\n\t\t\t\t\tthrow new SubmissionError(error);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tonSubmitLoginOtp = (values) => {\n\t\treturn performLogin(\n\t\t\tObject.assign({ otp_code: values.otp_code }, this.state.values)\n\t\t)\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ otpDialogIsOpen: false });\n\t\t\t\tif (res.data && res.data.callbackUrl)\n\t\t\t\t\tthis.redirectToService(res.data.callbackUrl);\n\t\t\t\telse this.redirectToHome();\n\t\t\t})\n\t\t\t.catch(errorHandler);\n\t};\n\n\tonCloseDialog = () => {\n\t\tthis.setState({ otpDialogIsOpen: false });\n\t};\n\n\tonCloseLogoutDialog = () => {\n\t\tthis.props.setLogoutMessage();\n\t\tthis.setState({ logoutDialogIsOpen: false });\n\t};\n\n\trender() {\n\t\tconst { logoutMessage, activeTheme } = this.props;\n\t\tconst { otpDialogIsOpen, logoutDialogIsOpen } = this.state;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(...FLEX_CENTER_CLASSES, 'flex-column', 'f-1')}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t...FLEX_CENTER_CLASSES,\n\t\t\t\t\t\t'flex-column',\n\t\t\t\t\t\t'auth_wrapper',\n\t\t\t\t\t\t'w-100'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<IconTitle\n\t\t\t\t\t\ticonPath={HOLLAEX_LOGO}\n\t\t\t\t\t\ttext={STRINGS.LOGIN_TEXT}\n\t\t\t\t\t\ttextType=\"title\"\n\t\t\t\t\t\tunderline={true}\n\t\t\t\t\t\tuseSvg={true}\n\t\t\t\t\t\tclassName=\"w-100 exir-logo\"\n\t\t\t\t\t\tsubtitle={STRINGS.formatString(\n\t\t\t\t\t\t\tSTRINGS.LOGIN.LOGIN_TO,\n\t\t\t\t\t\t\tSTRINGS.APP_TITLE\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tactionProps={{\n\t\t\t\t\t\t\ttext: STRINGS.LOGIN.CANT_LOGIN,\n\t\t\t\t\t\t\ticonPath: ICONS.BLUE_ARROW_RIGHT,\n\t\t\t\t\t\t\tonClick: this.redirectToResetPassword,\n\t\t\t\t\t\t\tuseSvg: true\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t...FLEX_CENTER_CLASSES,\n\t\t\t\t\t\t\t'flex-column',\n\t\t\t\t\t\t\t'auth_form-wrapper',\n\t\t\t\t\t\t\t'w-100'\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<LoginForm\n\t\t\t\t\t\t\tonSubmit={this.onSubmitLogin}\n\t\t\t\t\t\t\ttheme={activeTheme}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{isMobile && <BottomLink />}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{!isMobile && <BottomLink />}\n\t\t\t\t<Dialog\n\t\t\t\t\tisOpen={otpDialogIsOpen || logoutDialogIsOpen}\n\t\t\t\t\tlabel=\"otp-modal\"\n\t\t\t\t\tonCloseDialog={this.onCloseDialog}\n\t\t\t\t\tshouldCloseOnOverlayClick={otpDialogIsOpen ? false : true}\n\t\t\t\t\tshowCloseText={otpDialogIsOpen ? true : false}\n\t\t\t\t\tclassName=\"login-dialog\"\n\t\t\t\t\tuseFullScreen={isMobile}\n\t\t\t\t\tshowBar={otpDialogIsOpen}\n\t\t\t\t\ttheme={activeTheme}\n\t\t\t\t>\n\t\t\t\t\t{otpDialogIsOpen && <OtpForm onSubmit={this.onSubmitLoginOtp} />}\n\t\t\t\t\t{logoutDialogIsOpen && (\n\t\t\t\t\t\t<Notification\n\t\t\t\t\t\t\ttype={NOTIFICATIONS.LOGOUT}\n\t\t\t\t\t\t\tonClose={this.onCloseLogoutDialog}\n\t\t\t\t\t\t\tdata={{ message: logoutMessage }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (store) => ({\n\tactiveTheme: store.app.theme,\n\tlogoutMessage: store.auth.logoutMessage\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\tsetLogoutMessage: bindActionCreators(setLogoutMessage, dispatch),\n\tchange: bindActionCreators(change, dispatch)\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(Login);\n"]},"metadata":{},"sourceType":"module"}