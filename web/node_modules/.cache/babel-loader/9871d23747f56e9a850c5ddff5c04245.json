{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Admin/User/BankData.js\";\nimport React, { Component } from 'react';\nimport { SubmissionError } from 'redux-form';\nimport { updateUserData, approveBank, rejectBank } from './actions';\nimport { Card, Button, Input, Popconfirm, Icon, message, Col, Row } from 'antd';\nimport { ModalForm } from '../../../components';\nvar Form = ModalForm('BANK_DATA', 'bank_data');\nvar BankFields = {\n  bank_name: {\n    type: 'text',\n    label: 'Bank Name'\n  },\n  account_number: {\n    type: 'text',\n    label: 'Account Number'\n  },\n  card_number: {\n    type: 'text',\n    label: 'Card Number'\n  }\n};\n\nvar Fields = _objectSpread({}, BankFields); // const generateInitialValues = (initialValues) => {\n// \tconst values = {\n// \t\t...initialValues\n// \t};\n// \treturn values;\n// };\n\n\nvar BankData =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(BankData, _Component);\n\n  function BankData() {\n    var _this;\n\n    _classCallCheck(this, BankData);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BankData).call(this));\n\n    _this.onCancel = function () {\n      _this.setState({\n        formVisible: false\n      });\n    };\n\n    _this.onSubmit = function (onChangeSuccess, bank, userId) {\n      return function (values) {\n        var bank_account = bank;\n        values.id = values.account_number + '-man';\n        values.status = 3;\n        bank_account.push(values);\n        var submitData = {\n          id: userId,\n          bank_account: bank_account\n        };\n        return updateUserData(submitData).then(function (data) {\n          _this.closeModal();\n\n          if (onChangeSuccess) {\n            onChangeSuccess(_objectSpread({}, values, submitData, data));\n          }\n        }).catch(function (err) {\n          message.error('error');\n          throw new SubmissionError({\n            _error: err.data.message\n          });\n        });\n      };\n    };\n\n    _this.showModal = function () {\n      _this.setState({\n        formVisible: true\n      });\n    };\n\n    _this.closeModal = function () {\n      _this.setState({\n        formVisible: false\n      });\n    };\n\n    _this.handleNoteChange = function (event) {\n      _this.setState({\n        note: event.target.value\n      });\n    };\n\n    _this.deleteBank = function (id) {\n      var _this$state = _this.state,\n          bank = _this$state.bank,\n          userId = _this$state.userId;\n      var newBanks = bank.filter(function (b) {\n        return b.id !== id;\n      });\n\n      _this.setState({\n        bank: newBanks\n      });\n\n      var submitData = {\n        id: userId,\n        bank_account: newBanks\n      };\n      updateUserData(submitData).then(function (data) {\n        message.success('Bank deleted');\n      }).catch(function (err) {\n        message.error('error'); // throw new SubmissionError({ _error: err.data.message });\n      });\n    };\n\n    _this.approveBank = function (values) {\n      // const newBanks = this.state.bank.filter((b) => {\n      // \treturn b.id !== values.bank_id;\n      // });\n      approveBank(values).then(function (data) {\n        message.success('Bank approved');\n      }).catch(function (err) {\n        message.error('error'); // throw new SubmissionError({ _error: err.data.message });\n      });\n    };\n\n    _this.rejectBank = function (values) {\n      var newBanks = _this.state.bank.filter(function (b) {\n        return b.id !== values.bank_id;\n      });\n\n      _this.setState({\n        bank: newBanks\n      });\n\n      rejectBank(values).then(function (data) {\n        message.success('Bank rejected');\n      }).catch(function (err) {\n        message.error('error'); // throw new SubmissionError({ _error: err.data.message });\n      });\n    };\n\n    _this.state = {\n      bank: [],\n      formVisible: false,\n      note: ''\n    };\n    return _this;\n  }\n\n  _createClass(BankData, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var bank = [];\n\n      if (this.props.initialValues.bank_account && this.props.initialValues.bank_account.length > 0 && this.props.initialValues.bank_account[0].bank_name !== '') {\n        bank = this.props.initialValues.bank_account;\n      }\n\n      this.setState({\n        bank: bank,\n        userId: this.props.initialValues.id\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state2 = this.state,\n          bank = _this$state2.bank,\n          formVisible = _this$state2.formVisible,\n          userId = _this$state2.userId;\n      var onChangeSuccess = this.props.onChangeSuccess;\n      var disabled = false;\n      return React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, bank && bank.length <= 3 ? disabled = false : disabled = true, React.createElement(Button, {\n        disabled: disabled,\n        onClick: function onClick() {\n          return _this2.showModal();\n        },\n        type: \"primary\",\n        icon: \"plus-circle\",\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Add bank\"), React.createElement(Form, {\n        onSubmit: this.onSubmit(onChangeSuccess, bank, userId),\n        onCancel: this.onCancel,\n        title: \"Add a new bank\",\n        fields: Fields,\n        visible: formVisible,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(Row, {\n        gutter: 16,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, bank.map(function (bank) {\n        return React.createElement(Col, {\n          style: {\n            margin: '1em'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, React.createElement(Card, {\n          key: bank.id || bank.bank_name,\n          title: bank.bank_name,\n          extra: bank.status === 1 ? React.createElement(\"div\", {\n            style: {\n              width: '10em'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 182\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 183\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: function onClick() {\n              return _this2.approveBank({\n                user_id: userId,\n                bank_id: bank.id\n              });\n            },\n            type: \"primary\",\n            icon: \"check\",\n            size: 10,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 184\n            },\n            __self: this\n          }, \"Accept\")), React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            },\n            __self: this\n          }, React.createElement(Button, {\n            onClick: function onClick() {\n              return _this2.rejectBank({\n                user_id: userId,\n                bank_id: bank.id,\n                message: _this2.state.note\n              });\n            },\n            type: \"danger\",\n            icon: \"close\",\n            size: 10,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 199\n            },\n            __self: this\n          }, \"Reject\"), React.createElement(Input.TextArea, {\n            rows: 4,\n            value: _this2.state.note,\n            onChange: _this2.handleNoteChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 213\n            },\n            __self: this\n          }))) : React.createElement(Popconfirm, {\n            title: \"Are you sure delete this task?\",\n            onConfirm: function onConfirm() {\n              return _this2.deleteBank(bank.id);\n            },\n            okText: \"Yes\",\n            cancelText: \"No\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 221\n            },\n            __self: this\n          }, React.createElement(Icon, {\n            type: \"delete\",\n            style: {\n              fontSize: '20px',\n              color: '#08c'\n            },\n            theme: \"outlined\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 227\n            },\n            __self: this\n          })),\n          style: {\n            width: 300\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, bank.bank_name), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241\n          },\n          __self: this\n        }, bank.account_number), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242\n          },\n          __self: this\n        }, bank.card_number)));\n      })));\n    }\n  }]);\n\n  return BankData;\n}(Component);\n\nexport default BankData;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Admin/User/BankData.js"],"names":["React","Component","SubmissionError","updateUserData","approveBank","rejectBank","Card","Button","Input","Popconfirm","Icon","message","Col","Row","ModalForm","Form","BankFields","bank_name","type","label","account_number","card_number","Fields","BankData","onCancel","setState","formVisible","onSubmit","onChangeSuccess","bank","userId","values","bank_account","id","status","push","submitData","then","data","closeModal","catch","err","error","_error","showModal","handleNoteChange","event","note","target","value","deleteBank","state","newBanks","filter","b","success","bank_id","props","initialValues","length","disabled","map","margin","width","user_id","fontSize","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { SubmissionError } from 'redux-form';\nimport { updateUserData, approveBank, rejectBank } from './actions';\nimport { Card, Button, Input, Popconfirm, Icon, message, Col, Row } from 'antd';\nimport { ModalForm } from '../../../components';\n\nconst Form = ModalForm('BANK_DATA', 'bank_data');\n\nconst BankFields = {\n\tbank_name: {\n\t\ttype: 'text',\n\t\tlabel: 'Bank Name'\n\t},\n\taccount_number: {\n\t\ttype: 'text',\n\t\tlabel: 'Account Number'\n\t},\n\tcard_number: {\n\t\ttype: 'text',\n\t\tlabel: 'Card Number'\n\t}\n};\n\nconst Fields = {\n\t...BankFields\n};\n\n// const generateInitialValues = (initialValues) => {\n// \tconst values = {\n// \t\t...initialValues\n// \t};\n// \treturn values;\n// };\n\nclass BankData extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = {\n\t\t\tbank: [],\n\t\t\tformVisible: false,\n\t\t\tnote: ''\n\t\t};\n\t}\n\n\tcomponentWillMount() {\n\t\tlet bank = [];\n\t\tif (\n\t\t\tthis.props.initialValues.bank_account &&\n\t\t\tthis.props.initialValues.bank_account.length > 0 &&\n\t\t\tthis.props.initialValues.bank_account[0].bank_name !== ''\n\t\t) {\n\t\t\tbank = this.props.initialValues.bank_account;\n\t\t}\n\t\tthis.setState({\n\t\t\tbank,\n\t\t\tuserId: this.props.initialValues.id\n\t\t});\n\t}\n\n\tonCancel = () => {\n\t\tthis.setState({ formVisible: false });\n\t};\n\n\tonSubmit = (onChangeSuccess, bank, userId) => (values) => {\n\t\tlet bank_account = bank;\n\t\tvalues.id = values.account_number + '-man';\n\t\tvalues.status = 3;\n\t\tbank_account.push(values);\n\t\tconst submitData = {\n\t\t\tid: userId,\n\t\t\tbank_account\n\t\t};\n\t\treturn updateUserData(submitData)\n\t\t\t.then((data) => {\n\t\t\t\tthis.closeModal();\n\t\t\t\tif (onChangeSuccess) {\n\t\t\t\t\tonChangeSuccess({\n\t\t\t\t\t\t...values,\n\t\t\t\t\t\t...submitData,\n\t\t\t\t\t\t...data\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tmessage.error('error');\n\t\t\t\tthrow new SubmissionError({ _error: err.data.message });\n\t\t\t});\n\t};\n\n\tshowModal = () => {\n\t\tthis.setState({ formVisible: true });\n\t};\n\tcloseModal = () => {\n\t\tthis.setState({ formVisible: false });\n\t};\n\n\thandleNoteChange = (event) => {\n\t\tthis.setState({ note: event.target.value });\n\t};\n\n\tdeleteBank = (id) => {\n\t\tconst { bank, userId } = this.state;\n\t\tconst newBanks = bank.filter((b) => {\n\t\t\treturn b.id !== id;\n\t\t});\n\t\tthis.setState({ bank: newBanks });\n\t\tconst submitData = {\n\t\t\tid: userId,\n\t\t\tbank_account: newBanks\n\t\t};\n\t\tupdateUserData(submitData)\n\t\t\t.then((data) => {\n\t\t\t\tmessage.success('Bank deleted');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tmessage.error('error');\n\t\t\t\t// throw new SubmissionError({ _error: err.data.message });\n\t\t\t});\n\t};\n\n\tapproveBank = (values) => {\n\t\t// const newBanks = this.state.bank.filter((b) => {\n\t\t// \treturn b.id !== values.bank_id;\n\t\t// });\n\t\tapproveBank(values)\n\t\t\t.then((data) => {\n\t\t\t\tmessage.success('Bank approved');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tmessage.error('error');\n\t\t\t\t// throw new SubmissionError({ _error: err.data.message });\n\t\t\t});\n\t};\n\n\trejectBank = (values) => {\n\t\tconst newBanks = this.state.bank.filter((b) => {\n\t\t\treturn b.id !== values.bank_id;\n\t\t});\n\t\tthis.setState({ bank: newBanks });\n\t\trejectBank(values)\n\t\t\t.then((data) => {\n\t\t\t\tmessage.success('Bank rejected');\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tmessage.error('error');\n\t\t\t\t// throw new SubmissionError({ _error: err.data.message });\n\t\t\t});\n\t};\n\n\trender() {\n\t\tconst { bank, formVisible, userId } = this.state;\n\t\tconst { onChangeSuccess } = this.props;\n\t\tlet disabled = false;\n\t\treturn (\n\t\t\t<Row>\n\t\t\t\t{bank && bank.length <= 3 ? (disabled = false) : (disabled = true)}\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonClick={() => this.showModal()}\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\ticon=\"plus-circle\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t>\n\t\t\t\t\tAdd bank\n\t\t\t\t</Button>\n\t\t\t\t<Form\n\t\t\t\t\tonSubmit={this.onSubmit(onChangeSuccess, bank, userId)}\n\t\t\t\t\tonCancel={this.onCancel}\n\t\t\t\t\ttitle=\"Add a new bank\"\n\t\t\t\t\tfields={Fields}\n\t\t\t\t\tvisible={formVisible}\n\t\t\t\t/>\n\t\t\t\t<Row gutter={16}>\n\t\t\t\t\t{bank.map((bank) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Col style={{ margin: '1em' }}>\n\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\tkey={bank.id || bank.bank_name}\n\t\t\t\t\t\t\t\t\ttitle={bank.bank_name}\n\t\t\t\t\t\t\t\t\textra={\n\t\t\t\t\t\t\t\t\t\tbank.status === 1 ? (\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ width: '10em' }}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.approveBank({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser_id: userId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbank_id: bank.id\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"check\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={10}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tAccept\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.rejectBank({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuser_id: userId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbank_id: bank.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmessage: this.state.note\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon=\"close\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={10}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tReject\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Input.TextArea\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.note}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleNoteChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Popconfirm\n\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Are you sure delete this task?\"\n\t\t\t\t\t\t\t\t\t\t\t\tonConfirm={() => this.deleteBank(bank.id)}\n\t\t\t\t\t\t\t\t\t\t\t\tokText=\"Yes\"\n\t\t\t\t\t\t\t\t\t\t\t\tcancelText=\"No\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"delete\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '20px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: '#08c'\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttheme=\"outlined\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Popconfirm>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tstyle={{ width: 300 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<p>{bank.bank_name}</p>\n\t\t\t\t\t\t\t\t\t<p>{bank.account_number}</p>\n\t\t\t\t\t\t\t\t\t<p>{bank.card_number}</p>\n\t\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</Row>\n\t\t\t</Row>\n\t\t);\n\t}\n}\n\nexport default BankData;\n"]},"metadata":{},"sourceType":"module"}