{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/components/AppBar/index.js\";\nimport React, { Component } from 'react';\nimport { Icon } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\nimport ReactSVG from 'react-svg';\nimport { isMobile } from 'react-device-detect';\nimport { IS_PRO_VERSION, PRO_URL, DEFAULT_VERSION_REDIRECT, ICONS, BASE_CURRENCY, DEFAULT_COIN_DATA } from '../../config/constants';\nimport { LinkButton } from './LinkButton';\nimport PairTabs from './PairTabs';\nimport MenuList from './MenuList';\nimport { MobileBarWrapper } from '../';\nimport STRINGS from '../../config/localizedStrings';\nimport { isLoggedIn, isAdmin } from '../../utils/token';\nimport { getMe, setMe } from '../../actions/userAction';\nimport { getTickers, setNotification, NOTIFICATIONS } from '../../actions/appActions';\n\nvar AppBar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AppBar, _Component);\n\n  function AppBar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AppBar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AppBar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      symbolSelectorIsOpen: false,\n      isAccountMenu: false,\n      selectedMenu: '',\n      securityPending: 0,\n      verificationPending: 0\n    };\n\n    _this.getUserDetails = function () {\n      return _this.props.getMe().then(function (_ref) {\n        var value = _ref.value;\n\n        if (value && value.data && value.data.id) {\n          _this.props.setMe(value.data);\n        }\n      }).catch(function (err) {\n        var message = err.message || JSON.stringify(err);\n\n        _this.props.setNotification(NOTIFICATIONS.ERROR, message);\n      });\n    };\n\n    _this.checkVerificationStatus = function (user) {\n      var userData = user.userData || {};\n\n      if (!Object.keys(userData).length && user.id) {\n        userData = user;\n      }\n\n      var _userData = userData,\n          phone_number = _userData.phone_number,\n          full_name = _userData.full_name,\n          _userData$id_data = _userData.id_data,\n          id_data = _userData$id_data === void 0 ? {} : _userData$id_data,\n          _userData$bank_accoun = _userData.bank_account,\n          bank_account = _userData$bank_accoun === void 0 ? [] : _userData$bank_accoun;\n      var securityPending = 0;\n      var verificationPending = 0;\n\n      if (user.id) {\n        if (!user.otp_enabled) {\n          securityPending += 1;\n        }\n\n        if (user.verification_level < 1 && !full_name) {\n          verificationPending += 1;\n        }\n\n        if (id_data.status === 0 || id_data.status === 2) {\n          verificationPending += 1;\n        }\n\n        if (!phone_number) {\n          verificationPending += 1;\n        }\n\n        if (bank_account.filter(function (acc) {\n          return acc.status === 0 || acc.status === 2;\n        }).length === bank_account.length) {\n          verificationPending += 1;\n        }\n\n        _this.setState({\n          securityPending: securityPending,\n          verificationPending: verificationPending\n        });\n      }\n    };\n\n    _this.toogleSymbolSelector = function () {\n      _this.setState({\n        symbolSelectorIsOpen: !_this.state.symbolSelectorIsOpen\n      });\n    };\n\n    _this.onChangeSymbol = function (symbol) {\n      _this.props.changeSymbol(symbol);\n\n      _this.toogleSymbolSelector();\n    };\n\n    _this.handleAccountMenu = function () {\n      _this.setState({\n        isAccountMenu: !_this.state.isAccountMenu\n      });\n    };\n\n    _this.closeAccountMenu = function () {\n      _this.setState({\n        isAccountMenu: false\n      });\n    };\n\n    _this.renderSymbolOption = function (_ref2, index) {\n      var symbol = _ref2.symbol,\n          name = _ref2.name,\n          currencySymbol = _ref2.currencySymbol,\n          iconPath = _ref2.iconPath;\n\n      var _ref3 = _this.props.coins[symbol] || {},\n          fullname = _ref3.fullname;\n\n      return React.createElement(\"div\", {\n        key: index,\n        className: \"app_bar-currency_option\",\n        onClick: function onClick() {\n          return _this.onChangeSymbol(symbol);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        alt: symbol,\n        src: iconPath,\n        className: \"app_bar-currency_display-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, fullname));\n    };\n\n    _this.renderSplashActions = function (token, verifyingToken) {\n      var _this$state = _this.state,\n          securityPending = _this$state.securityPending,\n          verificationPending = _this$state.verificationPending;\n\n      if (verifyingToken) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        });\n      }\n\n      var WRAPPER_CLASSES = ['app_bar-controllers-splash', 'd-flex'];\n      return token ? React.createElement(\"div\", {\n        className: \"d-flex app-bar-account\",\n        onClick: _this.handleSummary,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"app-bar-account-content mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.SIDEBAR_ACCOUNT_INACTIVE,\n        wrapperClassName: \"app-bar-currency-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), !!(securityPending + verificationPending) && React.createElement(\"div\", {\n        className: \"app-bar-account-notification\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, securityPending + verificationPending)), React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, STRINGS.ACCOUNT_TEXT)) : React.createElement(\"div\", {\n        className: classnames.apply(void 0, WRAPPER_CLASSES),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(LinkButton, {\n        path: \"/login\",\n        text: STRINGS.LOGIN_TEXT,\n        buttonClassName: \"contrast\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }));\n    };\n\n    _this.renderIcon = function (isHome, theme) {\n      return React.createElement(\"div\", {\n        className: classnames('app_bar-icon', 'text-uppercase'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, isHome ? React.createElement(\"img\", {\n        src: ICONS.LOGO_GREY,\n        alt: STRINGS.APP_NAME,\n        className: \"app_bar-icon-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }) : React.createElement(Link, {\n        href: IS_PRO_VERSION ? PRO_URL : DEFAULT_VERSION_REDIRECT,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.LOGO_BLACK,\n        wrapperClassName: \"app_bar-icon-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })));\n    };\n\n    _this.handleSummary = function () {\n      _this.props.router.push('/summary');\n    };\n\n    _this.handleMenu = function (menu) {\n      if (menu === 'account') {\n        _this.props.router.push('/account');\n      } else if (menu === 'security') {\n        _this.props.router.push('/security');\n      } else if (menu === 'verification') {\n        _this.props.router.push('/verification');\n      } else if (menu === 'wallet') {\n        _this.props.router.push('/wallet');\n      } else if (menu === 'settings') {\n        _this.props.router.push('/settings');\n      }\n      /* else if (menu === 'api') {\n      this.props.router.push('/api');\n      } */\n      else if (menu === 'summary') {\n          _this.props.router.push('/summary');\n        }\n\n      _this.setState({\n        selectedMenu: menu,\n        isAccountMenu: false\n      });\n    };\n\n    _this.setActiveMenu = function (path) {\n      var selectedMenu = _this.state.selectedMenu;\n\n      switch (path) {\n        case '/account':\n          selectedMenu = 'account';\n          break;\n\n        case '/summary':\n          selectedMenu = 'summary';\n          break;\n\n        case '/wallet':\n          selectedMenu = 'wallet';\n          break;\n\n        case '/security':\n          selectedMenu = 'security';\n          break;\n\n        case '/settings':\n          selectedMenu = 'settings';\n          break;\n\n        case '/verification':\n          selectedMenu = 'verification';\n          break;\n\n        case '/api':\n          selectedMenu = 'api';\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState({\n        selectedMenu: selectedMenu\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(AppBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.location && this.props.location.pathname) {\n        this.setActiveMenu(this.props.location.pathname);\n      }\n\n      if (this.props.user) {\n        this.checkVerificationStatus(this.props.user);\n      }\n\n      if (this.props.isHome && this.props.token) {\n        this.getUserDetails();\n      }\n\n      this.props.getTickers();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (this.props.location && nextProps.location && this.props.location.pathname !== nextProps.location.pathname) {\n        this.setActiveMenu(nextProps.location.pathname);\n      }\n\n      if (JSON.stringify(this.props.user) !== JSON.stringify(nextProps.user)) {\n        this.checkVerificationStatus(nextProps.user);\n      }\n\n      if (this.props.token !== nextProps.token && nextProps.token && nextProps.isHome) {\n        this.getUserDetails();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          noBorders = _this$props.noBorders,\n          token = _this$props.token,\n          verifyingToken = _this$props.verifyingToken,\n          isHome = _this$props.isHome,\n          theme = _this$props.theme,\n          logout = _this$props.logout,\n          router = _this$props.router,\n          activePath = _this$props.activePath,\n          location = _this$props.location,\n          pairs = _this$props.pairs,\n          coins = _this$props.coins;\n      var _this$state2 = this.state,\n          isAccountMenu = _this$state2.isAccountMenu,\n          selectedMenu = _this$state2.selectedMenu,\n          securityPending = _this$state2.securityPending,\n          verificationPending = _this$state2.verificationPending;\n      var totalPending = securityPending + verificationPending;\n      var pair = '';\n\n      if (Object.keys(pairs).length) {\n        var pair_base = pairs[Object.keys(pairs)[0]].pair_base;\n\n        var _ref4 = coins[BASE_CURRENCY] || DEFAULT_COIN_DATA,\n            symbol = _ref4.symbol;\n\n        pair = \"\".concat(pair_base, \"-\").concat(symbol.toLowerCase());\n      } else {\n        pair = this.props.pair;\n      }\n\n      return isMobile ? React.createElement(MobileBarWrapper, {\n        className: classnames('d-flex', 'app_bar-mobile', 'align-items-center', isHome ? 'justify-content-between pl-4 pr-4' : 'justify-content-center'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.LOGO_GREY,\n        wrapperClassName: \"homeicon-svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      })), isHome && this.renderSplashActions(token, verifyingToken)) : React.createElement(\"div\", {\n        className: classnames('app_bar justify-content-between', {\n          'no-borders': noBorders\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-center h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318\n        },\n        __self: this\n      }, this.renderIcon(isHome, theme)), !isHome && React.createElement(PairTabs, {\n        activePath: activePath,\n        location: location,\n        router: router,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })), !isHome ? isLoggedIn() ? React.createElement(\"div\", {\n        className: \"d-flex app-bar-account\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex app_bar-quicktrade-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, isAdmin() ? React.createElement(Link, {\n        to: \"/admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('app_bar-quicktrade', 'd-flex', {\n          'quick_trade-active': location.pathname === '/admin'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        type: \"dashboard\",\n        style: {\n          lineHeight: '22px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, STRINGS.ADMIN_DASH))) : null, React.createElement(Link, {\n        to: \"/trade/add/tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('app_bar-quicktrade', 'd-flex', {\n          'quick_trade-active': location.pathname === '/trade/add/tabs'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.SIDEBAR_TRADING_ACTIVE,\n        wrapperClassName: \"quicktrade_icon mx-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, STRINGS.PRO_TRADE))), React.createElement(Link, {\n        to: \"/quick-trade/\".concat(pair),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('app_bar-quicktrade', 'd-flex', {\n          'quick_trade-active': activePath === 'quick-trade'\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.QUICK_TRADE_TAB_ACTIVE,\n        wrapperClassName: \"quicktrade_icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"d-flex align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, STRINGS.QUICK_TRADE)))), React.createElement(\"div\", {\n        className: classnames('app-bar-account-content', {\n          'account-inactive': activePath !== 'account' && activePath !== 'wallet'\n        }),\n        onClick: this.handleAccountMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(ReactSVG, {\n        path: ICONS.SIDEBAR_ACCOUNT_INACTIVE,\n        wrapperClassName: \"app-bar-account-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386\n        },\n        __self: this\n      }), !!totalPending && React.createElement(\"div\", {\n        className: \"app-bar-account-notification\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, totalPending))) : null : this.renderSplashActions(token, verifyingToken), isAccountMenu && React.createElement(MenuList, {\n        selectedMenu: selectedMenu,\n        securityPending: securityPending,\n        verificationPending: verificationPending,\n        handleMenu: this.handleMenu,\n        logout: logout,\n        activePath: activePath,\n        closeAccountMenu: this.closeAccountMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return AppBar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  var userData = !state.user.id && ownProps.user && ownProps.user.id ? ownProps.user : state.user;\n  return {\n    user: userData,\n    theme: state.app.theme,\n    pair: state.app.pair,\n    pairs: state.app.pairs,\n    coins: state.app.coins\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getMe: bindActionCreators(getMe, dispatch),\n    setMe: bindActionCreators(setMe, dispatch),\n    setNotification: bindActionCreators(setNotification, dispatch),\n    getTickers: bindActionCreators(getTickers, dispatch)\n  };\n};\n\nAppBar.defaultProps = {\n  noBorders: false,\n  isHome: false\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(AppBar);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/components/AppBar/index.js"],"names":["React","Component","Icon","connect","bindActionCreators","classnames","Link","ReactSVG","isMobile","IS_PRO_VERSION","PRO_URL","DEFAULT_VERSION_REDIRECT","ICONS","BASE_CURRENCY","DEFAULT_COIN_DATA","LinkButton","PairTabs","MenuList","MobileBarWrapper","STRINGS","isLoggedIn","isAdmin","getMe","setMe","getTickers","setNotification","NOTIFICATIONS","AppBar","state","symbolSelectorIsOpen","isAccountMenu","selectedMenu","securityPending","verificationPending","getUserDetails","props","then","value","data","id","catch","err","message","JSON","stringify","ERROR","checkVerificationStatus","user","userData","Object","keys","length","phone_number","full_name","id_data","bank_account","otp_enabled","verification_level","status","filter","acc","setState","toogleSymbolSelector","onChangeSymbol","symbol","changeSymbol","handleAccountMenu","closeAccountMenu","renderSymbolOption","index","name","currencySymbol","iconPath","coins","fullname","renderSplashActions","token","verifyingToken","WRAPPER_CLASSES","handleSummary","SIDEBAR_ACCOUNT_INACTIVE","ACCOUNT_TEXT","LOGIN_TEXT","renderIcon","isHome","theme","LOGO_GREY","APP_NAME","LOGO_BLACK","router","push","handleMenu","menu","setActiveMenu","path","location","pathname","nextProps","noBorders","logout","activePath","pairs","totalPending","pair","pair_base","toLowerCase","lineHeight","ADMIN_DASH","SIDEBAR_TRADING_ACTIVE","PRO_TRADE","QUICK_TRADE_TAB_ACTIVE","QUICK_TRADE","mapStateToProps","ownProps","app","mapDispatchToProps","dispatch","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Icon } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\nimport ReactSVG from 'react-svg';\nimport { isMobile } from 'react-device-detect';\nimport {\n\tIS_PRO_VERSION,\n\tPRO_URL,\n\tDEFAULT_VERSION_REDIRECT,\n\tICONS,\n\tBASE_CURRENCY,\n\tDEFAULT_COIN_DATA\n} from '../../config/constants';\nimport { LinkButton } from './LinkButton';\nimport PairTabs from './PairTabs';\nimport MenuList from './MenuList';\nimport { MobileBarWrapper } from '../';\nimport STRINGS from '../../config/localizedStrings';\nimport { isLoggedIn, isAdmin } from '../../utils/token';\nimport { getMe, setMe } from '../../actions/userAction';\nimport {\n\tgetTickers,\n\tsetNotification,\n\tNOTIFICATIONS\n} from '../../actions/appActions';\n\nclass AppBar extends Component {\n\tstate = {\n\t\tsymbolSelectorIsOpen: false,\n\t\tisAccountMenu: false,\n\t\tselectedMenu: '',\n\t\tsecurityPending: 0,\n\t\tverificationPending: 0\n\t};\n\n\tcomponentDidMount() {\n\t\tif (this.props.location && this.props.location.pathname) {\n\t\t\tthis.setActiveMenu(this.props.location.pathname);\n\t\t}\n\t\tif (this.props.user) {\n\t\t\tthis.checkVerificationStatus(this.props.user);\n\t\t}\n\t\tif (this.props.isHome && this.props.token) {\n\t\t\tthis.getUserDetails();\n\t\t}\n\t\tthis.props.getTickers();\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tthis.props.location &&\n\t\t\tnextProps.location &&\n\t\t\tthis.props.location.pathname !== nextProps.location.pathname\n\t\t) {\n\t\t\tthis.setActiveMenu(nextProps.location.pathname);\n\t\t}\n\t\tif (JSON.stringify(this.props.user) !== JSON.stringify(nextProps.user)) {\n\t\t\tthis.checkVerificationStatus(nextProps.user);\n\t\t}\n\t\tif (\n\t\t\tthis.props.token !== nextProps.token &&\n\t\t\tnextProps.token &&\n\t\t\tnextProps.isHome\n\t\t) {\n\t\t\tthis.getUserDetails();\n\t\t}\n\t}\n\n\tgetUserDetails = () => {\n\t\treturn this.props\n\t\t\t.getMe()\n\t\t\t.then(({ value }) => {\n\t\t\t\tif (value && value.data && value.data.id) {\n\t\t\t\t\tthis.props.setMe(value.data);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconst message = err.message || JSON.stringify(err);\n\t\t\t\tthis.props.setNotification(NOTIFICATIONS.ERROR, message);\n\t\t\t});\n\t};\n\n\tcheckVerificationStatus = (user) => {\n\t\tlet userData = user.userData || {};\n\t\tif (!Object.keys(userData).length && user.id) {\n\t\t\tuserData = user;\n\t\t}\n\t\tconst {\n\t\t\tphone_number,\n\t\t\tfull_name,\n\t\t\tid_data = {},\n\t\t\tbank_account = []\n\t\t} = userData;\n\t\tlet securityPending = 0;\n\t\tlet verificationPending = 0;\n\t\tif (user.id) {\n\t\t\tif (!user.otp_enabled) {\n\t\t\t\tsecurityPending += 1;\n\t\t\t}\n\t\t\tif (user.verification_level < 1 && !full_name) {\n\t\t\t\tverificationPending += 1;\n\t\t\t}\n\t\t\tif (id_data.status === 0 || id_data.status === 2) {\n\t\t\t\tverificationPending += 1;\n\t\t\t}\n\t\t\tif (!phone_number) {\n\t\t\t\tverificationPending += 1;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tbank_account.filter((acc) => acc.status === 0 || acc.status === 2)\n\t\t\t\t\t.length === bank_account.length\n\t\t\t) {\n\t\t\t\tverificationPending += 1;\n\t\t\t}\n\t\t\tthis.setState({ securityPending, verificationPending });\n\t\t}\n\t};\n\n\ttoogleSymbolSelector = () => {\n\t\tthis.setState({ symbolSelectorIsOpen: !this.state.symbolSelectorIsOpen });\n\t};\n\n\tonChangeSymbol = (symbol) => {\n\t\tthis.props.changeSymbol(symbol);\n\t\tthis.toogleSymbolSelector();\n\t};\n\n\thandleAccountMenu = () => {\n\t\tthis.setState({ isAccountMenu: !this.state.isAccountMenu });\n\t};\n\n\tcloseAccountMenu = () => {\n\t\tthis.setState({ isAccountMenu: false });\n\t};\n\n\trenderSymbolOption = ({ symbol, name, currencySymbol, iconPath }, index) => {\n\t\tconst { fullname } = this.props.coins[symbol] || {};\n\t\treturn (\n\t\t\t<div\n\t\t\t\tkey={index}\n\t\t\t\tclassName=\"app_bar-currency_option\"\n\t\t\t\tonClick={() => this.onChangeSymbol(symbol)}\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\talt={symbol}\n\t\t\t\t\tsrc={iconPath}\n\t\t\t\t\tclassName=\"app_bar-currency_display-icon\"\n\t\t\t\t/>\n\t\t\t\t<span>{fullname}</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderSplashActions = (token, verifyingToken) => {\n\t\tconst { securityPending, verificationPending } = this.state;\n\t\tif (verifyingToken) {\n\t\t\treturn <div />;\n\t\t}\n\n\t\tconst WRAPPER_CLASSES = ['app_bar-controllers-splash', 'd-flex'];\n\t\treturn token ? (\n\t\t\t<div className=\"d-flex app-bar-account\" onClick={this.handleSummary}>\n\t\t\t\t<div className=\"app-bar-account-content mr-2\">\n\t\t\t\t\t<ReactSVG\n\t\t\t\t\t\tpath={ICONS.SIDEBAR_ACCOUNT_INACTIVE}\n\t\t\t\t\t\twrapperClassName=\"app-bar-currency-icon\"\n\t\t\t\t\t/>\n\t\t\t\t\t{!!(securityPending + verificationPending) && (\n\t\t\t\t\t\t<div className=\"app-bar-account-notification\">\n\t\t\t\t\t\t\t{securityPending + verificationPending}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"d-flex align-items-center\">{STRINGS.ACCOUNT_TEXT}</div>\n\t\t\t</div>\n\t\t) : (\n\t\t\t\t<div className={classnames(...WRAPPER_CLASSES)}>\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\tpath=\"/login\"\n\t\t\t\t\t\ttext={STRINGS.LOGIN_TEXT}\n\t\t\t\t\t\tbuttonClassName=\"contrast\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t};\n\n\trenderIcon = (isHome, theme) => {\n\t\treturn (\n\t\t\t<div className={classnames('app_bar-icon', 'text-uppercase')}>\n\t\t\t\t{isHome ? (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={ICONS.LOGO_GREY}\n\t\t\t\t\t\talt={STRINGS.APP_NAME}\n\t\t\t\t\t\tclassName=\"app_bar-icon-logo\"\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t\t<Link href={IS_PRO_VERSION ? PRO_URL : DEFAULT_VERSION_REDIRECT}>\n\t\t\t\t\t\t\t<ReactSVG\n\t\t\t\t\t\t\t\tpath={ICONS.LOGO_BLACK}\n\t\t\t\t\t\t\t\twrapperClassName=\"app_bar-icon-logo\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t};\n\n\thandleSummary = () => {\n\t\tthis.props.router.push('/summary');\n\t};\n\thandleMenu = (menu) => {\n\t\tif (menu === 'account') {\n\t\t\tthis.props.router.push('/account');\n\t\t} else if (menu === 'security') {\n\t\t\tthis.props.router.push('/security');\n\t\t} else if (menu === 'verification') {\n\t\t\tthis.props.router.push('/verification');\n\t\t} else if (menu === 'wallet') {\n\t\t\tthis.props.router.push('/wallet');\n\t\t} else if (menu === 'settings') {\n\t\t\tthis.props.router.push('/settings');\n\t\t} /* else if (menu === 'api') {\n\t\t\tthis.props.router.push('/api');\n\t\t} */ else if (\n\t\t\tmenu === 'summary'\n\t\t) {\n\t\t\tthis.props.router.push('/summary');\n\t\t}\n\t\tthis.setState({ selectedMenu: menu, isAccountMenu: false });\n\t};\n\n\tsetActiveMenu = (path) => {\n\t\tlet selectedMenu = this.state.selectedMenu;\n\t\tswitch (path) {\n\t\t\tcase '/account':\n\t\t\t\tselectedMenu = 'account';\n\t\t\t\tbreak;\n\t\t\tcase '/summary':\n\t\t\t\tselectedMenu = 'summary';\n\t\t\t\tbreak;\n\t\t\tcase '/wallet':\n\t\t\t\tselectedMenu = 'wallet';\n\t\t\t\tbreak;\n\t\t\tcase '/security':\n\t\t\t\tselectedMenu = 'security';\n\t\t\t\tbreak;\n\t\t\tcase '/settings':\n\t\t\t\tselectedMenu = 'settings';\n\t\t\t\tbreak;\n\t\t\tcase '/verification':\n\t\t\t\tselectedMenu = 'verification';\n\t\t\t\tbreak;\n\t\t\tcase '/api':\n\t\t\t\tselectedMenu = 'api';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({ selectedMenu });\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\tnoBorders,\n\t\t\ttoken,\n\t\t\tverifyingToken,\n\t\t\tisHome,\n\t\t\ttheme,\n\t\t\tlogout,\n\t\t\trouter,\n\t\t\tactivePath,\n\t\t\tlocation,\n\t\t\tpairs,\n\t\t\tcoins\n\t\t} = this.props;\n\t\tconst {\n\t\t\tisAccountMenu,\n\t\t\tselectedMenu,\n\t\t\tsecurityPending,\n\t\t\tverificationPending\n\t\t} = this.state;\n\t\tconst totalPending = securityPending + verificationPending;\n\t\tlet pair = '';\n\t\tif (Object.keys(pairs).length) {\n\t\t\tconst { pair_base } = pairs[Object.keys(pairs)[0]];\n\t\t\tconst { symbol } = coins[BASE_CURRENCY] || DEFAULT_COIN_DATA;\n\t\t\tpair = `${pair_base}-${symbol.toLowerCase()}`;\n\t\t} else {\n\t\t\tpair = this.props.pair;\n\t\t}\n\n\t\treturn isMobile ? (\n\t\t\t<MobileBarWrapper\n\t\t\t\tclassName={classnames(\n\t\t\t\t\t'd-flex',\n\t\t\t\t\t'app_bar-mobile',\n\t\t\t\t\t'align-items-center',\n\t\t\t\t\tisHome\n\t\t\t\t\t\t? 'justify-content-between pl-4 pr-4'\n\t\t\t\t\t\t: 'justify-content-center'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t<ReactSVG path={ICONS.LOGO_GREY} wrapperClassName=\"homeicon-svg\" />\n\t\t\t\t</Link>\n\t\t\t\t{isHome && this.renderSplashActions(token, verifyingToken)}\n\t\t\t</MobileBarWrapper>\n\t\t) : (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames('app_bar justify-content-between', {\n\t\t\t\t\t\t'no-borders': noBorders\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t<div className=\"d-flex align-items-center justify-content-center h-100\">\n\t\t\t\t\t\t\t{this.renderIcon(isHome, theme)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!isHome && (\n\t\t\t\t\t\t\t<PairTabs\n\t\t\t\t\t\t\t\tactivePath={activePath}\n\t\t\t\t\t\t\t\tlocation={location}\n\t\t\t\t\t\t\t\trouter={router}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{!isHome ? (\n\t\t\t\t\t\tisLoggedIn() ? (\n\t\t\t\t\t\t\t<div className=\"d-flex app-bar-account\">\n\t\t\t\t\t\t\t\t<div className=\"d-flex app_bar-quicktrade-container\">\n\t\t\t\t\t\t\t\t\t{isAdmin() ? (\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/admin\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classnames('app_bar-quicktrade', 'd-flex', {\n\t\t\t\t\t\t\t\t\t\t\t\t\t'quick_trade-active': location.pathname === '/admin'\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon type=\"dashboard\" style={{ lineHeight: '22px' }} />\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{STRINGS.ADMIN_DASH}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t<Link to=\"/trade/add/tabs\">\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames('app_bar-quicktrade', 'd-flex', {\n\t\t\t\t\t\t\t\t\t\t\t\t'quick_trade-active':\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.pathname === '/trade/add/tabs'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ReactSVG\n\t\t\t\t\t\t\t\t\t\t\t\tpath={ICONS.SIDEBAR_TRADING_ACTIVE}\n\t\t\t\t\t\t\t\t\t\t\t\twrapperClassName=\"quicktrade_icon mx-1\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t{STRINGS.PRO_TRADE}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t<Link to={`/quick-trade/${pair}`}>\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={classnames('app_bar-quicktrade', 'd-flex', {\n\t\t\t\t\t\t\t\t\t\t\t\t'quick_trade-active': activePath === 'quick-trade'\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ReactSVG\n\t\t\t\t\t\t\t\t\t\t\t\tpath={ICONS.QUICK_TRADE_TAB_ACTIVE}\n\t\t\t\t\t\t\t\t\t\t\t\twrapperClassName=\"quicktrade_icon\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex align-items-center\">\n\t\t\t\t\t\t\t\t\t\t\t\t{STRINGS.QUICK_TRADE}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classnames('app-bar-account-content', {\n\t\t\t\t\t\t\t\t\t\t'account-inactive':\n\t\t\t\t\t\t\t\t\t\t\tactivePath !== 'account' && activePath !== 'wallet'\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\tonClick={this.handleAccountMenu}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ReactSVG\n\t\t\t\t\t\t\t\t\t\tpath={ICONS.SIDEBAR_ACCOUNT_INACTIVE}\n\t\t\t\t\t\t\t\t\t\twrapperClassName=\"app-bar-account-icon\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{!!totalPending && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"app-bar-account-notification\">\n\t\t\t\t\t\t\t\t\t\t\t{totalPending}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null\n\t\t\t\t\t) : (\n\t\t\t\t\t\t\tthis.renderSplashActions(token, verifyingToken)\n\t\t\t\t\t\t)}\n\t\t\t\t\t{isAccountMenu && (\n\t\t\t\t\t\t<MenuList\n\t\t\t\t\t\t\tselectedMenu={selectedMenu}\n\t\t\t\t\t\t\tsecurityPending={securityPending}\n\t\t\t\t\t\t\tverificationPending={verificationPending}\n\t\t\t\t\t\t\thandleMenu={this.handleMenu}\n\t\t\t\t\t\t\tlogout={logout}\n\t\t\t\t\t\t\tactivePath={activePath}\n\t\t\t\t\t\t\tcloseAccountMenu={this.closeAccountMenu}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t}\n}\n\nconst mapStateToProps = (state, ownProps) => {\n\tconst userData =\n\t\t!state.user.id && ownProps.user && ownProps.user.id\n\t\t\t? ownProps.user\n\t\t\t: state.user;\n\treturn {\n\t\tuser: userData,\n\t\ttheme: state.app.theme,\n\t\tpair: state.app.pair,\n\t\tpairs: state.app.pairs,\n\t\tcoins: state.app.coins\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n\tgetMe: bindActionCreators(getMe, dispatch),\n\tsetMe: bindActionCreators(setMe, dispatch),\n\tsetNotification: bindActionCreators(setNotification, dispatch),\n\tgetTickers: bindActionCreators(getTickers, dispatch)\n});\n\nAppBar.defaultProps = {\n\tnoBorders: false,\n\tisHome: false\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(AppBar);\n"]},"metadata":{},"sourceType":"module"}