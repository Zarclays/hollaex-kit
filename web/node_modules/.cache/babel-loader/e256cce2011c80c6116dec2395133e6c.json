{"ast":null,"code":"import _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/Verification/IdentityVerification.js\";\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport { reduxForm, SubmissionError } from 'redux-form';\nimport { required, requiredBoolean, isBefore } from '../../components/Form/validations';\nimport renderFields from '../../components/Form/factoryFields';\nimport { Button, IconTitle, HeaderSection } from '../../components';\nimport STRINGS from '../../config/localizedStrings';\nimport { COUNTRIES_OPTIONS } from '../../utils/countries';\nimport { isMobile } from 'react-device-detect';\nimport { ICONS } from '../../config/constants';\nimport { getErrorLocalized } from '../../utils/errors';\nimport { updateUser } from '../../actions/userAction';\nvar FORM_NAME = 'IdentityVerification';\n\nvar IdentityVerification =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(IdentityVerification, _Component);\n\n  function IdentityVerification() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, IdentityVerification);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(IdentityVerification)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      formFields: {}\n    };\n\n    _this.generateFormFields = function (language) {\n      var fullName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      // const ID_NUMBER_TYPE = 'PASSPORT';\n      var formFields = {\n        full_name: {\n          type: 'text',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.FULL_NAME_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.FULL_NAME_PLACEHOLDER,\n          disabled: fullName.length > 0,\n          validate: [required],\n          fullWidth: isMobile\n        },\n        gender: {\n          type: 'select',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.GENDER_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.GENDER_PLACEHOLDER,\n          options: [{\n            value: false,\n            label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.GENDER_OPTIONS.MAN,\n            icon: ICONS.GENDER_M\n          }, {\n            value: true,\n            label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.GENDER_OPTIONS.WOMAN,\n            icon: ICONS.GENDER_F\n          }],\n          validate: [requiredBoolean],\n          fullWidth: isMobile\n        },\n        dob: {\n          type: 'date-dropdown',\n          language: 'en',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.DOB_LABEL,\n          validate: [required, isBefore()],\n          endDate: moment().add(1, 'days'),\n          pattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}',\n          fullWidth: isMobile\n        },\n        nationality: {\n          type: 'autocomplete',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.NATIONALITY_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.NATIONALITY_PLACEHOLDER,\n          options: COUNTRIES_OPTIONS,\n          validate: [required],\n          fullWidth: isMobile\n        },\n        country: {\n          type: 'autocomplete',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.COUNTRY_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.COUNTRY_PLACEHOLDER,\n          options: COUNTRIES_OPTIONS,\n          validate: [required],\n          fullWidth: isMobile\n        },\n        city: {\n          type: 'text',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.CITY_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.CITY_PLACEHOLDER,\n          validate: [required],\n          fullWidth: isMobile\n        },\n        address: {\n          type: 'text',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.ADDRESS_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.ADDRESS_PLACEHOLDER,\n          validate: [required],\n          fullWidth: isMobile\n        },\n        postal_code: {\n          type: 'text',\n          label: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.POSTAL_CODE_LABEL,\n          placeholder: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS.POSTAL_CODE_PLACEHOLDER,\n          validate: [required],\n          fullWidth: isMobile\n        }\n      };\n\n      _this.setState({\n        formFields: formFields\n      });\n    };\n\n    _this.handleSubmit = function (values) {\n      if (_this.props.fullName) {\n        delete values.full_name;\n      }\n\n      return updateUser(values).then(function (_ref) {\n        var data = _ref.data;\n\n        _this.props.moveToNextStep('identity', data);\n\n        _this.props.setActivePageContent(0);\n      }).catch(function (err) {\n        var error = {\n          _error: err.message\n        };\n\n        if (err.response && err.response.data) {\n          error._error = err.response.data.message;\n        }\n\n        throw new SubmissionError(error);\n      });\n    };\n\n    _this.onGoBack = function () {\n      _this.props.setActivePageContent(0);\n\n      _this.props.setActiveTab(2);\n    };\n\n    return _this;\n  }\n\n  _createClass(IdentityVerification, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.generateFormFields(this.props.activeLanguage, this.props.fullName);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.activeLanguage !== this.props.activeLanguage) {\n        this.generateFormFields(nextProps.activeLanguage, nextProps.fullName);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          handleSubmit = _this$props.handleSubmit,\n          pristine = _this$props.pristine,\n          submitting = _this$props.submitting,\n          valid = _this$props.valid,\n          error = _this$props.error,\n          openContactForm = _this$props.openContactForm;\n      var formFields = this.state.formFields;\n      return React.createElement(\"div\", {\n        className: \"presentation_container apply_rtl verification_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(IconTitle, {\n        text: STRINGS.USER_VERIFICATION.IDENTITY_VERIFICATION,\n        textType: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        className: \"d-flex flex-column w-100 verification_content-form-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(HeaderSection, {\n        title: STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.INFORMATION.TITLE_PERSONAL_INFORMATION,\n        icon: ICONS.VERIFICATION_ID_NEW,\n        openContactForm: openContactForm,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"my-1 verification-info-txt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.INFORMATION.TEXT)), renderFields(formFields), error && React.createElement(\"div\", {\n        className: \"warning_text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, getErrorLocalized(error)), React.createElement(\"div\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(Button, {\n        label: STRINGS.USER_VERIFICATION.GO_BACK,\n        className: \"mr-5\",\n        onClick: this.onGoBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), React.createElement(Button, {\n        type: \"button\",\n        onClick: handleSubmit(this.handleSubmit),\n        label: STRINGS.SUBMIT,\n        disabled: pristine || submitting || !valid || !!error,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return IdentityVerification;\n}(Component);\n\nvar IdentityVerificationForm = reduxForm({\n  form: FORM_NAME\n})(IdentityVerification);\nexport default IdentityVerificationForm;","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/Verification/IdentityVerification.js"],"names":["React","Component","moment","reduxForm","SubmissionError","required","requiredBoolean","isBefore","renderFields","Button","IconTitle","HeaderSection","STRINGS","COUNTRIES_OPTIONS","isMobile","ICONS","getErrorLocalized","updateUser","FORM_NAME","IdentityVerification","state","formFields","generateFormFields","language","fullName","full_name","type","label","USER_VERIFICATION","USER_DOCUMENTATION_FORM","FORM_FIELDS","FULL_NAME_LABEL","placeholder","FULL_NAME_PLACEHOLDER","disabled","length","validate","fullWidth","gender","GENDER_LABEL","GENDER_PLACEHOLDER","options","value","GENDER_OPTIONS","MAN","icon","GENDER_M","WOMAN","GENDER_F","dob","DOB_LABEL","endDate","add","pattern","nationality","NATIONALITY_LABEL","NATIONALITY_PLACEHOLDER","country","COUNTRY_LABEL","COUNTRY_PLACEHOLDER","city","CITY_LABEL","CITY_PLACEHOLDER","address","ADDRESS_LABEL","ADDRESS_PLACEHOLDER","postal_code","POSTAL_CODE_LABEL","POSTAL_CODE_PLACEHOLDER","setState","handleSubmit","values","props","then","data","moveToNextStep","setActivePageContent","catch","err","error","_error","message","response","onGoBack","setActiveTab","activeLanguage","nextProps","pristine","submitting","valid","openContactForm","IDENTITY_VERIFICATION","INFORMATION","TITLE_PERSONAL_INFORMATION","VERIFICATION_ID_NEW","TEXT","GO_BACK","SUBMIT","IdentityVerificationForm","form"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from 'moment';\nimport { reduxForm, SubmissionError } from 'redux-form';\nimport {\n\trequired,\n\trequiredBoolean,\n\tisBefore\n} from '../../components/Form/validations';\nimport renderFields from '../../components/Form/factoryFields';\nimport { Button, IconTitle, HeaderSection } from '../../components';\nimport STRINGS from '../../config/localizedStrings';\nimport { COUNTRIES_OPTIONS } from '../../utils/countries';\n\nimport { isMobile } from 'react-device-detect';\nimport { ICONS } from '../../config/constants';\nimport { getErrorLocalized } from '../../utils/errors';\nimport { updateUser } from '../../actions/userAction';\n\nconst FORM_NAME = 'IdentityVerification';\n\nclass IdentityVerification extends Component {\n\tstate = {\n\t\tformFields: {}\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.generateFormFields(this.props.activeLanguage, this.props.fullName);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.activeLanguage !== this.props.activeLanguage) {\n\t\t\tthis.generateFormFields(nextProps.activeLanguage, nextProps.fullName);\n\t\t}\n\t}\n\n\tgenerateFormFields = (language, fullName = '') => {\n\t\t// const ID_NUMBER_TYPE = 'PASSPORT';\n\t\tconst formFields = {\n\t\t\tfull_name: {\n\t\t\t\ttype: 'text',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.FULL_NAME_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.FULL_NAME_PLACEHOLDER,\n\t\t\t\tdisabled: fullName.length > 0,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tgender: {\n\t\t\t\ttype: 'select',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.GENDER_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.GENDER_PLACEHOLDER,\n\t\t\t\toptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t\t\t.GENDER_OPTIONS.MAN,\n\t\t\t\t\t\ticon: ICONS.GENDER_M\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t\t\t.GENDER_OPTIONS.WOMAN,\n\t\t\t\t\t\ticon: ICONS.GENDER_F\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tvalidate: [requiredBoolean],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tdob: {\n\t\t\t\ttype: 'date-dropdown',\n\t\t\t\tlanguage: 'en',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.DOB_LABEL,\n\t\t\t\tvalidate: [required, isBefore()],\n\t\t\t\tendDate: moment().add(1, 'days'),\n\t\t\t\tpattern: '[0-9]{4}-[0-9]{2}-[0-9]{2}',\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tnationality: {\n\t\t\t\ttype: 'autocomplete',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.NATIONALITY_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.NATIONALITY_PLACEHOLDER,\n\t\t\t\toptions: COUNTRIES_OPTIONS,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tcountry: {\n\t\t\t\ttype: 'autocomplete',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.COUNTRY_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.COUNTRY_PLACEHOLDER,\n\t\t\t\toptions: COUNTRIES_OPTIONS,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tcity: {\n\t\t\t\ttype: 'text',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.CITY_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.CITY_PLACEHOLDER,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\taddress: {\n\t\t\t\ttype: 'text',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.ADDRESS_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.ADDRESS_PLACEHOLDER,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t},\n\t\t\tpostal_code: {\n\t\t\t\ttype: 'text',\n\t\t\t\tlabel:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.POSTAL_CODE_LABEL,\n\t\t\t\tplaceholder:\n\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.FORM_FIELDS\n\t\t\t\t\t\t.POSTAL_CODE_PLACEHOLDER,\n\t\t\t\tvalidate: [required],\n\t\t\t\tfullWidth: isMobile\n\t\t\t}\n\t\t};\n\n\t\tthis.setState({ formFields });\n\t};\n\n\thandleSubmit = (values) => {\n\t\tif (this.props.fullName) {\n\t\t\tdelete values.full_name;\n\t\t}\n\t\treturn updateUser(values)\n\t\t\t.then(({ data }) => {\n\t\t\t\tthis.props.moveToNextStep('identity', data);\n\t\t\t\tthis.props.setActivePageContent(0);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconst error = { _error: err.message };\n\t\t\t\tif (err.response && err.response.data) {\n\t\t\t\t\terror._error = err.response.data.message;\n\t\t\t\t}\n\t\t\t\tthrow new SubmissionError(error);\n\t\t\t});\n\t};\n\n\tonGoBack = () => {\n\t\tthis.props.setActivePageContent(0);\n\t\tthis.props.setActiveTab(2);\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\thandleSubmit,\n\t\t\tpristine,\n\t\t\tsubmitting,\n\t\t\tvalid,\n\t\t\terror,\n\t\t\topenContactForm\n\t\t} = this.props;\n\t\tconst { formFields } = this.state;\n\t\treturn (\n\t\t\t<div className=\"presentation_container apply_rtl verification_container\">\n\t\t\t\t<IconTitle text={STRINGS.USER_VERIFICATION.IDENTITY_VERIFICATION} textType=\"title\" />\n\t\t\t\t<form className=\"d-flex flex-column w-100 verification_content-form-wrapper\">\n\t\t\t\t\t<HeaderSection\n\t\t\t\t\t\ttitle={\n\t\t\t\t\t\t\tSTRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.INFORMATION\n\t\t\t\t\t\t\t\t.TITLE_PERSONAL_INFORMATION\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon={ICONS.VERIFICATION_ID_NEW}\n\t\t\t\t\t\topenContactForm={openContactForm}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"my-1 verification-info-txt\">{STRINGS.USER_VERIFICATION.USER_DOCUMENTATION_FORM.INFORMATION.TEXT}</div>\n\t\t\t\t\t</HeaderSection>\n\t\t\t\t\t{renderFields(formFields)}\n\t\t\t\t\t{error && (\n\t\t\t\t\t\t<div className=\"warning_text\">{getErrorLocalized(error)}</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tlabel={STRINGS.USER_VERIFICATION.GO_BACK}\n\t\t\t\t\t\t\tclassName=\"mr-5\"\n\t\t\t\t\t\t\tonClick={this.onGoBack}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tonClick={handleSubmit(this.handleSubmit)}\n\t\t\t\t\t\t\tlabel={STRINGS.SUBMIT}\n\t\t\t\t\t\t\tdisabled={pristine || submitting || !valid || !!error}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst IdentityVerificationForm = reduxForm({\n\tform: FORM_NAME\n})(IdentityVerification);\n\nexport default IdentityVerificationForm;\n"]},"metadata":{},"sourceType":"module"}