{"ast":null,"code":"import _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport axios from 'axios';\nimport { maskToken } from '../utils/string';\nexport function getMe() {\n  return {\n    type: 'GET_ME',\n    payload: axios.get('/user')\n  };\n}\nexport function setMe(user) {\n  return {\n    type: 'SET_ME',\n    payload: user\n  };\n}\nexport var setUserData = function setUserData(data) {\n  return {\n    type: 'SET_USER_DATA',\n    payload: data\n  };\n};\nexport function setBalance(balance) {\n  return {\n    type: 'SET_BALANCE',\n    payload: balance\n  };\n}\nexport function processWithdraw(data) {\n  return function (dispatch) {\n    dispatch({\n      type: 'PROCESS_WITHDRAW_PENDING'\n    });\n    axios.post('/withdraw', data).then(function (res) {\n      dispatch({\n        type: 'PROCESS_WITHDRAW_FULFILLED',\n        payload: res\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'PROCESS_WITHDRAW_REJECTED',\n        payload: err.response\n      });\n    });\n  };\n}\nexport var updateUser = function updateUser(values) {\n  var userValues = {};\n\n  if (values.full_name) {\n    userValues.full_name = values.full_name;\n  }\n\n  userValues.gender = values.gender;\n\n  if (values.dob) {\n    userValues.dob = new Date(values.dob);\n  }\n\n  userValues.nationality = values.nationality;\n\n  if (values.address) {\n    userValues.address = {\n      address: values.address,\n      city: values.city,\n      country: values.country,\n      postal_code: values.postal_code\n    };\n  }\n\n  if (values.id_number) {\n    userValues.id_data = {\n      // type: values.nationality === 'IR' ? 'id' : 'passport',\n      number: values.id_number,\n      issued_date: values.id_issued_date,\n      expiration_date: values.id_expiration_date\n    };\n  }\n\n  if (values.settings) {\n    userValues.settings = values.settings;\n  }\n\n  return axios.put('/user', userValues);\n};\nexport var updateDocuments = function updateDocuments(values) {\n  var formData = new FormData();\n  Object.entries(values).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    formData.append(key, value);\n  });\n  return axios({\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    data: formData,\n    url: '/user/verification',\n    method: 'POST'\n  });\n};\nexport var otpActivate = function otpActivate(values) {\n  return axios.post('/user/activateOTP', values);\n};\nexport var otpRevoke = function otpRevoke(values) {\n  return axios.post('/user/deactivateOTP', values);\n};\nexport var resetPassword = function resetPassword(values) {\n  return axios.post('/user/change-password', values);\n};\nexport var otpSetActivated = function otpSetActivated() {\n  var active = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  return active ? {\n    type: 'ACTIVATE_OTP'\n  } : {\n    type: 'REVOKE_OTP'\n  };\n};\nexport function userIdentity(data) {\n  return function (dispatch) {\n    dispatch({\n      type: 'USER_IDENTITY_PENDING'\n    });\n    axios.put('/user', data).then(function (res) {\n      dispatch({\n        type: 'USER_IDENTITY_FULFILLED',\n        payload: res\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'USER_IDENTITY_REJECTED',\n        payload: err.response\n      });\n    });\n  };\n}\nexport function uploadFile(data) {\n  var formData = new FormData();\n  Object.keys(data).forEach(function (key) {\n    formData.append(key, data[key]);\n  });\n  return function (dispatch) {\n    dispatch({\n      type: 'UPLOAD_FILE_PENDING'\n    });\n    axios({\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      data: formData,\n      url: '/user/verification',\n      method: 'POST'\n    }).then(function (res) {\n      dispatch({\n        type: 'UPLOAD_FILE_FULFILLED',\n        payload: res\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'UPLOAD_FILE_REJECTED',\n        payload: err.response\n      });\n    });\n  };\n}\nexport function userDeposits() {\n  return {\n    type: 'USER_DEPOSITS',\n    payload: axios.get('/user/deposits')\n  };\n}\nexport function userWithdrawals() {\n  return {\n    type: 'USER_WITHDRAWALS',\n    payload: axios.get('/user/withdrawals')\n  };\n}\nexport function otpRequest() {\n  return function (dispatch) {\n    dispatch({\n      type: 'REQUEST_OTP_PENDING'\n    });\n    axios.get('/user/requestOTP').then(function (body) {\n      dispatch({\n        type: 'REQUEST_OTP_FULFILLED',\n        payload: body.data\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'REQUEST_OTP_REJECTED',\n        payload: err.response.data\n      });\n    });\n  };\n}\nexport function deactivateOTP() {\n  return {\n    type: 'DEACTIVATE_OTP',\n    payload: axios.get('/deactivateOTP')\n  };\n}\nexport var requestTokens = function requestTokens() {\n  return {\n    type: 'REQUEST_TOKENS',\n    payload: axios.get('/user/tokens')\n  };\n};\nexport var generateToken = function generateToken(values) {\n  return axios.post(\"/user/tokens\", values);\n};\nexport var tokenGenerated = function tokenGenerated(_ref3) {\n  var token = _ref3.token,\n      rest = _objectWithoutProperties(_ref3, [\"token\"]);\n\n  return {\n    type: 'TOKEN_GENERATED',\n    payload: {\n      token: _objectSpread({}, rest, {\n        token: maskToken(token)\n      })\n    }\n  };\n};\nexport var revokeToken = function revokeToken(id, otp_code) {\n  return axios.delete(\"/user/tokens/\".concat(id, \"?otp_code=\").concat(otp_code));\n};\nexport var tokenRevoked = function tokenRevoked(token) {\n  return {\n    type: 'TOKEN_REVOKED',\n    payload: {\n      token: token\n    }\n  };\n};\nexport var setUsername = function setUsername(values) {\n  return axios.post('/user/username', values);\n};\nexport var setUsernameStore = function setUsernameStore(username) {\n  return {\n    type: 'SET_USERNAME',\n    payload: {\n      username_set: true,\n      username: username\n    }\n  };\n}; // export const requestLimits = () => ({\n// \ttype: 'REQUEST_LIMITS',\n// \tpayload: axios.get('/limits')\n// });\n// export const requestFees = () => ({\n// \ttype: 'REQUEST_FEES',\n// \tpayload: axios.get('/fees')\n// });\n\nexport var createAddress = function createAddress() {\n  var addressType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    type: 'CREATE_ADDRESS',\n    payload: axios.post(\"/user/address/\".concat(addressType), {})\n  };\n};\nexport var cleanCreateAddress = function cleanCreateAddress() {\n  return {\n    type: 'CLEAN_CREATE_ADDRESS'\n  };\n};\nexport var getTradeVolume = function getTradeVolume() {\n  return {\n    type: 'GET_TRADE_VOLUME',\n    payload: axios.get(\"/user/stats\")\n  };\n};\nexport function getUserReferralCount() {\n  return function (dispatch) {\n    axios.get('/user/affiliation').then(function (res) {\n      dispatch({\n        type: 'REFERRAL_COUNT_FULFILLED',\n        payload: res.data\n      });\n    }).catch(function (err) {\n      dispatch({\n        type: 'REFERRAL_COUNT_REJECTED',\n        payload: err.response\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/actions/userAction.js"],"names":["axios","maskToken","getMe","type","payload","get","setMe","user","setUserData","data","setBalance","balance","processWithdraw","dispatch","post","then","res","catch","err","response","updateUser","values","userValues","full_name","gender","dob","Date","nationality","address","city","country","postal_code","id_number","id_data","number","issued_date","id_issued_date","expiration_date","id_expiration_date","settings","put","updateDocuments","formData","FormData","Object","entries","forEach","key","value","append","headers","url","method","otpActivate","otpRevoke","resetPassword","otpSetActivated","active","userIdentity","uploadFile","keys","userDeposits","userWithdrawals","otpRequest","body","deactivateOTP","requestTokens","generateToken","tokenGenerated","token","rest","revokeToken","id","otp_code","delete","tokenRevoked","setUsername","setUsernameStore","username","username_set","createAddress","addressType","cleanCreateAddress","getTradeVolume","getUserReferralCount"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { maskToken } from '../utils/string';\n\nexport function getMe() {\n\treturn {\n\t\ttype: 'GET_ME',\n\t\tpayload: axios.get('/user')\n\t};\n}\n\nexport function setMe(user) {\n\treturn {\n\t\ttype: 'SET_ME',\n\t\tpayload: user\n\t};\n}\n\nexport const setUserData = (data) => ({\n\ttype: 'SET_USER_DATA',\n\tpayload: data\n});\n\nexport function setBalance(balance) {\n\treturn {\n\t\ttype: 'SET_BALANCE',\n\t\tpayload: balance\n\t};\n}\n\nexport function processWithdraw(data) {\n\treturn (dispatch) => {\n\t\tdispatch({\n\t\t\ttype: 'PROCESS_WITHDRAW_PENDING'\n\t\t});\n\t\taxios\n\t\t\t.post('/withdraw', data)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'PROCESS_WITHDRAW_FULFILLED',\n\t\t\t\t\tpayload: res\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'PROCESS_WITHDRAW_REJECTED',\n\t\t\t\t\tpayload: err.response\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n\nexport const updateUser = (values) => {\n\tconst userValues = {};\n\tif (values.full_name) {\n\t\tuserValues.full_name = values.full_name;\n\t}\n\tuserValues.gender = values.gender;\n\tif (values.dob) {\n\t\tuserValues.dob = new Date(values.dob);\n\t}\n\tuserValues.nationality = values.nationality;\n\n\tif (values.address) {\n\t\tuserValues.address = {\n\t\t\taddress: values.address,\n\t\t\tcity: values.city,\n\t\t\tcountry: values.country,\n\t\t\tpostal_code: values.postal_code\n\t\t};\n\t}\n\n\tif (values.id_number) {\n\t\tuserValues.id_data = {\n\t\t\t// type: values.nationality === 'IR' ? 'id' : 'passport',\n\t\t\tnumber: values.id_number,\n\t\t\tissued_date: values.id_issued_date,\n\t\t\texpiration_date: values.id_expiration_date\n\t\t};\n\t}\n\n\tif (values.settings) {\n\t\tuserValues.settings = values.settings;\n\t}\n\n\treturn axios.put('/user', userValues);\n};\n\nexport const updateDocuments = (values) => {\n\tconst formData = new FormData();\n\n\tObject.entries(values).forEach(([key, value]) => {\n\t\tformData.append(key, value);\n\t});\n\n\treturn axios({\n\t\theaders: {\n\t\t\t'Content-Type': 'multipart/form-data'\n\t\t},\n\t\tdata: formData,\n\t\turl: '/user/verification',\n\t\tmethod: 'POST'\n\t});\n};\n\nexport const otpActivate = (values) => axios.post('/user/activateOTP', values);\nexport const otpRevoke = (values) => axios.post('/user/deactivateOTP', values);\nexport const resetPassword = (values) =>\n\taxios.post('/user/change-password', values);\nexport const otpSetActivated = (active = true) =>\n\tactive\n\t\t? {\n\t\t\t\ttype: 'ACTIVATE_OTP'\n\t\t\t}\n\t\t: {\n\t\t\t\ttype: 'REVOKE_OTP'\n\t\t\t};\n\nexport function userIdentity(data) {\n\treturn (dispatch) => {\n\t\tdispatch({\n\t\t\ttype: 'USER_IDENTITY_PENDING'\n\t\t});\n\t\taxios\n\t\t\t.put('/user', data)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'USER_IDENTITY_FULFILLED',\n\t\t\t\t\tpayload: res\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'USER_IDENTITY_REJECTED',\n\t\t\t\t\tpayload: err.response\n\t\t\t\t});\n\t\t\t});\n\t};\n}\nexport function uploadFile(data) {\n\tconst formData = new FormData();\n\tObject.keys(data).forEach((key) => {\n\t\tformData.append(key, data[key]);\n\t});\n\n\treturn (dispatch) => {\n\t\tdispatch({\n\t\t\ttype: 'UPLOAD_FILE_PENDING'\n\t\t});\n\t\taxios({\n\t\t\theaders: { 'Content-Type': 'multipart/form-data' },\n\t\t\tdata: formData,\n\t\t\turl: '/user/verification',\n\t\t\tmethod: 'POST'\n\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'UPLOAD_FILE_FULFILLED',\n\t\t\t\t\tpayload: res\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'UPLOAD_FILE_REJECTED',\n\t\t\t\t\tpayload: err.response\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n\nexport function userDeposits() {\n\treturn {\n\t\ttype: 'USER_DEPOSITS',\n\t\tpayload: axios.get('/user/deposits')\n\t};\n}\nexport function userWithdrawals() {\n\treturn {\n\t\ttype: 'USER_WITHDRAWALS',\n\t\tpayload: axios.get('/user/withdrawals')\n\t};\n}\n\nexport function otpRequest() {\n\treturn (dispatch) => {\n\t\tdispatch({ type: 'REQUEST_OTP_PENDING' });\n\t\taxios\n\t\t\t.get('/user/requestOTP')\n\t\t\t.then((body) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'REQUEST_OTP_FULFILLED',\n\t\t\t\t\tpayload: body.data\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'REQUEST_OTP_REJECTED',\n\t\t\t\t\tpayload: err.response.data\n\t\t\t\t});\n\t\t\t});\n\t};\n}\nexport function deactivateOTP() {\n\treturn {\n\t\ttype: 'DEACTIVATE_OTP',\n\t\tpayload: axios.get('/deactivateOTP')\n\t};\n}\n\nexport const requestTokens = () => {\n\treturn {\n\t\ttype: 'REQUEST_TOKENS',\n\t\tpayload: axios.get('/user/tokens')\n\t};\n};\n\nexport const generateToken = (values) => axios.post(`/user/tokens`, values);\nexport const tokenGenerated = ({ token, ...rest }) => ({\n\ttype: 'TOKEN_GENERATED',\n\tpayload: {\n\t\ttoken: {\n\t\t\t...rest,\n\t\t\ttoken: maskToken(token)\n\t\t}\n\t}\n});\n\nexport const revokeToken = (id, otp_code) =>\n\taxios.delete(`/user/tokens/${id}?otp_code=${otp_code}`);\nexport const tokenRevoked = (token) => ({\n\ttype: 'TOKEN_REVOKED',\n\tpayload: {\n\t\ttoken\n\t}\n});\n\nexport const setUsername = (values) => axios.post('/user/username', values);\nexport const setUsernameStore = (username) => ({\n\ttype: 'SET_USERNAME',\n\tpayload: {\n\t\tusername_set: true,\n\t\tusername\n\t}\n});\n\n// export const requestLimits = () => ({\n// \ttype: 'REQUEST_LIMITS',\n// \tpayload: axios.get('/limits')\n// });\n\n// export const requestFees = () => ({\n// \ttype: 'REQUEST_FEES',\n// \tpayload: axios.get('/fees')\n// });\n\nexport const createAddress = (addressType = '') => ({\n\ttype: 'CREATE_ADDRESS',\n\tpayload: axios.post(`/user/address/${addressType}`, {})\n});\n\nexport const cleanCreateAddress = () => ({\n\ttype: 'CLEAN_CREATE_ADDRESS'\n});\n\nexport const getTradeVolume = () => ({\n\ttype: 'GET_TRADE_VOLUME',\n\tpayload: axios.get(`/user/stats`)\n});\n\nexport function getUserReferralCount() {\n\treturn (dispatch) => {\n\t\taxios\n\t\t\t.get('/user/affiliation')\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'REFERRAL_COUNT_FULFILLED',\n\t\t\t\t\tpayload: res.data\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'REFERRAL_COUNT_REJECTED',\n\t\t\t\t\tpayload: err.response\n\t\t\t\t});\n\t\t\t});\n\t};\n}\n"]},"metadata":{},"sourceType":"module"}