{"ast":null,"code":"import _objectWithoutProperties from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/user/Documents/projects/hollaex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/user/Documents/projects/hollaex/src/containers/App/index.js\";\nimport React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport io from 'socket.io-client';\nimport EventListener from 'react-event-listener';\nimport { debounce } from 'lodash';\nimport { WS_URL, ICONS, SESSION_TIME, BASE_CURRENCY } from '../../config/constants';\nimport { isBrowser, isMobile } from 'react-device-detect';\nimport { logout } from '../../actions/authAction';\nimport { setMe, setBalance, updateUser } from '../../actions/userAction';\nimport { addUserTrades } from '../../actions/walletActions';\nimport { setUserOrders, addOrder, updateOrder, removeOrder } from '../../actions/orderAction';\nimport { setOrderbooks, setTrades, setOrderbook, addTrades, setPairsData } from '../../actions/orderbookAction';\nimport { setTickers, setPairs, changePair, setCurrencies, setNotification, closeNotification, openContactForm, openHelpfulResourcesForm, setLanguage, changeTheme, closeAllNotification, setChatUnreadMessages, setOrderLimits, NOTIFICATIONS, CONTACT_FORM, HELPFUL_RESOURCES_FORM, FEES_STRUCTURE_AND_LIMITS, RISK_PORTFOLIO_ORDER_WARING, RISKY_ORDER, setSnackDialog, LOGOUT_CONFORMATION } from '../../actions/appActions';\nimport { getThemeClass, getChatMinimized, setChatMinimized } from '../../utils/theme';\nimport { checkUserSessionExpired, playBackgroundAudioNotification } from '../../utils/utils';\nimport { getToken, getTokenTimestamp, isLoggedIn } from '../../utils/token';\nimport { AppBar, AppMenuBar, Sidebar, SidebarBottom, Dialog, Loader, Notification, MessageDisplay, CurrencyList, SnackNotification, SnackDialog } from '../../components';\nimport { ContactForm, HelpfulResourcesForm, Chat as ChatComponent } from '../';\nimport ReviewEmailContent from '../Withdraw/ReviewEmailContent';\nimport FeesAndLimits from '../Summary/components/FeesAndLimits';\nimport SetOrderPortfolio from '../UserSettings/SetOrderPortfolio';\nimport LogoutConfirmation from '../Summary/components/LogoutConfirmation';\nimport RiskyOrder from '../Trade/components/RiskyOrder';\nimport { getClasesForLanguage, getFontClassForLanguage } from '../../utils/string';\n\nvar Container =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Container, _Component);\n\n  function Container() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Container);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Container)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      appLoaded: false,\n      dialogIsOpen: false,\n      chatIsClosed: false,\n      publicSocket: undefined,\n      privateSocket: undefined,\n      idleTimer: undefined,\n      ordersQueued: [],\n      limitFilledOnOrder: ''\n    };\n    _this.limitTimeOut = null;\n\n    _this.updateThemeToBody = function (theme) {\n      var themeName = theme === 'dark' ? 'dark-app-body' : '';\n\n      if (document.body) {\n        document.body.className = themeName;\n      }\n    };\n\n    _this._resetTimer = function () {\n      if (_this.state.idleTimer) {\n        clearTimeout(_this.idleTimer);\n      }\n\n      if (_this.state.appLoaded) {\n        var idleTimer = setTimeout(function () {\n          return _this.logout('Inactive');\n        }, SESSION_TIME); // no activity will log the user out automatically\n\n        _this.setState({\n          idleTimer: idleTimer\n        });\n      }\n    };\n\n    _this.resetTimer = debounce(_this._resetTimer, 250);\n\n    _this.initSocketConnections = function () {\n      _this.setPublicWS();\n\n      if (isLoggedIn()) {\n        _this.setUserSocket(getToken());\n      }\n\n      _this.setState({\n        appLoaded: true\n      }, function () {\n        _this._resetTimer();\n      });\n    };\n\n    _this.setPublicWS = function () {\n      // TODO change when added more cryptocurrencies\n      var publicSocket = io(\"\".concat(WS_URL, \"/realtime\"), {\n        query: {// symbol: 'btc'\n        }\n      });\n\n      _this.setState({\n        publicSocket: publicSocket\n      });\n\n      publicSocket.on('initial', function (data) {\n        if (!_this.props.pair) {\n          var pair = Object.keys(data.pairs)[0];\n\n          _this.props.changePair(pair);\n        }\n\n        _this.props.setPairs(data.pairs);\n\n        _this.props.setPairsData(data.pairs);\n\n        _this.props.setCurrencies(data.coins);\n\n        var pairWithBase = Object.keys(data.pairs).filter(function (key) {\n          var temp = data.pairs[key];\n          return temp.pair_2 === BASE_CURRENCY;\n        });\n\n        if (!pairWithBase.length) {\n          alert(\"You need to set relevant BASE_CURRENCY, now is in \".concat(BASE_CURRENCY));\n        }\n\n        var orderLimits = {};\n        Object.keys(data.pairs).map(function (pair, index) {\n          orderLimits[pair] = {\n            PRICE: {\n              MIN: data.pairs[pair].min_price,\n              MAX: data.pairs[pair].max_price,\n              STEP: data.pairs[pair].increment_price\n            },\n            SIZE: {\n              MIN: data.pairs[pair].min_size,\n              MAX: data.pairs[pair].max_size,\n              STEP: data.pairs[pair].increment_price\n            }\n          };\n          return '';\n        });\n\n        _this.props.setOrderLimits(orderLimits);\n      });\n      publicSocket.on('orderbook', function (data) {\n        _this.props.setOrderbooks(data);\n      });\n      publicSocket.on('trades', function (data) {\n        _this.props.setTrades(data);\n\n        _this.props.setTickers(data);\n\n        if (data.action === 'update') {\n          if (_this.props.settings.audio && _this.props.settings.audio.public_trade && _this.props.location.pathname.indexOf('/trade/') === 0 && _this.props.params.pair) {\n            playBackgroundAudioNotification('public_trade');\n          }\n        }\n      }); // publicSocket.on('ticker', (data) => {\n      // this.props.setTickers(data);\n      // });\n    };\n\n    _this.setUserSocket = function (token) {\n      var privateSocket = io.connect(\"\".concat(WS_URL, \"/user\"), {\n        query: {\n          token: \"Bearer \".concat(token)\n        }\n      });\n\n      _this.setState({\n        privateSocket: privateSocket\n      });\n\n      privateSocket.on('error', function (error) {\n        if (error && typeof error === 'string' && error.indexOf('Access Denied') > -1) {\n          _this.logout('Token is expired');\n        }\n      });\n      privateSocket.on('user', function (_ref) {\n        var action = _ref.action,\n            data = _ref.data;\n\n        // if (!data.phone_number) {\n        // \treturn this.goToVerificationPage();\n        // }\n        _this.props.setMe(data);\n\n        if (data.settings && data.settings.language !== _this.props.activeLanguage) {\n          _this.props.changeLanguage(data.settings.language);\n        }\n\n        if (data.settings.interface && data.settings.interface.theme !== _this.props.activeTheme) {\n          _this.props.changeTheme(data.settings.interface.theme);\n\n          localStorage.setItem('theme', data.settings.interface.theme);\n        }\n      });\n      privateSocket.on('orders', function (_ref2) {\n        var action = _ref2.action,\n            data = _ref2.data;\n\n        _this.props.setUserOrders(data);\n      });\n      privateSocket.on('trades', function (_ref3) {// this.props.addUserTrades(data);\n\n        var action = _ref3.action,\n            data = _ref3.data;\n      });\n      privateSocket.on('wallet', function (_ref4) {\n        var action = _ref4.action,\n            balance = _ref4.balance;\n\n        _this.props.setBalance(balance);\n      });\n      privateSocket.on('update', function (_ref5) {\n        var action = _ref5.action,\n            type = _ref5.type,\n            data = _ref5.data;\n\n        switch (type) {\n          case 'order_queued':\n            // TODO add queued orders to the store\n            // this.props.addOrder(data);\n            _this.setState({\n              ordersQueued: _this.state.ordersQueued.concat(data)\n            });\n\n            if (data.type === 'limit') {\n              playBackgroundAudioNotification('orderbook_limit_order');\n\n              _this.setState({\n                limitFilledOnOrder: data.id\n              });\n\n              _this.limitTimeOut = setTimeout(function () {\n                if (_this.state.limitFilledOnOrder) _this.setState({\n                  limitFilledOnOrder: ''\n                });\n              }, 1000);\n            }\n\n            break;\n\n          case 'order_processed':\n          case 'order_canceled':\n            {\n              var ordersQueued = [].concat(_this.state.ordersQueued);\n              var indexOfOrder = ordersQueued.findIndex(function (order) {\n                return order.id === data.id;\n              });\n\n              if (indexOfOrder > -1) {\n                ordersQueued.splice(indexOfOrder, 1);\n              }\n\n              _this.setState({\n                ordersQueued: ordersQueued\n              });\n\n              break;\n            }\n\n          case 'order_added':\n            {\n              var _ordersQueued = _this.state.ordersQueued;\n\n              var _indexOfOrder = _ordersQueued.findIndex(function (_ref6) {\n                var id = _ref6.id;\n                return id === data.id;\n              });\n\n              if (_indexOfOrder > -1) {\n                _ordersQueued.splice(_indexOfOrder, 1);\n\n                _this.setState({\n                  ordersQueued: _ordersQueued\n                });\n              }\n\n              _this.props.addOrder(data); // this.props.setNotification(NOTIFICATIONS.ORDERS, { type, data });\n\n\n              break;\n            }\n\n          case 'order_partialy_filled':\n            {\n              // let filled = 0;\n              // const order = this.props.orders.find(order => order.id === data.id)\n              // if (order) {\n              // \tfilled = order.filled;\n              // }\n              _this.props.updateOrder(data);\n\n              if (_this.props.settings.notification && _this.props.settings.notification.popup_order_partially_filled) {\n                // data.filled = data.filled - filled;\n                if (isMobile) {\n                  _this.props.setSnackDialog({\n                    isDialog: true,\n                    type: 'trade',\n                    data: {\n                      order: data,\n                      data: data\n                    }\n                  });\n                } else {\n                  _this.props.setNotification(NOTIFICATIONS.ORDERS, {\n                    type: type,\n                    order: data,\n                    data: data\n                  });\n                }\n              }\n\n              if (_this.props.settings.audio && _this.props.settings.audio.order_partially_completed) {\n                playBackgroundAudioNotification('order_partialy_filled');\n              }\n\n              break;\n            }\n\n          case 'order_updated':\n            _this.props.updateOrder(data);\n\n            _this.props.setNotification(NOTIFICATIONS.ORDERS, {\n              type: type,\n              data: data\n            }, false);\n\n            break;\n\n          case 'order_filled':\n            {\n              var ordersDeleted = _this.props.orders.filter(function (order, index) {\n                return data.findIndex(function (deletedOrder) {\n                  return deletedOrder.id === order.id;\n                }) > -1;\n              });\n\n              _this.props.removeOrder(data);\n\n              if (_this.props.settings.notification && _this.props.settings.notification.popup_order_completed) {\n                ordersDeleted.forEach(function (orderDeleted) {\n                  if (isMobile) {\n                    _this.props.setSnackDialog({\n                      isDialog: true,\n                      type: 'order',\n                      data: {\n                        type: type,\n                        data: _objectSpread({}, orderDeleted, {\n                          filled: orderDeleted.size\n                        })\n                      }\n                    });\n                  } else {\n                    _this.props.setNotification(NOTIFICATIONS.ORDERS, {\n                      type: type,\n                      data: _objectSpread({}, orderDeleted, {\n                        filled: orderDeleted.size\n                      })\n                    });\n                  }\n                });\n              }\n\n              if (_this.props.settings.audio && _this.props.settings.audio.order_completed) {\n                playBackgroundAudioNotification('order_filled');\n              }\n\n              break;\n            }\n\n          case 'order_removed':\n            _this.props.removeOrder(data);\n\n            _this.props.setNotification(NOTIFICATIONS.ORDERS, {\n              type: type,\n              data: data\n            }, false);\n\n            break;\n\n          case 'trade':\n            {\n              _this.props.addUserTrades(data.reverse());\n\n              var tradeOrdersIds = new Set();\n              data.forEach(function (trade) {\n                if (trade.order) {\n                  tradeOrdersIds.add(trade.order.id);\n                }\n              });\n\n              if (tradeOrdersIds.size === 1) {\n                var orderIdFromTrade = Array.from(tradeOrdersIds)[0];\n                var _ordersQueued2 = _this.state.ordersQueued;\n\n                var order = _ordersQueued2.find(function (_ref7) {\n                  var id = _ref7.id;\n                  return id === orderIdFromTrade;\n                });\n\n                if (!order) {\n                  var orders = _this.props.orders;\n                  order = orders.find(function (_ref8) {\n                    var id = _ref8.id;\n                    return id === orderIdFromTrade;\n                  });\n                }\n\n                if (order && order.type === 'market' && _this.props.settings.notification && _this.props.settings.notification.popup_order_completed) {\n                  if (isMobile) {\n                    _this.props.setSnackDialog({\n                      isDialog: true,\n                      type: 'trade',\n                      data: {\n                        order: order,\n                        data: data\n                      }\n                    });\n                  } else {\n                    _this.props.setNotification(NOTIFICATIONS.TRADES, {\n                      data: data,\n                      order: order\n                    });\n                  }\n                }\n              }\n\n              if (_this.state.limitFilledOnOrder && data.filter(function (limit) {\n                return limit.id === _this.state.limitFilledOnOrder;\n              }).length && _this.props.settings.audio && _this.props.settings.audio.order_completed) {\n                setTimeout(function () {\n                  playBackgroundAudioNotification('order_filled');\n                }, 1000);\n              }\n\n              break;\n            }\n\n          case 'deposit':\n            {\n              var show = data.status || data.currency !== BASE_CURRENCY;\n              data.coins = _this.props.coins;\n\n              _this.props.setNotification(NOTIFICATIONS.DEPOSIT, data, show);\n\n              break;\n            }\n\n          case 'withdrawal':\n            {\n              // TODO FIX when notification is defined\n              var _show = data.amount;\n\n              _this.props.setNotification(NOTIFICATIONS.WITHDRAWAL, data, !_show);\n\n              break;\n            }\n\n          default:\n            break;\n        }\n      });\n    };\n\n    _this.goToPage = function (path) {\n      if (_this.props.location.pathname !== path) {\n        _this.props.router.push(path);\n      }\n    };\n\n    _this.goToAccountPage = function () {\n      return _this.goToPage('/account');\n    };\n\n    _this.goToVerificationPage = function () {\n      return _this.goToPage('/verification');\n    };\n\n    _this.goToDashboard = function () {\n      return _this.goToPage('/');\n    };\n\n    _this.logout = function () {\n      var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n      _this.setState({\n        appLoaded: false\n      }, function () {\n        _this.props.logout(typeof message === 'string' ? message : '');\n      });\n    };\n\n    _this.onOpenDialog = function () {\n      _this.setState({\n        dialogIsOpen: true\n      });\n    };\n\n    _this.onCloseDialog = function () {\n      _this.setState({\n        dialogIsOpen: false\n      });\n\n      _this.props.closeNotification();\n    };\n\n    _this.minimizeChat = function () {\n      var chatIsClosed = !_this.state.chatIsClosed;\n\n      if (chatIsClosed === false) {\n        _this.props.setChatUnreadMessages();\n      }\n\n      setChatMinimized(chatIsClosed);\n\n      _this.setState({\n        chatIsClosed: chatIsClosed\n      });\n    };\n\n    _this.onConfirmEmail = function () {\n      _this.onCloseDialog();\n\n      _this.props.router.push('/wallet');\n    };\n\n    _this.getClassForActivePath = function (path) {\n      switch (path) {\n        case '/wallet':\n          return 'wallet';\n\n        case '/account':\n        case '/developers':\n        case '/security':\n        case '/verification':\n        case '/settings':\n        case '/summary':\n        case '/api':\n          return 'account';\n\n        case '/quick-trade':\n          return 'quick-trade';\n\n        case '/trade':\n          return 'trade';\n\n        case '/chat':\n          return 'chat';\n\n        default:\n      }\n\n      if (path.indexOf('/trade/') === 0) {\n        return 'trade';\n      } else if (path.indexOf('/quick-trade/') === 0) {\n        return 'quick-trade';\n      }\n\n      return '';\n    };\n\n    _this.renderDialogContent = function (_ref9, prices) {\n      var type = _ref9.type,\n          data = _ref9.data;\n\n      switch (type) {\n        case NOTIFICATIONS.ORDERS:\n        case NOTIFICATIONS.TRADES:\n        case NOTIFICATIONS.WITHDRAWAL:\n          return React.createElement(Notification, {\n            type: type,\n            data: data,\n            openContactForm: _this.props.openContactForm,\n            onClose: _this.onCloseDialog,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 615\n            },\n            __self: this\n          });\n\n        case NOTIFICATIONS.DEPOSIT:\n          return React.createElement(Notification, {\n            type: type,\n            data: _objectSpread({}, data, {\n              price: prices[data.currency],\n              coins: _this.props.coins\n            }),\n            onClose: _this.onCloseDialog,\n            goToPage: _this.goToPage,\n            openContactForm: _this.props.openContactForm,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 624\n            },\n            __self: this\n          });\n\n        case NOTIFICATIONS.ERROR:\n          return React.createElement(MessageDisplay, {\n            iconPath: ICONS.RED_WARNING,\n            onClick: _this.onCloseDialog,\n            text: data,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 638\n            },\n            __self: this\n          });\n\n        case CONTACT_FORM:\n          return React.createElement(ContactForm, {\n            onSubmitSuccess: _this.onCloseDialog,\n            onClose: _this.onCloseDialog,\n            data: data,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 646\n            },\n            __self: this\n          });\n\n        case HELPFUL_RESOURCES_FORM:\n          return React.createElement(HelpfulResourcesForm, {\n            onSubmitSuccess: _this.onCloseDialog,\n            onClose: _this.onCloseDialog,\n            data: data,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 654\n            },\n            __self: this\n          });\n\n        case NOTIFICATIONS.NEW_ORDER:\n          {\n            var onConfirm = data.onConfirm,\n                rest = _objectWithoutProperties(data, [\"onConfirm\"]);\n\n            return React.createElement(Notification, {\n              type: type,\n              data: rest,\n              onConfirm: data.onConfirm,\n              onBack: _this.onCloseDialog,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 663\n              },\n              __self: this\n            });\n          }\n\n        case NOTIFICATIONS.WITHDRAWAL_EMAIL_CONFIRMATION:\n          return React.createElement(ReviewEmailContent, {\n            onConfirmEmail: _this.onConfirmEmail,\n            onClose: _this.onCloseDialog,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 673\n            },\n            __self: this\n          });\n\n        case FEES_STRUCTURE_AND_LIMITS:\n          return React.createElement(FeesAndLimits, {\n            type: type,\n            data: data,\n            onClose: _this.onCloseDialog,\n            activeTheme: _this.props.activeTheme,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 680\n            },\n            __self: this\n          });\n\n        case RISK_PORTFOLIO_ORDER_WARING:\n          return React.createElement(SetOrderPortfolio, {\n            data: data,\n            onClose: _this.onCloseDialog,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 689\n            },\n            __self: this\n          });\n\n        case LOGOUT_CONFORMATION:\n          return React.createElement(LogoutConfirmation, {\n            data: data,\n            onConfirm: _this.logout,\n            onClose: _this.onCloseDialog,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 693\n            },\n            __self: this\n          });\n\n        case RISKY_ORDER:\n          {\n            var _onConfirm = data.onConfirm,\n                _rest = _objectWithoutProperties(data, [\"onConfirm\"]);\n\n            return React.createElement(RiskyOrder, {\n              data: _objectSpread({\n                coins: _this.props.coins\n              }, _rest),\n              onConfirm: _onConfirm,\n              onClose: _this.onCloseDialog,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 702\n              },\n              __self: this\n            });\n          }\n\n        case NOTIFICATIONS.INVITE_FRIENDS:\n          {\n            var _onConfirm2 = data.onConfirm,\n                _rest2 = _objectWithoutProperties(data, [\"onConfirm\"]);\n\n            return React.createElement(Notification, {\n              type: type,\n              data: _rest2,\n              onConfirm: data.onConfirm,\n              onBack: _this.onCloseDialog,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 715\n              },\n              __self: this\n            });\n          }\n\n        default:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 724\n            },\n            __self: this\n          });\n      }\n    };\n\n    _this.onChangeLanguage = function (language) {\n      return function () {\n        return _this.props.changeLanguage(language);\n      };\n    };\n\n    return _this;\n  }\n\n  _createClass(Container, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var chatIsClosed = getChatMinimized();\n      this.setState({\n        chatIsClosed: chatIsClosed\n      });\n\n      if (isLoggedIn() && checkUserSessionExpired(getTokenTimestamp())) {\n        this.logout('Token is expired');\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.props.fetchingAuth) {\n        this.initSocketConnections();\n      }\n\n      this._resetTimer();\n\n      this.updateThemeToBody(this.props.activeTheme);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!nextProps.fetchingAuth && nextProps.fetchingAuth !== this.props.fetchingAuth) {\n        if (!this.state.publicSocket) {\n          this.initSocketConnections();\n        }\n      }\n\n      if (nextProps.activeNotification.timestamp !== this.props.activeNotification.timestamp) {\n        if (nextProps.activeNotification.type !== '') {\n          this.onOpenDialog();\n        } else {\n          this.onCloseDialog();\n        }\n      } else if (!nextProps.activeNotification.timestamp && this.state.dialogIsOpen) {\n        this.onCloseDialog();\n      }\n\n      if (!this.props.verification_level && nextProps.verification_level !== this.props.verification_level && nextProps.verification_level === 1) {// this.goToAccountPage();\n      }\n\n      if (this.props.activeTheme !== nextProps.activeTheme) {\n        this.updateThemeToBody(nextProps.activeTheme);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.state.publicSocket) {\n        this.state.publicSocket.close();\n      }\n\n      if (this.state.privateSocket) {\n        this.state.privateSocket.close();\n      }\n\n      if (this.state.idleTimer) {\n        clearTimeout(this.state.idleTimer);\n      }\n\n      clearTimeout(this.limitTimeOut);\n    }\n  }, {\n    key: \"isSocketDataReady\",\n    value: function isSocketDataReady() {\n      var _this$props = this.props,\n          orderbooks = _this$props.orderbooks,\n          pairsTrades = _this$props.pairsTrades,\n          pair = _this$props.pair; // return (Object.keys(orderbooks).length && orderbooks[pair] && Object.keys(orderbooks[pair]).length &&\n      // \tObject.keys(pairsTrades).length);\n\n      return Object.keys(orderbooks).length && orderbooks[pair] && Object.keys(pairsTrades).length;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          symbol = _this$props2.symbol,\n          pair = _this$props2.pair,\n          children = _this$props2.children,\n          activeNotification = _this$props2.activeNotification,\n          prices = _this$props2.prices,\n          activeLanguage = _this$props2.activeLanguage,\n          openHelpfulResourcesForm = _this$props2.openHelpfulResourcesForm,\n          activeTheme = _this$props2.activeTheme,\n          unreadMessages = _this$props2.unreadMessages,\n          router = _this$props2.router,\n          location = _this$props2.location;\n      var _this$state = this.state,\n          dialogIsOpen = _this$state.dialogIsOpen,\n          appLoaded = _this$state.appLoaded,\n          chatIsClosed = _this$state.chatIsClosed;\n      var languageClasses = getClasesForLanguage(activeLanguage, 'array');\n      var fontClass = getFontClassForLanguage(activeLanguage);\n      var shouldCloseOnOverlayClick = activeNotification.type !== CONTACT_FORM;\n      var activePath = !appLoaded ? '' : this.getClassForActivePath(this.props.location.pathname);\n      var isMenubar = activePath === 'account' || activePath === 'wallet';\n      return React.createElement(\"div\", {\n        className: classnames(getThemeClass(activeTheme), activePath, symbol, fontClass, languageClasses[0], {\n          'layout-mobile': isMobile,\n          'layout-desktop': isBrowser\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 771\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('app_container', 'd-flex', getThemeClass(activeTheme), activePath, symbol, fontClass, languageClasses[0], {\n          'layout-mobile': isMobile,\n          'layout-desktop': isBrowser\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 784\n        },\n        __self: this\n      }, React.createElement(EventListener, {\n        target: \"window\",\n        onResize: this.resetTimer,\n        onScroll: this.resetTimer,\n        onMouseMove: this.resetTimer,\n        onClick: this.resetTimer,\n        onKeyPress: this.resetTimer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 799\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"d-flex flex-column f-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 807\n        },\n        __self: this\n      }, React.createElement(AppBar, {\n        router: router,\n        location: location,\n        goToDashboard: this.goToDashboard,\n        logout: this.logout,\n        activePath: activePath,\n        rightChildren: React.createElement(CurrencyList, {\n          className: \"horizontal-currency-list justify-content-end\",\n          activeLanguage: activeLanguage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 815\n          },\n          __self: this\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 808\n        },\n        __self: this\n      }), isBrowser && isMenubar && React.createElement(AppMenuBar, {\n        router: router,\n        location: location,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 822\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: classnames('app_container-content', 'd-flex', 'justify-content-between', {\n          'app_container-secondary-content': isMenubar\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 824\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classnames('app_container-main', 'd-flex', 'flex-column', 'justify-content-between', {\n          'overflow-y': !isMobile\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 834\n        },\n        __self: this\n      }, appLoaded && this.isSocketDataReady() ? children : React.createElement(Loader, {\n        background: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 848\n        },\n        __self: this\n      })), isBrowser && React.createElement(\"div\", {\n        className: \"app_container-sidebar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 852\n        },\n        __self: this\n      }, React.createElement(Sidebar, {\n        activePath: activePath,\n        logout: this.logout // help={openContactForm}\n        ,\n        theme: activeTheme,\n        isLogged: isLoggedIn(),\n        help: openHelpfulResourcesForm,\n        pair: pair,\n        minimizeChat: this.minimizeChat,\n        chatIsClosed: chatIsClosed,\n        unreadMessages: unreadMessages,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 853\n        },\n        __self: this\n      })), React.createElement(Dialog, {\n        isOpen: dialogIsOpen,\n        label: \"hollaex-modal\",\n        className: \"app-dialog\",\n        onCloseDialog: this.onCloseDialog,\n        shouldCloseOnOverlayClick: shouldCloseOnOverlayClick,\n        theme: activeTheme,\n        showCloseText: !(activeNotification.type === CONTACT_FORM || activeNotification.type === HELPFUL_RESOURCES_FORM || activeNotification.type === NOTIFICATIONS.NEW_ORDER || activeNotification.type === NOTIFICATIONS.TRADES && !isMobile || activeNotification.type === NOTIFICATIONS.ORDERS && !isMobile || activeNotification.type === NOTIFICATIONS.ERROR),\n        compressed: activeNotification.type === NOTIFICATIONS.ORDERS || activeNotification.type === NOTIFICATIONS.TRADES,\n        style: {\n          'z-index': 100\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 867\n        },\n        __self: this\n      }, dialogIsOpen && this.renderDialogContent(activeNotification, prices, activeTheme)), !isMobile && React.createElement(ChatComponent, {\n        minimized: chatIsClosed,\n        onMinimize: this.minimizeChat,\n        chatIsClosed: chatIsClosed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 904\n        },\n        __self: this\n      })), isMobile && React.createElement(\"div\", {\n        className: \"app_container-bottom_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 912\n        },\n        __self: this\n      }, React.createElement(SidebarBottom, {\n        isLogged: isLoggedIn(),\n        activePath: activePath,\n        pair: pair,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 913\n        },\n        __self: this\n      })))), React.createElement(SnackNotification, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 922\n        },\n        __self: this\n      }), React.createElement(SnackDialog, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 923\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Container;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    pair: store.app.pair,\n    coins: store.app.coins,\n    symbol: store.orderbook.symbol,\n    prices: store.orderbook.prices,\n    fetchingAuth: store.auth.fetching,\n    activeNotification: store.app.activeNotification,\n    verification_level: store.user.verification_level,\n    activeLanguage: store.app.language,\n    activeTheme: store.app.theme,\n    orders: store.order.activeOrders,\n    user: store.user,\n    unreadMessages: store.app.chatUnreadMessages,\n    orderbooks: store.orderbook.pairsOrderbooks,\n    pairsTrades: store.orderbook.pairsTrades,\n    settings: store.user.settings\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logout: bindActionCreators(logout, dispatch),\n    addTrades: bindActionCreators(addTrades, dispatch),\n    setOrderbook: bindActionCreators(setOrderbook, dispatch),\n    setMe: bindActionCreators(setMe, dispatch),\n    setBalance: bindActionCreators(setBalance, dispatch),\n    setUserOrders: bindActionCreators(setUserOrders, dispatch),\n    addOrder: bindActionCreators(addOrder, dispatch),\n    updateOrder: bindActionCreators(updateOrder, dispatch),\n    removeOrder: bindActionCreators(removeOrder, dispatch),\n    addUserTrades: bindActionCreators(addUserTrades, dispatch),\n    updateUser: bindActionCreators(updateUser, dispatch),\n    closeNotification: bindActionCreators(closeNotification, dispatch),\n    closeAllNotification: bindActionCreators(closeAllNotification, dispatch),\n    openContactForm: bindActionCreators(openContactForm, dispatch),\n    openHelpfulResourcesForm: bindActionCreators(openHelpfulResourcesForm, dispatch),\n    setNotification: bindActionCreators(setNotification, dispatch),\n    changeLanguage: bindActionCreators(setLanguage, dispatch),\n    changePair: bindActionCreators(changePair, dispatch),\n    setPairs: bindActionCreators(setPairs, dispatch),\n    setPairsData: bindActionCreators(setPairsData, dispatch),\n    setOrderbooks: bindActionCreators(setOrderbooks, dispatch),\n    setTrades: bindActionCreators(setTrades, dispatch),\n    setTickers: bindActionCreators(setTickers, dispatch),\n    changeTheme: bindActionCreators(changeTheme, dispatch),\n    setChatUnreadMessages: bindActionCreators(setChatUnreadMessages, dispatch),\n    setOrderLimits: bindActionCreators(setOrderLimits, dispatch),\n    setSnackDialog: bindActionCreators(setSnackDialog, dispatch),\n    setCurrencies: bindActionCreators(setCurrencies, dispatch)\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Container);","map":{"version":3,"sources":["/home/user/Documents/projects/hollaex/src/containers/App/index.js"],"names":["React","Component","classnames","connect","bindActionCreators","io","EventListener","debounce","WS_URL","ICONS","SESSION_TIME","BASE_CURRENCY","isBrowser","isMobile","logout","setMe","setBalance","updateUser","addUserTrades","setUserOrders","addOrder","updateOrder","removeOrder","setOrderbooks","setTrades","setOrderbook","addTrades","setPairsData","setTickers","setPairs","changePair","setCurrencies","setNotification","closeNotification","openContactForm","openHelpfulResourcesForm","setLanguage","changeTheme","closeAllNotification","setChatUnreadMessages","setOrderLimits","NOTIFICATIONS","CONTACT_FORM","HELPFUL_RESOURCES_FORM","FEES_STRUCTURE_AND_LIMITS","RISK_PORTFOLIO_ORDER_WARING","RISKY_ORDER","setSnackDialog","LOGOUT_CONFORMATION","getThemeClass","getChatMinimized","setChatMinimized","checkUserSessionExpired","playBackgroundAudioNotification","getToken","getTokenTimestamp","isLoggedIn","AppBar","AppMenuBar","Sidebar","SidebarBottom","Dialog","Loader","Notification","MessageDisplay","CurrencyList","SnackNotification","SnackDialog","ContactForm","HelpfulResourcesForm","Chat","ChatComponent","ReviewEmailContent","FeesAndLimits","SetOrderPortfolio","LogoutConfirmation","RiskyOrder","getClasesForLanguage","getFontClassForLanguage","Container","state","appLoaded","dialogIsOpen","chatIsClosed","publicSocket","undefined","privateSocket","idleTimer","ordersQueued","limitFilledOnOrder","limitTimeOut","updateThemeToBody","theme","themeName","document","body","className","_resetTimer","clearTimeout","setTimeout","setState","resetTimer","initSocketConnections","setPublicWS","setUserSocket","query","on","data","props","pair","Object","keys","pairs","coins","pairWithBase","filter","key","temp","pair_2","length","alert","orderLimits","map","index","PRICE","MIN","min_price","MAX","max_price","STEP","increment_price","SIZE","min_size","max_size","action","settings","audio","public_trade","location","pathname","indexOf","params","token","error","language","activeLanguage","changeLanguage","interface","activeTheme","localStorage","setItem","balance","type","concat","id","indexOfOrder","findIndex","order","splice","notification","popup_order_partially_filled","isDialog","ORDERS","order_partially_completed","ordersDeleted","orders","deletedOrder","popup_order_completed","forEach","orderDeleted","filled","size","order_completed","reverse","tradeOrdersIds","Set","trade","add","orderIdFromTrade","Array","from","find","TRADES","limit","show","status","currency","DEPOSIT","amount","WITHDRAWAL","goToPage","path","router","push","goToAccountPage","goToVerificationPage","goToDashboard","message","onOpenDialog","onCloseDialog","minimizeChat","onConfirmEmail","getClassForActivePath","renderDialogContent","prices","price","ERROR","RED_WARNING","NEW_ORDER","onConfirm","rest","WITHDRAWAL_EMAIL_CONFIRMATION","INVITE_FRIENDS","onChangeLanguage","fetchingAuth","nextProps","activeNotification","timestamp","verification_level","close","orderbooks","pairsTrades","symbol","children","unreadMessages","languageClasses","fontClass","shouldCloseOnOverlayClick","activePath","isMenubar","isSocketDataReady","mapStateToProps","store","app","orderbook","auth","fetching","user","activeOrders","chatUnreadMessages","pairsOrderbooks","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport classnames from 'classnames';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport io from 'socket.io-client';\nimport EventListener from 'react-event-listener';\nimport { debounce } from 'lodash';\nimport {\n\tWS_URL,\n\tICONS,\n\tSESSION_TIME,\n\tBASE_CURRENCY\n} from '../../config/constants';\nimport { isBrowser, isMobile } from 'react-device-detect';\n\nimport { logout } from '../../actions/authAction';\nimport { setMe, setBalance, updateUser } from '../../actions/userAction';\nimport { addUserTrades } from '../../actions/walletActions';\nimport {\n\tsetUserOrders,\n\taddOrder,\n\tupdateOrder,\n\tremoveOrder\n} from '../../actions/orderAction';\nimport {\n\tsetOrderbooks,\n\tsetTrades,\n\tsetOrderbook,\n\taddTrades,\n\tsetPairsData\n} from '../../actions/orderbookAction';\nimport {\n\tsetTickers,\n\tsetPairs,\n\tchangePair,\n\tsetCurrencies,\n\tsetNotification,\n\tcloseNotification,\n\topenContactForm,\n\topenHelpfulResourcesForm,\n\tsetLanguage,\n\tchangeTheme,\n\tcloseAllNotification,\n\tsetChatUnreadMessages,\n\tsetOrderLimits,\n\tNOTIFICATIONS,\n\tCONTACT_FORM,\n\tHELPFUL_RESOURCES_FORM,\n\tFEES_STRUCTURE_AND_LIMITS,\n\tRISK_PORTFOLIO_ORDER_WARING,\n\tRISKY_ORDER,\n\tsetSnackDialog,\n\tLOGOUT_CONFORMATION\n} from '../../actions/appActions';\n\nimport {\n\tgetThemeClass,\n\tgetChatMinimized,\n\tsetChatMinimized\n} from '../../utils/theme';\nimport {\n\tcheckUserSessionExpired,\n\tplayBackgroundAudioNotification\n} from '../../utils/utils';\nimport { getToken, getTokenTimestamp, isLoggedIn } from '../../utils/token';\nimport {\n\tAppBar,\n\tAppMenuBar,\n\tSidebar,\n\tSidebarBottom,\n\tDialog,\n\tLoader,\n\tNotification,\n\tMessageDisplay,\n\tCurrencyList,\n\tSnackNotification,\n\tSnackDialog\n} from '../../components';\nimport { ContactForm, HelpfulResourcesForm, Chat as ChatComponent } from '../';\nimport ReviewEmailContent from '../Withdraw/ReviewEmailContent';\nimport FeesAndLimits from '../Summary/components/FeesAndLimits';\nimport SetOrderPortfolio from '../UserSettings/SetOrderPortfolio';\nimport LogoutConfirmation from '../Summary/components/LogoutConfirmation';\nimport RiskyOrder from '../Trade/components/RiskyOrder';\n\nimport {\n\tgetClasesForLanguage,\n\tgetFontClassForLanguage\n} from '../../utils/string';\n\nclass Container extends Component {\n\tstate = {\n\t\tappLoaded: false,\n\t\tdialogIsOpen: false,\n\t\tchatIsClosed: false,\n\t\tpublicSocket: undefined,\n\t\tprivateSocket: undefined,\n\t\tidleTimer: undefined,\n\t\tordersQueued: [],\n\t\tlimitFilledOnOrder: ''\n\t};\n\n\tlimitTimeOut = null;\n\n\tcomponentWillMount() {\n\t\tconst chatIsClosed = getChatMinimized();\n\t\tthis.setState({\n\t\t\tchatIsClosed\n\t\t});\n\t\tif (isLoggedIn() && checkUserSessionExpired(getTokenTimestamp())) {\n\t\t\tthis.logout('Token is expired');\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif (!this.props.fetchingAuth) {\n\t\t\tthis.initSocketConnections();\n\t\t}\n\t\tthis._resetTimer();\n\t\tthis.updateThemeToBody(this.props.activeTheme);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\t!nextProps.fetchingAuth &&\n\t\t\tnextProps.fetchingAuth !== this.props.fetchingAuth\n\t\t) {\n\t\t\tif (!this.state.publicSocket) {\n\t\t\t\tthis.initSocketConnections();\n\t\t\t}\n\t\t}\n\t\tif (\n\t\t\tnextProps.activeNotification.timestamp !==\n\t\t\tthis.props.activeNotification.timestamp\n\t\t) {\n\t\t\tif (nextProps.activeNotification.type !== '') {\n\t\t\t\tthis.onOpenDialog();\n\t\t\t} else {\n\t\t\t\tthis.onCloseDialog();\n\t\t\t}\n\t\t} else if (\n\t\t\t!nextProps.activeNotification.timestamp &&\n\t\t\tthis.state.dialogIsOpen\n\t\t) {\n\t\t\tthis.onCloseDialog();\n\t\t}\n\t\tif (\n\t\t\t!this.props.verification_level &&\n\t\t\tnextProps.verification_level !== this.props.verification_level &&\n\t\t\tnextProps.verification_level === 1\n\t\t) {\n\t\t\t// this.goToAccountPage();\n\t\t}\n\t\tif (this.props.activeTheme !== nextProps.activeTheme) {\n\t\t\tthis.updateThemeToBody(nextProps.activeTheme);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif (this.state.publicSocket) {\n\t\t\tthis.state.publicSocket.close();\n\t\t}\n\n\t\tif (this.state.privateSocket) {\n\t\t\tthis.state.privateSocket.close();\n\t\t}\n\n\t\tif (this.state.idleTimer) {\n\t\t\tclearTimeout(this.state.idleTimer);\n\t\t}\n\t\tclearTimeout(this.limitTimeOut);\n\t}\n\n\tupdateThemeToBody = (theme) => {\n\t\tconst themeName = theme === 'dark' ? 'dark-app-body' : '';\n\t\tif (document.body) {\n\t\t\tdocument.body.className = themeName;\n\t\t}\n\t};\n\n\t_resetTimer = () => {\n\t\tif (this.state.idleTimer) {\n\t\t\tclearTimeout(this.idleTimer);\n\t\t}\n\t\tif (this.state.appLoaded) {\n\t\t\tconst idleTimer = setTimeout(\n\t\t\t\t() => this.logout('Inactive'),\n\t\t\t\tSESSION_TIME\n\t\t\t); // no activity will log the user out automatically\n\t\t\tthis.setState({ idleTimer });\n\t\t}\n\t};\n\n\tresetTimer = debounce(this._resetTimer, 250);\n\n\tinitSocketConnections = () => {\n\t\tthis.setPublicWS();\n\t\tif (isLoggedIn()) {\n\t\t\tthis.setUserSocket(getToken());\n\t\t}\n\t\tthis.setState({ appLoaded: true }, () => {\n\t\t\tthis._resetTimer();\n\t\t});\n\t};\n\n\tsetPublicWS = () => {\n\t\t// TODO change when added more cryptocurrencies\n\n\t\tconst publicSocket = io(`${WS_URL}/realtime`, {\n\t\t\tquery: {\n\t\t\t\t// symbol: 'btc'\n\t\t\t}\n\t\t});\n\n\t\tthis.setState({ publicSocket });\n\n\t\tpublicSocket.on('initial', (data) => {\n\t\t\tif (!this.props.pair) {\n\t\t\t\tconst pair = Object.keys(data.pairs)[0];\n\t\t\t\tthis.props.changePair(pair);\n\t\t\t}\n\t\t\tthis.props.setPairs(data.pairs);\n\t\t\tthis.props.setPairsData(data.pairs);\n\t\t\tthis.props.setCurrencies(data.coins);\n\t\t\tconst pairWithBase = Object.keys(data.pairs).filter((key) => {\n\t\t\t\tlet temp = data.pairs[key];\n\t\t\t\treturn temp.pair_2 === BASE_CURRENCY;\n\t\t\t});\n\t\t\tif (!pairWithBase.length) {\n\t\t\t\talert(`You need to set relevant BASE_CURRENCY, now is in ${BASE_CURRENCY}`);\n\t\t\t}\n\t\t\tconst orderLimits = {};\n\t\t\tObject.keys(data.pairs).map((pair, index) => {\n\t\t\t\torderLimits[pair] = {\n\t\t\t\t\tPRICE: {\n\t\t\t\t\t\tMIN: data.pairs[pair].min_price,\n\t\t\t\t\t\tMAX: data.pairs[pair].max_price,\n\t\t\t\t\t\tSTEP: data.pairs[pair].increment_price\n\t\t\t\t\t},\n\t\t\t\t\tSIZE: {\n\t\t\t\t\t\tMIN: data.pairs[pair].min_size,\n\t\t\t\t\t\tMAX: data.pairs[pair].max_size,\n\t\t\t\t\t\tSTEP: data.pairs[pair].increment_price\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\treturn '';\n\t\t\t});\n\t\t\tthis.props.setOrderLimits(orderLimits);\n\t\t});\n\n\t\tpublicSocket.on('orderbook', (data) => {\n\t\t\tthis.props.setOrderbooks(data);\n\t\t});\n\n\t\tpublicSocket.on('trades', (data) => {\n\t\t\tthis.props.setTrades(data);\n\t\t\tthis.props.setTickers(data);\n\t\t\tif (data.action === 'update') {\n\t\t\t\tif (\n\t\t\t\t\tthis.props.settings.audio &&\n\t\t\t\t\tthis.props.settings.audio.public_trade &&\n\t\t\t\t\tthis.props.location.pathname.indexOf('/trade/') === 0 &&\n\t\t\t\t\tthis.props.params.pair\n\t\t\t\t) {\n\t\t\t\t\tplayBackgroundAudioNotification('public_trade');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// publicSocket.on('ticker', (data) => {\n\n\t\t// this.props.setTickers(data);\n\t\t// });\n\t};\n\n\tsetUserSocket = (token) => {\n\t\tconst privateSocket = io.connect(`${WS_URL}/user`, {\n\t\t\tquery: {\n\t\t\t\ttoken: `Bearer ${token}`\n\t\t\t}\n\t\t});\n\n\t\tthis.setState({ privateSocket });\n\n\t\tprivateSocket.on('error', (error) => {\n\t\t\tif (\n\t\t\t\terror &&\n\t\t\t\ttypeof error === 'string' &&\n\t\t\t\terror.indexOf('Access Denied') > -1\n\t\t\t) {\n\t\t\t\tthis.logout('Token is expired');\n\t\t\t}\n\t\t});\n\n\t\tprivateSocket.on('user', ({ action, data }) => {\n\t\t\t// if (!data.phone_number) {\n\t\t\t// \treturn this.goToVerificationPage();\n\t\t\t// }\n\t\t\tthis.props.setMe(data);\n\t\t\tif (\n\t\t\t\tdata.settings &&\n\t\t\t\tdata.settings.language !== this.props.activeLanguage\n\t\t\t) {\n\t\t\t\tthis.props.changeLanguage(data.settings.language);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdata.settings.interface &&\n\t\t\t\tdata.settings.interface.theme !== this.props.activeTheme\n\t\t\t) {\n\t\t\t\tthis.props.changeTheme(data.settings.interface.theme);\n\t\t\t\tlocalStorage.setItem('theme', data.settings.interface.theme);\n\t\t\t}\n\t\t});\n\n\t\tprivateSocket.on('orders', ({ action, data }) => {\n\t\t\tthis.props.setUserOrders(data);\n\t\t});\n\n\t\tprivateSocket.on('trades', ({ action, data }) => {\n\t\t\t// this.props.addUserTrades(data);\n\t\t});\n\n\t\tprivateSocket.on('wallet', ({ action, balance }) => {\n\t\t\tthis.props.setBalance(balance);\n\t\t});\n\n\t\tprivateSocket.on('update', ({ action, type, data }) => {\n\t\t\tswitch (type) {\n\t\t\t\tcase 'order_queued':\n\t\t\t\t\t// TODO add queued orders to the store\n\t\t\t\t\t// this.props.addOrder(data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tordersQueued: this.state.ordersQueued.concat(data)\n\t\t\t\t\t});\n\t\t\t\t\tif (data.type === 'limit') {\n\t\t\t\t\t\tplayBackgroundAudioNotification('orderbook_limit_order');\n\t\t\t\t\t\tthis.setState({ limitFilledOnOrder: data.id });\n\t\t\t\t\t\tthis.limitTimeOut = setTimeout(() => {\n\t\t\t\t\t\t\tif (this.state.limitFilledOnOrder)\n\t\t\t\t\t\t\t\tthis.setState({ limitFilledOnOrder: '' });\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'order_processed':\n\t\t\t\tcase 'order_canceled': {\n\t\t\t\t\tconst ordersQueued = [].concat(this.state.ordersQueued);\n\t\t\t\t\tconst indexOfOrder = ordersQueued.findIndex(\n\t\t\t\t\t\t(order) => order.id === data.id\n\t\t\t\t\t);\n\t\t\t\t\tif (indexOfOrder > -1) {\n\t\t\t\t\t\tordersQueued.splice(indexOfOrder, 1);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState({ ordersQueued });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'order_added': {\n\t\t\t\t\tconst { ordersQueued } = this.state;\n\t\t\t\t\tconst indexOfOrder = ordersQueued.findIndex(\n\t\t\t\t\t\t({ id }) => id === data.id\n\t\t\t\t\t);\n\t\t\t\t\tif (indexOfOrder > -1) {\n\t\t\t\t\t\tordersQueued.splice(indexOfOrder, 1);\n\t\t\t\t\t\tthis.setState({ ordersQueued });\n\t\t\t\t\t}\n\t\t\t\t\tthis.props.addOrder(data);\n\t\t\t\t\t// this.props.setNotification(NOTIFICATIONS.ORDERS, { type, data });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'order_partialy_filled': {\n\t\t\t\t\t// let filled = 0;\n\t\t\t\t\t// const order = this.props.orders.find(order => order.id === data.id)\n\t\t\t\t\t// if (order) {\n\t\t\t\t\t// \tfilled = order.filled;\n\t\t\t\t\t// }\n\t\t\t\t\tthis.props.updateOrder(data);\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.settings.notification &&\n\t\t\t\t\t\tthis.props.settings.notification.popup_order_partially_filled\n\t\t\t\t\t) {\n\t\t\t\t\t\t// data.filled = data.filled - filled;\n\t\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\t\tthis.props.setSnackDialog({\n\t\t\t\t\t\t\t\tisDialog: true,\n\t\t\t\t\t\t\t\ttype: 'trade',\n\t\t\t\t\t\t\t\tdata: { order: data, data }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.props.setNotification(NOTIFICATIONS.ORDERS, {\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\torder: data,\n\t\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.settings.audio &&\n\t\t\t\t\t\tthis.props.settings.audio.order_partially_completed\n\t\t\t\t\t) {\n\t\t\t\t\t\tplayBackgroundAudioNotification('order_partialy_filled');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'order_updated':\n\t\t\t\t\tthis.props.updateOrder(data);\n\t\t\t\t\tthis.props.setNotification(\n\t\t\t\t\t\tNOTIFICATIONS.ORDERS,\n\t\t\t\t\t\t{ type, data },\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'order_filled': {\n\t\t\t\t\tconst ordersDeleted = this.props.orders.filter(\n\t\t\t\t\t\t(order, index) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\tdata.findIndex(\n\t\t\t\t\t\t\t\t\t(deletedOrder) => deletedOrder.id === order.id\n\t\t\t\t\t\t\t\t) > -1\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tthis.props.removeOrder(data);\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.settings.notification &&\n\t\t\t\t\t\tthis.props.settings.notification.popup_order_completed\n\t\t\t\t\t) {\n\t\t\t\t\t\tordersDeleted.forEach((orderDeleted) => {\n\t\t\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\t\t\tthis.props.setSnackDialog({\n\t\t\t\t\t\t\t\t\tisDialog: true,\n\t\t\t\t\t\t\t\t\ttype: 'order',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\t...orderDeleted,\n\t\t\t\t\t\t\t\t\t\t\tfilled: orderDeleted.size\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props.setNotification(NOTIFICATIONS.ORDERS, {\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t...orderDeleted,\n\t\t\t\t\t\t\t\t\t\tfilled: orderDeleted.size\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.settings.audio &&\n\t\t\t\t\t\tthis.props.settings.audio.order_completed\n\t\t\t\t\t) {\n\t\t\t\t\t\tplayBackgroundAudioNotification('order_filled');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'order_removed':\n\t\t\t\t\tthis.props.removeOrder(data);\n\t\t\t\t\tthis.props.setNotification(\n\t\t\t\t\t\tNOTIFICATIONS.ORDERS,\n\t\t\t\t\t\t{ type, data },\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'trade': {\n\t\t\t\t\tthis.props.addUserTrades(data.reverse());\n\t\t\t\t\tconst tradeOrdersIds = new Set();\n\t\t\t\t\tdata.forEach((trade) => {\n\t\t\t\t\t\tif (trade.order) {\n\t\t\t\t\t\t\ttradeOrdersIds.add(trade.order.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif (tradeOrdersIds.size === 1) {\n\t\t\t\t\t\tconst orderIdFromTrade = Array.from(tradeOrdersIds)[0];\n\t\t\t\t\t\tconst { ordersQueued } = this.state;\n\t\t\t\t\t\tlet order = ordersQueued.find(\n\t\t\t\t\t\t\t({ id }) => id === orderIdFromTrade\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!order) {\n\t\t\t\t\t\t\tconst { orders } = this.props;\n\t\t\t\t\t\t\torder = orders.find(({ id }) => id === orderIdFromTrade);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\torder &&\n\t\t\t\t\t\t\torder.type === 'market' &&\n\t\t\t\t\t\t\tthis.props.settings.notification &&\n\t\t\t\t\t\t\tthis.props.settings.notification.popup_order_completed\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (isMobile) {\n\t\t\t\t\t\t\t\tthis.props.setSnackDialog({\n\t\t\t\t\t\t\t\t\tisDialog: true,\n\t\t\t\t\t\t\t\t\ttype: 'trade',\n\t\t\t\t\t\t\t\t\tdata: { order, data }\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.props.setNotification(NOTIFICATIONS.TRADES, {\n\t\t\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\t\t\torder\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.state.limitFilledOnOrder &&\n\t\t\t\t\t\tdata.filter(\n\t\t\t\t\t\t\t(limit) => limit.id === this.state.limitFilledOnOrder\n\t\t\t\t\t\t).length &&\n\t\t\t\t\t\tthis.props.settings.audio &&\n\t\t\t\t\t\tthis.props.settings.audio.order_completed\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tplayBackgroundAudioNotification('order_filled');\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'deposit': {\n\t\t\t\t\tconst show = data.status || data.currency !== BASE_CURRENCY;\n\t\t\t\t\tdata.coins = this.props.coins;\n\t\t\t\t\tthis.props.setNotification(NOTIFICATIONS.DEPOSIT, data, show);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'withdrawal': {\n\t\t\t\t\t// TODO FIX when notification is defined\n\n\t\t\t\t\tconst show = data.amount;\n\t\t\t\t\tthis.props.setNotification(\n\t\t\t\t\t\tNOTIFICATIONS.WITHDRAWAL,\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\t!show\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\tgoToPage = (path) => {\n\t\tif (this.props.location.pathname !== path) {\n\t\t\tthis.props.router.push(path);\n\t\t}\n\t};\n\n\tgoToAccountPage = () => this.goToPage('/account');\n\tgoToVerificationPage = () => this.goToPage('/verification');\n\tgoToDashboard = () => this.goToPage('/');\n\n\tlogout = (message = '') => {\n\t\tthis.setState({ appLoaded: false }, () => {\n\t\t\tthis.props.logout(typeof message === 'string' ? message : '');\n\t\t});\n\t};\n\n\tonOpenDialog = () => {\n\t\tthis.setState({ dialogIsOpen: true });\n\t};\n\n\tonCloseDialog = () => {\n\t\tthis.setState({ dialogIsOpen: false });\n\t\tthis.props.closeNotification();\n\t};\n\n\tminimizeChat = () => {\n\t\tconst chatIsClosed = !this.state.chatIsClosed;\n\t\tif (chatIsClosed === false) {\n\t\t\tthis.props.setChatUnreadMessages();\n\t\t}\n\t\tsetChatMinimized(chatIsClosed);\n\t\tthis.setState({ chatIsClosed });\n\t};\n\n\tonConfirmEmail = () => {\n\t\tthis.onCloseDialog();\n\t\tthis.props.router.push('/wallet');\n\t};\n\n\tgetClassForActivePath = (path) => {\n\t\tswitch (path) {\n\t\t\tcase '/wallet':\n\t\t\t\treturn 'wallet';\n\t\t\tcase '/account':\n\t\t\tcase '/developers':\n\t\t\tcase '/security':\n\t\t\tcase '/verification':\n\t\t\tcase '/settings':\n\t\t\tcase '/summary':\n\t\t\tcase '/api':\n\t\t\t\treturn 'account';\n\t\t\tcase '/quick-trade':\n\t\t\t\treturn 'quick-trade';\n\t\t\tcase '/trade':\n\t\t\t\treturn 'trade';\n\t\t\tcase '/chat':\n\t\t\t\treturn 'chat';\n\t\t\tdefault:\n\t\t}\n\t\tif (path.indexOf('/trade/') === 0) {\n\t\t\treturn 'trade';\n\t\t} else if (path.indexOf('/quick-trade/') === 0) {\n\t\t\treturn 'quick-trade';\n\t\t}\n\n\t\treturn '';\n\t};\n\n\trenderDialogContent = ({ type, data }, prices) => {\n\t\tswitch (type) {\n\t\t\tcase NOTIFICATIONS.ORDERS:\n\t\t\tcase NOTIFICATIONS.TRADES:\n\t\t\tcase NOTIFICATIONS.WITHDRAWAL:\n\t\t\t\treturn (\n\t\t\t\t\t<Notification\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\topenContactForm={this.props.openContactForm}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase NOTIFICATIONS.DEPOSIT:\n\t\t\t\treturn (\n\t\t\t\t\t<Notification\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tprice: prices[data.currency],\n\t\t\t\t\t\t\tcoins: this.props.coins\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t\tgoToPage={this.goToPage}\n\t\t\t\t\t\topenContactForm={this.props.openContactForm}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase NOTIFICATIONS.ERROR:\n\t\t\t\treturn (\n\t\t\t\t\t<MessageDisplay\n\t\t\t\t\t\ticonPath={ICONS.RED_WARNING}\n\t\t\t\t\t\tonClick={this.onCloseDialog}\n\t\t\t\t\t\ttext={data}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase CONTACT_FORM:\n\t\t\t\treturn (\n\t\t\t\t\t<ContactForm\n\t\t\t\t\t\tonSubmitSuccess={this.onCloseDialog}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase HELPFUL_RESOURCES_FORM:\n\t\t\t\treturn (\n\t\t\t\t\t<HelpfulResourcesForm\n\t\t\t\t\t\tonSubmitSuccess={this.onCloseDialog}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase NOTIFICATIONS.NEW_ORDER: {\n\t\t\t\tconst { onConfirm, ...rest } = data;\n\t\t\t\treturn (\n\t\t\t\t\t<Notification\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tdata={rest}\n\t\t\t\t\t\tonConfirm={data.onConfirm}\n\t\t\t\t\t\tonBack={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase NOTIFICATIONS.WITHDRAWAL_EMAIL_CONFIRMATION:\n\t\t\t\treturn (\n\t\t\t\t\t<ReviewEmailContent\n\t\t\t\t\t\tonConfirmEmail={this.onConfirmEmail}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase FEES_STRUCTURE_AND_LIMITS:\n\t\t\t\treturn (\n\t\t\t\t\t<FeesAndLimits\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t\tactiveTheme={this.props.activeTheme}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase RISK_PORTFOLIO_ORDER_WARING:\n\t\t\t\treturn (\n\t\t\t\t\t<SetOrderPortfolio data={data} onClose={this.onCloseDialog} />\n\t\t\t\t);\n\t\t\tcase LOGOUT_CONFORMATION:\n\t\t\t\treturn (\n\t\t\t\t\t<LogoutConfirmation\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tonConfirm={this.logout}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase RISKY_ORDER: {\n\t\t\t\tconst { onConfirm, ...rest } = data;\n\t\t\t\treturn (\n\t\t\t\t\t<RiskyOrder\n\t\t\t\t\t\tdata={{\n\t\t\t\t\t\t\tcoins: this.props.coins,\n\t\t\t\t\t\t\t...rest\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonConfirm={onConfirm}\n\t\t\t\t\t\tonClose={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tcase NOTIFICATIONS.INVITE_FRIENDS: {\n\t\t\t\tconst { onConfirm, ...rest } = data;\n\t\t\t\treturn (\n\t\t\t\t\t<Notification\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tdata={rest}\n\t\t\t\t\t\tonConfirm={data.onConfirm}\n\t\t\t\t\t\tonBack={this.onCloseDialog}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn <div />;\n\t\t}\n\t};\n\n\tonChangeLanguage = (language) => () => {\n\t\treturn this.props.changeLanguage(language);\n\t};\n\n\tisSocketDataReady() {\n\t\tconst { orderbooks, pairsTrades, pair } = this.props;\n\t\t// return (Object.keys(orderbooks).length && orderbooks[pair] && Object.keys(orderbooks[pair]).length &&\n\t\t// \tObject.keys(pairsTrades).length);\n\t\treturn (\n\t\t\tObject.keys(orderbooks).length &&\n\t\t\torderbooks[pair] &&\n\t\t\tObject.keys(pairsTrades).length\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tsymbol,\n\t\t\tpair,\n\t\t\tchildren,\n\t\t\tactiveNotification,\n\t\t\tprices,\n\t\t\t// verification_level,\n\t\t\tactiveLanguage,\n\t\t\t// openContactForm,\n\t\t\topenHelpfulResourcesForm,\n\t\t\tactiveTheme,\n\t\t\tunreadMessages,\n\t\t\trouter,\n\t\t\tlocation\n\t\t\t// user\n\t\t} = this.props;\n\t\tconst { dialogIsOpen, appLoaded, chatIsClosed } = this.state;\n\t\tconst languageClasses = getClasesForLanguage(activeLanguage, 'array');\n\t\tconst fontClass = getFontClassForLanguage(activeLanguage);\n\n\t\tconst shouldCloseOnOverlayClick =\n\t\t\tactiveNotification.type !== CONTACT_FORM;\n\t\tconst activePath = !appLoaded\n\t\t\t? ''\n\t\t\t: this.getClassForActivePath(this.props.location.pathname);\n\t\tconst isMenubar = activePath === 'account' || activePath === 'wallet';\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName={classnames(\n\t\t\t\t\tgetThemeClass(activeTheme),\n\t\t\t\t\tactivePath,\n\t\t\t\t\tsymbol,\n\t\t\t\t\tfontClass,\n\t\t\t\t\tlanguageClasses[0],\n\t\t\t\t\t{\n\t\t\t\t\t\t'layout-mobile': isMobile,\n\t\t\t\t\t\t'layout-desktop': isBrowser\n\t\t\t\t\t}\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t'app_container',\n\t\t\t\t\t\t'd-flex',\n\t\t\t\t\t\tgetThemeClass(activeTheme),\n\t\t\t\t\t\tactivePath,\n\t\t\t\t\t\tsymbol,\n\t\t\t\t\t\tfontClass,\n\t\t\t\t\t\tlanguageClasses[0],\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'layout-mobile': isMobile,\n\t\t\t\t\t\t\t'layout-desktop': isBrowser\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<EventListener\n\t\t\t\t\t\ttarget=\"window\"\n\t\t\t\t\t\tonResize={this.resetTimer}\n\t\t\t\t\t\tonScroll={this.resetTimer}\n\t\t\t\t\t\tonMouseMove={this.resetTimer}\n\t\t\t\t\t\tonClick={this.resetTimer}\n\t\t\t\t\t\tonKeyPress={this.resetTimer}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"d-flex flex-column f-1\">\n\t\t\t\t\t\t<AppBar\n\t\t\t\t\t\t\trouter={router}\n\t\t\t\t\t\t\tlocation={location}\n\t\t\t\t\t\t\tgoToDashboard={this.goToDashboard}\n\t\t\t\t\t\t\tlogout={this.logout}\n\t\t\t\t\t\t\tactivePath={activePath}\n\t\t\t\t\t\t\trightChildren={\n\t\t\t\t\t\t\t\t<CurrencyList\n\t\t\t\t\t\t\t\t\tclassName=\"horizontal-currency-list justify-content-end\"\n\t\t\t\t\t\t\t\t\tactiveLanguage={activeLanguage}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{isBrowser && isMenubar && (\n\t\t\t\t\t\t\t<AppMenuBar router={router} location={location} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t'app_container-content',\n\t\t\t\t\t\t\t\t'd-flex',\n\t\t\t\t\t\t\t\t'justify-content-between',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'app_container-secondary-content': isMenubar\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName={classnames(\n\t\t\t\t\t\t\t\t\t'app_container-main',\n\t\t\t\t\t\t\t\t\t'd-flex',\n\t\t\t\t\t\t\t\t\t'flex-column',\n\t\t\t\t\t\t\t\t\t'justify-content-between',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t'overflow-y': !isMobile\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{appLoaded && this.isSocketDataReady() ? (\n\t\t\t\t\t\t\t\t\tchildren\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Loader background={false} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isBrowser && (\n\t\t\t\t\t\t\t\t<div className=\"app_container-sidebar\">\n\t\t\t\t\t\t\t\t\t<Sidebar\n\t\t\t\t\t\t\t\t\t\tactivePath={activePath}\n\t\t\t\t\t\t\t\t\t\tlogout={this.logout}\n\t\t\t\t\t\t\t\t\t\t// help={openContactForm}\n\t\t\t\t\t\t\t\t\t\ttheme={activeTheme}\n\t\t\t\t\t\t\t\t\t\tisLogged={isLoggedIn()}\n\t\t\t\t\t\t\t\t\t\thelp={openHelpfulResourcesForm}\n\t\t\t\t\t\t\t\t\t\tpair={pair}\n\t\t\t\t\t\t\t\t\t\tminimizeChat={this.minimizeChat}\n\t\t\t\t\t\t\t\t\t\tchatIsClosed={chatIsClosed}\n\t\t\t\t\t\t\t\t\t\tunreadMessages={unreadMessages}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Dialog\n\t\t\t\t\t\t\t\tisOpen={dialogIsOpen}\n\t\t\t\t\t\t\t\tlabel=\"hollaex-modal\"\n\t\t\t\t\t\t\t\tclassName=\"app-dialog\"\n\t\t\t\t\t\t\t\tonCloseDialog={this.onCloseDialog}\n\t\t\t\t\t\t\t\tshouldCloseOnOverlayClick={shouldCloseOnOverlayClick}\n\t\t\t\t\t\t\t\ttheme={activeTheme}\n\t\t\t\t\t\t\t\tshowCloseText={\n\t\t\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\t\t\tactiveNotification.type === CONTACT_FORM ||\n\t\t\t\t\t\t\t\t\t\tactiveNotification.type ===\n\t\t\t\t\t\t\t\t\t\t\tHELPFUL_RESOURCES_FORM ||\n\t\t\t\t\t\t\t\t\t\tactiveNotification.type ===\n\t\t\t\t\t\t\t\t\t\t\tNOTIFICATIONS.NEW_ORDER ||\n\t\t\t\t\t\t\t\t\t\t(activeNotification.type ===\n\t\t\t\t\t\t\t\t\t\t\tNOTIFICATIONS.TRADES &&\n\t\t\t\t\t\t\t\t\t\t\t!isMobile) ||\n\t\t\t\t\t\t\t\t\t\t(activeNotification.type ===\n\t\t\t\t\t\t\t\t\t\t\tNOTIFICATIONS.ORDERS &&\n\t\t\t\t\t\t\t\t\t\t\t!isMobile) ||\n\t\t\t\t\t\t\t\t\t\tactiveNotification.type === NOTIFICATIONS.ERROR\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcompressed={\n\t\t\t\t\t\t\t\t\tactiveNotification.type === NOTIFICATIONS.ORDERS ||\n\t\t\t\t\t\t\t\t\tactiveNotification.type === NOTIFICATIONS.TRADES\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstyle={{ 'z-index': 100 }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{dialogIsOpen &&\n\t\t\t\t\t\t\t\t\tthis.renderDialogContent(\n\t\t\t\t\t\t\t\t\t\tactiveNotification,\n\t\t\t\t\t\t\t\t\t\tprices,\n\t\t\t\t\t\t\t\t\t\tactiveTheme\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Dialog>\n\t\t\t\t\t\t\t{!isMobile && (\n\t\t\t\t\t\t\t\t<ChatComponent\n\t\t\t\t\t\t\t\t\tminimized={chatIsClosed}\n\t\t\t\t\t\t\t\t\tonMinimize={this.minimizeChat}\n\t\t\t\t\t\t\t\t\tchatIsClosed={chatIsClosed}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isMobile && (\n\t\t\t\t\t\t\t<div className=\"app_container-bottom_bar\">\n\t\t\t\t\t\t\t\t<SidebarBottom\n\t\t\t\t\t\t\t\t\tisLogged={isLoggedIn()}\n\t\t\t\t\t\t\t\t\tactivePath={activePath}\n\t\t\t\t\t\t\t\t\tpair={pair}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<SnackNotification />\n\t\t\t\t<SnackDialog />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (store) => ({\n\tpair: store.app.pair,\n\tcoins: store.app.coins,\n\tsymbol: store.orderbook.symbol,\n\tprices: store.orderbook.prices,\n\tfetchingAuth: store.auth.fetching,\n\tactiveNotification: store.app.activeNotification,\n\tverification_level: store.user.verification_level,\n\tactiveLanguage: store.app.language,\n\tactiveTheme: store.app.theme,\n\torders: store.order.activeOrders,\n\tuser: store.user,\n\tunreadMessages: store.app.chatUnreadMessages,\n\torderbooks: store.orderbook.pairsOrderbooks,\n\tpairsTrades: store.orderbook.pairsTrades,\n\tsettings: store.user.settings\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\tlogout: bindActionCreators(logout, dispatch),\n\taddTrades: bindActionCreators(addTrades, dispatch),\n\tsetOrderbook: bindActionCreators(setOrderbook, dispatch),\n\tsetMe: bindActionCreators(setMe, dispatch),\n\tsetBalance: bindActionCreators(setBalance, dispatch),\n\tsetUserOrders: bindActionCreators(setUserOrders, dispatch),\n\taddOrder: bindActionCreators(addOrder, dispatch),\n\tupdateOrder: bindActionCreators(updateOrder, dispatch),\n\tremoveOrder: bindActionCreators(removeOrder, dispatch),\n\taddUserTrades: bindActionCreators(addUserTrades, dispatch),\n\tupdateUser: bindActionCreators(updateUser, dispatch),\n\tcloseNotification: bindActionCreators(closeNotification, dispatch),\n\tcloseAllNotification: bindActionCreators(closeAllNotification, dispatch),\n\topenContactForm: bindActionCreators(openContactForm, dispatch),\n\topenHelpfulResourcesForm: bindActionCreators(\n\t\topenHelpfulResourcesForm,\n\t\tdispatch\n\t),\n\tsetNotification: bindActionCreators(setNotification, dispatch),\n\tchangeLanguage: bindActionCreators(setLanguage, dispatch),\n\tchangePair: bindActionCreators(changePair, dispatch),\n\tsetPairs: bindActionCreators(setPairs, dispatch),\n\tsetPairsData: bindActionCreators(setPairsData, dispatch),\n\tsetOrderbooks: bindActionCreators(setOrderbooks, dispatch),\n\tsetTrades: bindActionCreators(setTrades, dispatch),\n\tsetTickers: bindActionCreators(setTickers, dispatch),\n\tchangeTheme: bindActionCreators(changeTheme, dispatch),\n\tsetChatUnreadMessages: bindActionCreators(setChatUnreadMessages, dispatch),\n\tsetOrderLimits: bindActionCreators(setOrderLimits, dispatch),\n\tsetSnackDialog: bindActionCreators(setSnackDialog, dispatch),\n\tsetCurrencies: bindActionCreators(setCurrencies, dispatch)\n});\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(Container);\n"]},"metadata":{},"sourceType":"module"}